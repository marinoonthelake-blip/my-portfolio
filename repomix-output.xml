This file is a merged representation of the entire codebase, combined into a single document by Repomix.

<file_summary>
This section contains a summary of this file.

<purpose>
This file contains a packed representation of the entire repository's contents.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.
</purpose>

<file_format>
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files (if enabled)
5. Multiple file entries, each consisting of:
  - File path as an attribute
  - Full contents of the file
</file_format>

<usage_guidelines>
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.
</usage_guidelines>

<notes>
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Files are sorted by Git change count (files with more changes are at the bottom)
</notes>

</file_summary>

<directory_structure>
app/
  admin/
    brain/
      page.tsx
  api/
    brain-scan/
      route.ts
    check-models/
      route.ts
    enhance-bullet/
      route.ts
    generate-resume/
      route.ts
    live-agent/
      route.ts
    read-cache/
      route.ts
  builder/
    page.tsx
  components/
    brain/
      HeroCard.tsx
      MathUtils.ts
      NeuralBackground.tsx
      NeuralData.ts
      SwarmEngine.ts
    builder/
      Icons.tsx
    CinematicIntro.tsx
    ExecutiveOnePager.tsx
    ExecutiveProfile.tsx
    HiddenResume.tsx
    NeuralTerminal.tsx
    SecurityLayer.tsx
  data/
    live_cache.json
    master_gems.ts
    master_resume.json
    resume_source.ts
  gems/
    artisan.ts
    identity.ts
    scout.ts
    synthesizer.ts
  favicon.ico
  globals.css
  layout.tsx
  page.tsx
public/
  js/
    noise.js
  projects/
    global-ops-arch.png
    global-ops.png
    immersive.png
    slidesense.png
    trace.png
  file.svg
  globe.svg
  next.svg
  profile.png
  vercel.svg
  window.svg
.gitignore
deploy.sh
eslint.config.mjs
legacy_scripts_backup.zip
next.config.ts
package.json
postcss.config.mjs
README.md
tsconfig.json
</directory_structure>

<files>
This section contains the contents of the repository's files.

<file path="app/api/read-cache/route.ts">
import { NextResponse } from 'next/server';
import { kv } from '@vercel/kv';
import staticCache from '../../data/live_cache.json';

export const dynamic = 'force-dynamic'; // Always fetch fresh data

export async function GET() {
  try {
    // 1. Try to fetch from Vercel KV (Redis)
    const liveData = await kv.get('live_cache');

    // 2. If Redis has data, return it.
    if (liveData) {
      return NextResponse.json(liveData);
    }

    // 3. If Redis is empty (first run), return static backup
    return NextResponse.json(staticCache);

  } catch (error) {
    console.error("KV Read Error:", error);
    // 4. Fail safe: return static backup
    return NextResponse.json(staticCache);
  }
}
</file>

<file path="app/data/master_resume.json">
{
  "profile": {
    "name": "Jonathan William Marino",
    "title": "Tech Lead for Policy @ Google",
    "tagline": "From E-Trade Babies to Enterprise Policy: Architecting the Integrity of the Future.",
    "contact": {
      "portfolio": "https://jwm.digital",
      "linkedin": "https://linkedin.com/in/jwmdigital"
    }
  },
  "brand_narrative": {
    [cite_start]"bio_summary": "A digital engineer and creative strategist who evolved from designing for Jay-Z and the E-Trade Babies to architecting Google's global policy infrastructure. I combine high-level creative direction with complex data engineering (SQL, Policy logic) to build systems that protect billions of users while eliminating friction. [cite: 8, 12, 42, 102]",
    [cite_start]"unique_value_prop": "The Power of Synthesis: Combining Creative Motion, Web Design, Data Analysis, and Policy Engineering to solve problems others deem impossible. [cite: 97, 216]"
  },
  "philosophy": {
    "northstars": [
      {
        "name": "The Integrity Imperative",
        "description": "Architecting data-driven solutions that ensure the fairness and consistency of Global Policy."
      },
      {
        "name": "Frictionless Future",
        "description": "Using complex data analysis to pinpoint dissatisfaction at the source and turn policy challenges into high-trust experiences."
      },
      {
        "name": "Elevate the Human",
        "description": "Freeing up high-level teams from manual review by building the 'Professional Google Inside' they never had."
      }
    ],
    "core_values": [
      "Empowerment and Safety First (Team Health)",
      "Unwavering Problem Solver (Relentless Execution)",
      [cite_start]"Data-Backed Conviction (Evidence over Opinion) [cite: 136]",
      [cite_start]"Security & Scalability First (Due Diligence) [cite: 133]",
      "Ethical Vigilance (Mitigating AI over-flagging)"
    ]
  },
  "core_competencies": [
    [cite_start]"GoogleSQL (BigQuery) & Complex Querying [cite: 190]",
    "Policy Infrastructure Architecture",
    "Crisis Management (ATO Code Red)",
    "Hierarchical Account Infection Mapping (TRACE)",
    [cite_start]"Creative Strategy (Motion & Web) [cite: 169]",
    [cite_start]"Vendor Vetting & Contract Negotiation [cite: 133]",
    "Security Analysis & Risk Mitigation",
    [cite_start]"Team Leadership (Global Supply Chain) [cite: 129]"
  ],
  "experience_highlights": [
    {
      "role": "Tech Lead, Policy & Trust Safety",
      "company": "Google",
      [cite_start]"duration": "2015 - Present [cite: 99]",
      "key_achievement": "Architecting global data solutions for Policy, Trust & Safety, and Crisis Response across a 12-year tenure.",
      "projects": [
        {
          "name": "ATO Crisis Response (Account Takeover Code Red)",
          "focus": "Risk Mitigation & Operational Recovery",
          "details": [
            "Orchestrated the 'Code Red' operational cleanup for high-risk Account Takeovers (ATO), directly managing 'Option B' protocols for critical clients.",
            "Engineered data pipelines integrating Buganizer CIDs into real-time dashboards, closing visibility gaps on missing cases.",
            "Led the transition from manual Trix-based investigations to the automated AART Clean Up Tool, significantly reducing case resolution time."
          ]
        },
        {
          "name": "Certs CX Infrastructure (Ads Certifications)",
          "focus": "Scalability & User Experience",
          "details": [
            "Collaborated on the architectural expansion of 'MCC Inheritance' criteria, simplifying certification logic for parent accounts.",
            "Developed scalable infrastructure for Certification Auditing and Revocation, ensuring policy compliance without throttling legitimate ad spend.",
            "Implemented 'Structured & Transparent Rejection' logic, reducing support ticket volume by clarifying policy violations to users."
          ]
        },
        {
          "name": "AI & Internal Tooling Innovation",
          "focus": "Automation & Innovation",
          "details": [
            [cite_start]"Built 'SlideSense' (NLP/Computer Vision), an AI tool that automates executive presentation review, saving 1,000+ management hours. [cite: 143]",
            [cite_start]"Created 'Stevie,' a Gemini-powered audio synthesis interface, solving accessibility gaps for visually impaired users by enabling audio-only LLM chat. [cite: 149]",
            [cite_start]"Engineered 'CARTA,' a custom GA4 analytics widget to solve complex document tracking issues that standard tools could not handle. [cite: 155]"
          ]
        },
        {
          "name": "Global Operations Engineering",
          "focus": "Scale & Efficiency",
          "details": [
            [cite_start]"Founded and scaled 'Production Creative Works' from a pilot to a multi-million dollar global operation across APAC, EMEA, and AMER. [cite: 129]",
            [cite_start]"Authored the core SOPs and Business Requirement Documents (BRDs) that standardized Google's creative supply chain. [cite: 134]",
            [cite_start]"Implemented 'Data & Metrics Visualization' to track Time to Delivery and Revision Rates, moving creative management to objective P&L management. [cite: 136]"
          ]
        },
        {
          "name": "Creative Technology (Ad Formats)",
          "focus": "First-to-Market Engineering",
          "details": [
            [cite_start]"Led Technical Program Management for '3D Swirl,' enabling interactive 3D assets (glTF/glb) in display ads. [cite: 110]",
            [cite_start]"Drove adoption of YouTube AR 'Virtual Try-On,' using ARCore to allow users to try makeup via front-facing camera. [cite: 118]",
            [cite_start]"Served as Technical Consultant for 'Beyond the Map' (Rio Favelas) and 'Hidden Worlds' (National Parks), using 360-degree video/WebGL for digital archiving. [cite: 161, 163]"
          ]
        }
      ]
    },
    {
      "role": "Motion Graphics Director / Lead",
      "company": "Boombox",
      [cite_start]"duration": "2010 - 2015 [cite: 74]",
      "key_achievement": "Evolved from a singular video editor to a Director, building an internal creative production powerhouse.",
      [cite_start]"metrics": "Managed 'award-winning projects' and defined pipeline management for video & graphics. [cite: 86]"
    },
    {
      "role": "Lead 3D Artist & Audio Engineer",
      "company": "LimeGorilla (Indie Game Dev)",
      [cite_start]"duration": "2010s [cite: 91]",
      [cite_start]"key_achievement": "Built 'Goofer' for iPad, demonstrating full-stack mobile capability (Audio, 3D, Logic) during the early App Store boom. [cite: 91]",
      [cite_start]"metrics": "Handled Music Creation, 3D Modeling, and Game Logic. [cite: 94]"
    },
    {
      "role": "Production Designer / Performer",
      "company": "Oddcast",
      [cite_start]"duration": "2006 - 2010 [cite: 18]",
      [cite_start]"key_achievement": "Pioneered early viral marketing and personalized interactivity. [cite: 21]",
      [cite_start]"metrics": "Key contributor to 'Monk-e-Mail' (50M users) and the 'E-Trade Baby' Super Bowl campaign (ran for 6 years). [cite: 37, 46]"
    }
  ],
  "voice_settings": {
    "tone": "Visionary but grounded, Authoritative, 'The Adult in the Room'",
    "keywords_to_include": ["Integrity", "Frictionless", "Synthesis", "Scale", "Conviction", "Governance"],
    "forbidden_phrases": ["I helped", "I think", "Rockstar", "Ninja"]
  }
}
</file>

<file path="public/js/noise.js">
!function(){"use strict";var r=.5*(Math.sqrt(3)-1),e=(3-Math.sqrt(3))/6,t=1/6,a=(Math.sqrt(5)-1)/4,o=(5-Math.sqrt(5))/20;function i(r){var e;e="function"==typeof r?r:r?function(){var r=0,e=0,t=0,a=1,o=i.now()/1e3;function i(e){return(r=e*a+o)%256}return i.seed=function(e){e<1&&(e*=65536),o=(e=Math.floor(e))>>>8,a=e%256+111,r=0,e=0,t=0},i}():Math.random,this.p=n(e),this.perm=new Uint8Array(512),this.permMod12=new Uint8Array(512);for(var t=0;t<512;t++)this.perm[t]=this.p[255&t],this.permMod12[t]=this.perm[t]%12}function n(r){var e,t=new Uint8Array(256);for(e=0;e<256;e++)t[e]=e;for(e=0;e<255;e++){var a,o=e+~~(r()*(256-e)),i=t[e];t[e]=t[o],t[o]=i}return t}i.prototype={grad3:new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]),noise3D:function(a,o,i){var n,s,h,l,f,c,u,d,p,m,M=this.permMod12,y=this.perm,v=this.grad3,w=(a+o+i)*t,A=Math.floor(a+w),x=Math.floor(o+w),g=Math.floor(i+w),S=(A+x+g)*t,U=a-(A-S),b=o-(x-S),F=i-(g-S);U>=b?b>=F?(f=1,c=0,u=0,d=1,p=1,m=0):U>=F?(f=1,c=0,u=0,d=1,p=0,m=1):(f=0,c=0,u=1,d=1,p=0,m=1):b<F?(f=0,c=0,u=1,d=0,p=1,m=1):U<F?(f=0,c=1,u=0,d=0,p=1,m=1):(f=0,c=1,u=0,d=1,p=1,m=0);var D=U-f+t,T=b-c+t,k=F-u+t,P=U-d+2*t,z=b-p+2*t,q=F-m+2*t,E=U-1+.5,I=b-1+.5,j=F-1+.5,H=255&A,K=255&x,L=255&g,N=.6-U*U-b*b-F*F;if(N<0)n=0;else{var O=3*M[H+y[K+y[L]]];n=(N*=N)*N*(v[O]*U+v[O+1]*b+v[O+2]*F)}var Q=.6-D*D-T*T-k*k;if(Q<0)s=0;else{var R=3*M[H+f+y[K+c+y[L+u]]];s=(Q*=Q)*Q*(v[R]*D+v[R+1]*T+v[R+2]*k)}var V=.6-P*P-z*z-q*q;if(V<0)h=0;else{var W=3*M[H+d+y[K+p+y[L+m]]];h=(V*=V)*V*(v[W]*P+v[W+1]*z+v[W+2]*q)}var X=.6-E*E-I*I-j*j;if(X<0)l=0;else{var Y=3*M[H+1+y[K+1+y[L+1]]];l=(X*=X)*X*(v[Y]*E+v[Y+1]*I+v[Y+2]*j)}return 32*(n+s+h+l)}},window.SimplexNoise=i}();
</file>

<file path="app/admin/brain/page.tsx">
"use client";
import React, { useState } from 'react';
import { Activity, Save, RefreshCw, AlertCircle, Terminal, Database } from 'lucide-react';

export default function BrainConsole() {
  const [loading, setLoading] = useState(false);
  const [result, setResult] = useState<any>(null);
  const [errorLog, setErrorLog] = useState<string | null>(null);
  const [showRaw, setShowRaw] = useState(false);

  const runScan = async () => {
    setLoading(true);
    setErrorLog(null);
    setResult(null);
    setShowRaw(false);
    
    try {
        const res = await fetch('/api/brain-scan', { method: 'POST' });
        const payload = await res.json();
        
        if (!res.ok || !payload.success) {
            throw new Error(payload.error || "Server Error " + res.status);
        }
        
        // Normalize: If API returns { list: [...] } or just [...], handle both
        const data = Array.isArray(payload.data) ? payload.data : (payload.data?.items || []);
        
        if (data.length === 0) throw new Error("API returned success but ZERO data items.");
        
        setResult(data);
    } catch (e: any) {
        setErrorLog(e.message);
    } finally {
        setLoading(false);
    }
  };

  return (
    <div className="min-h-screen bg-slate-950 text-white p-12 font-mono selection:bg-red-500/30">
      <div className="max-w-5xl mx-auto">
        <header className="mb-12 border-b border-slate-800 pb-6 flex justify-between items-center">
            <div>
                <h1 className="text-3xl font-bold text-red-500 mb-2 flex items-center gap-3">
                    <Activity /> LIVE INTELLIGENCE CONSOLE
                </h1>
                <p className="text-slate-400">Google Search Grounding Engine</p>
            </div>
            <div className="text-xs text-slate-600 border border-slate-800 px-3 py-1 rounded">
                MODE: EXECUTIVE_SEARCH
            </div>
        </header>

        {/* CONTROLS */}
        <div className="bg-slate-900 border border-slate-800 rounded-xl p-8 mb-8 shadow-2xl">
            <h2 className="text-xl font-bold mb-4 flex items-center gap-2"><Database size={20}/> Deep Research Protocol</h2>
            <p className="text-sm text-slate-400 mb-6 max-w-2xl leading-relaxed">
                This triggers <strong>Gemini 2.0 Flash</strong> (with Google Search Tools) to analyze your resume against live market data. 
                It generates 10 strategic narrative cards and saves them to <code>app/data/live_cache.json</code>.
            </p>
            
            <button 
                onClick={runScan} 
                disabled={loading}
                className={`w-full py-4 rounded font-bold tracking-widest transition-all flex items-center justify-center gap-3 ${loading ? 'bg-slate-800 text-slate-500 cursor-not-allowed' : 'bg-red-600 hover:bg-red-500 text-white shadow-lg shadow-red-900/20'}`}
            >
                {loading ? <RefreshCw className="animate-spin" /> : <Activity />}
                {loading ? "SEARCHING GLOBAL NETWORKS (MAY TAKE 20s)..." : "INITIATE LIVE SCAN"}
            </button>
        </div>

        {/* ERROR LOGGING */}
        {errorLog && (
            <div className="bg-red-950/50 border border-red-500/50 p-6 rounded-xl mb-8 animate-in fade-in">
                <div className="flex items-center gap-2 text-red-400 font-bold mb-2">
                    <AlertCircle size={20} /> SYSTEM FAILURE
                </div>
                <pre className="text-xs text-red-200 overflow-x-auto whitespace-pre-wrap font-mono bg-black/30 p-4 rounded">{errorLog}</pre>
            </div>
        )}

        {/* SUCCESS RESULT */}
        {result && (
            <div className="animate-in fade-in slide-in-from-bottom-4 duration-700">
                <div className="flex items-center justify-between mb-4">
                    <div className="flex items-center gap-2 text-green-400">
                        <Save size={16} />
                        <span className="text-xs font-bold uppercase">{result.length} Signals Captured & Cached</span>
                    </div>
                    <button onClick={() => setShowRaw(!showRaw)} className="text-xs text-slate-500 hover:text-white underline">
                        {showRaw ? "Hide Raw Data" : "Inspect Raw JSON"}
                    </button>
                </div>
                
                {/* PREVIEW CARD */}
                <div className="bg-slate-900 border border-red-500/30 rounded-xl p-8 relative overflow-hidden mb-4 shadow-2xl">
                    <div className="absolute top-0 left-0 w-1 h-full bg-red-500"></div>
                    <div className="mb-6">
                        <span className="text-xs font-bold text-red-500 bg-red-950/30 px-2 py-1 rounded border border-red-500/20">LATEST SIGNAL (1 of {result.length})</span>
                        <h3 className="text-3xl font-bold mt-3 text-white tracking-tight">{result[0]?.headline?.title || "MISSING TITLE"}</h3>
                        <p className="text-slate-400 mt-1">{result[0]?.headline?.subtitle || "MISSING SUBTITLE"}</p>
                    </div>
                    
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-8 mb-6">
                        <div className="bg-black/20 p-4 rounded border border-white/5">
                            <label className="text-[10px] font-bold text-slate-500 uppercase tracking-widest">Live Source</label>
                            <a href={result[0]?.context?.sources?.[0]?.url} target="_blank" rel="noreferrer" className="text-sm mt-2 text-blue-400 hover:underline block truncate">
                                {result[0]?.context?.sources?.[0]?.url || "No URL Generated"}
                            </a>
                            <p className="text-xs text-slate-400 mt-2 leading-relaxed">{result[0]?.context?.description}</p>
                        </div>
                        <div className="bg-black/20 p-4 rounded border border-white/5">
                            <label className="text-[10px] font-bold text-slate-500 uppercase tracking-widest">Strategic Insight</label>
                            <p className="text-sm mt-2 text-slate-300 leading-relaxed">{result[0]?.insight?.explanation}</p>
                        </div>
                    </div>

                    <div className="bg-green-900/10 p-4 rounded border border-green-500/20">
                        <label className="text-[10px] font-bold text-green-500 uppercase tracking-widest">Matched Portfolio Capability</label>
                        <div className="flex justify-between items-center mt-2">
                            <span className="font-bold text-white text-sm">{result[0]?.experience?.role}</span>
                            <span className="text-[10px] font-bold bg-green-500/20 text-green-400 px-2 py-1 rounded border border-green-500/30">{result[0]?.experience?.result}</span>
                        </div>
                        <p className="text-sm text-slate-400 mt-2">{result[0]?.experience?.action}</p>
                    </div>
                </div>

                {showRaw && (
                    <pre className="text-[10px] text-slate-500 bg-black p-4 rounded overflow-auto h-64 border border-slate-800 mb-4">
                        {JSON.stringify(result, null, 2)}
                    </pre>
                )}

                <div className="p-4 bg-blue-900/20 border border-blue-500/20 text-blue-200 text-xs rounded flex items-center gap-3">
                    <Terminal size={16} />
                    <span><strong>SYSTEM READY:</strong> Your live cache is updated. Return to the homepage to see the rotation.</span>
                </div>
            </div>
        )}
      </div>
    </div>
  );
}
</file>

<file path="app/api/brain-scan/route.ts">
import { GoogleGenerativeAI } from "@google/generative-ai";
import { NextResponse } from "next/server";
import fs from 'fs';
import path from 'path';
import { kv } from '@vercel/kv';
import { RESUME_TEXT } from "../../data/resume_source";

export const maxDuration = 60; 
export const dynamic = 'force-dynamic';

function cleanAndParseJSON(text: string) {
    try {
        let clean = text.replace(/```json/gi, "").replace(/```/g, "").trim();
        const firstOpen = clean.indexOf('[');
        const lastClose = clean.lastIndexOf(']');
        if (firstOpen === -1 || lastClose === -1) throw new Error("No JSON array found");
        return JSON.parse(clean.substring(firstOpen, lastClose + 1));
    } catch (e: any) {
        console.error("JSON Parse Error:", e.message);
        throw e;
    }
}

export async function POST(req: Request) {
    const debugLog: string[] = [];
    const log = (msg: string) => { console.log(`[Brain]: ${msg}`); debugLog.push(msg); };

    try {
        const apiKey = process.env.GEMINI_API_KEY || "";
        const genAI = new GoogleGenerativeAI(apiKey);
        const today = new Date().toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });

        const promptText = `
        ROLE: Executive Technical Recruiter.
        TARGET PROFILE: ${RESUME_TEXT.substring(0, 8000)}
        TODAY'S DATE: ${today}

        TASK:
        1. **BREAKING NEWS (Item 1):** Find ONE major tech event from the last 24 hours.
           - FORCE the 'date' field to be "LIVE - TODAY".
        2. **MARKET TRENDS (Items 2-10):** Find 9 other recent events (last 30 days).

        CRITICAL RULES:
        - "sources.url": MUST BE A REAL LINK.
        - "experience.result": Use exact numbers from the resume.
        - "category": Must be "live".

        OUTPUT JSON ONLY (Array of objects matching NarrativeCard schema).
        `;

        log("Attempting Gemini 2.5 Flash (Search Enabled)...");
        const model = genAI.getGenerativeModel({ 
            model: "gemini-2.5-flash", 
            tools: [{ googleSearch: {} }] as any 
        });
        
        const result = await model.generateContent({
            contents: [{ role: "user", parts: [{ text: promptText }] }]
        });
        
        let jsonResult = cleanAndParseJSON(result.response.text());
        
        // Garbage Filter
        jsonResult = jsonResult.filter((item: any) => {
            const url = item.context?.sources?.[0]?.url || "";
            return url && !url.includes("example.com") && url.startsWith("http");
        });
        
        // --- PERSISTENCE LAYER ---
        
        // 1. Write to Vercel KV (Production Storage)
        try {
            await kv.set('live_cache', jsonResult);
            log("✅ Saved to Vercel KV (Redis)");
        } catch (kvError: any) {
            log("⚠️ Vercel KV Write Failed: " + kvError.message);
        }

        // 2. Write to Local File (Dev Mode Only)
        if (process.env.NODE_ENV === 'development') {
            try {
                const filePath = path.join(process.cwd(), 'app', 'data', 'live_cache.json');
                fs.writeFileSync(filePath, JSON.stringify(jsonResult, null, 2));
                log("✅ Saved to Local Filesystem");
            } catch (fsError) {
                log("⚠️ Local Write Failed (Expected in Production)");
            }
        }

        return NextResponse.json({ success: true, logs: debugLog, data: jsonResult });

    } catch (fatalError: any) {
        return NextResponse.json({ success: false, error: fatalError.message, logs: debugLog }, { status: 500 });
    }
}
</file>

<file path="app/api/check-models/route.ts">
import { GoogleGenerativeAI } from "@google/generative-ai";
import { NextResponse } from "next/server";

export const dynamic = 'force-dynamic';

export async function GET() {
    try {
        const apiKey = process.env.GEMINI_API_KEY;
        if (!apiKey) return NextResponse.json({ error: "No API Key" });

        const genAI = new GoogleGenerativeAI(apiKey);
        
        // List all models available to your key
        let modelResponse = await fetch(`https://generativelanguage.googleapis.com/v1beta/models?key=${apiKey}`);
        let data = await modelResponse.json();

        if (data.error) {
            throw new Error(data.error.message);
        }

        const availableModels = data.models
            .filter((m: any) => m.supportedGenerationMethods.includes("generateContent"))
            .map((m: any) => ({
                name: m.name,
                displayName: m.displayName,
                description: m.description,
                version: m.version
            }));

        return NextResponse.json({ 
            count: availableModels.length,
            models: availableModels 
        });

    } catch (error: any) {
        return NextResponse.json({ error: error.message }, { status: 500 });
    }
}
</file>

<file path="app/api/enhance-bullet/route.ts">
import { GoogleGenerativeAI } from "@google/generative-ai";
import { NextResponse } from "next/server";

export const runtime = 'edge';

const genAI = new GoogleGenerativeAI(process.env.GEMINI_API_KEY || "");
// UPGRADE: Using 2.5 Flash
const model = genAI.getGenerativeModel({ model: "gemini-2.5-flash" });

export async function POST(req: Request) {
    try {
        const formData = await req.json();

        const prompt = `
        ROLE: Executive Resume Strategist.
        TASK: Transform raw input into a C-Suite Impact Bullet.
        
        INPUT:
        Role: ${formData.role}
        Project: ${formData.project}
        Context: ${formData.situation} / ${formData.complication}
        Action: ${formData.resolution}
        Metric: ${formData.metricValue} ${formData.metricName}

        OUTPUT JSON:
        {
            "industryStandards": ["Standard1", "Standard2"],
            "marketContext": "Why a CTO cares.",
            "skills": ["Skill1", "Skill2"],
            "enhancedBullet": "Action-oriented, metric-driven bullet point."
        }
        `;

        const result = await model.generateContent({
            contents: [{ role: "user", parts: [{ text: prompt }] }],
            generationConfig: { responseMimeType: "application/json" }
        });

        return NextResponse.json(JSON.parse(result.response.text()));

    } catch (error) {
        return NextResponse.json({ error: "Analysis failed" }, { status: 500 });
    }
}
</file>

<file path="app/builder/page.tsx">
"use client";
import React, { useState, useEffect } from 'react';
import { LucideIcon } from '../components/builder/Icons';

// --- THE MASTER PORTFOLIO (33 Items) ---
const INITIAL_PORTFOLIO = [
    {
        role: "Tech Lead (Policy)",
        project: "Global Policy Data Mesh",
        situation: "Managing policy across EU, Asia, & US.",
        complication: "Fragmented data created regulatory risk and slow response times.",
        resolution: "Architected a massively parallel data mesh to automate compliance.",
        metricValue: "€20M | 30%",
        metricName: "Fine Avoidance | Regulatory Risk Reduction",
        enhancedBullet: "Architected a massively parallel Global Policy Data Mesh to automate compliance across EU, Asia, & US markets, mitigating fragmented data risks and achieving 30% regulatory risk reduction (approx. €20M fine avoidance).",
        industryStandards: ["GDPR", "Data Sovereignty"],
        skills: ["Problem Solving", "Execution Excellence"]
    },
    {
        role: "Tech Lead (Policy)",
        project: "Ethical AI Governance",
        situation: "AI models were flagging accounts automatically.",
        complication: "High false-positive rates were banning legitimate users and hurting revenue.",
        resolution: "Operationalized 'Human-in-the-Loop' logic layers aligned with NIST AI RMF.",
        metricValue: "$5M LTV | 15%",
        metricName: "Retained User Revenue",
        enhancedBullet: "Operationalized 'Human-in-the-Loop' logic layers aligned with NIST AI RMF standards to correct automated over-flagging, reducing false positives by 15% and retaining $5M in legitimate user LTV.",
        industryStandards: ["NIST AI RMF", "Algorithmic Fairness"],
        skills: ["Problem Solving", "Respect the User"]
    },
    {
        role: "Tech Lead (Policy)",
        project: "TRACE Methodology",
        situation: "Complex hierarchical account relationships existed.",
        complication: "Bad actors were hiding in network structures; manual review was too slow.",
        resolution: "Built a graph-based account explorer to map bad actors at the source.",
        metricValue: "40%",
        metricName: "Reduction in Manual Review",
        enhancedBullet: "Engineered the 'TRACE' graph-based account explorer to map concealed hierarchical bad-actor networks, reducing manual review dependency by 40% and saving ~10,000 engineering hours annually.",
        industryStandards: ["Graph Analysis", "Fraud Detection"],
        skills: ["Execution Excellence", "Building Knowledge"]
    },
    {
        role: "Internal Founder",
        project: "Creative Production Works",
        situation: "Google needed agile creative production internally.",
        complication: "External agencies were slow, expensive, and insecure.",
        resolution: "Founded and scaled an internal startup to handle production in-house.",
        metricValue: "$15M",
        metricName: "Annual Revenue Run Rate",
        enhancedBullet: "Founded and scaled 'Creative Production Works' from concept to a $15M internal enterprise with 50 staff, replacing insecure external agencies with an agile, secure in-house production model.",
        industryStandards: ["Agile Production", "Cost Center to Profit Center"],
        skills: ["Execution Excellence", "Building Knowledge"]
    },
    {
        role: "Internal Founder",
        project: "Global Ops & Vetting",
        situation: "Teams distributed across India, EU, & NA.",
        complication: "Inconsistent security standards created vendor risk.",
        resolution: "Established a unified security framework and handled all contract negotiations.",
        metricValue: "100%",
        metricName: "Vendor Compliance Rate",
        enhancedBullet: "Established a unified Global Ops security framework across India, EU, & NA, achieving 100% vendor compliance and accelerating onboarding speed by 6 weeks through direct contract negotiation.",
        industryStandards: ["VRM", "ISO 27001"],
        skills: ["Risk Management", "Execution Excellence"]
    },
    {
        role: "Data Scientist",
        project: "Internal Tool Commercialization",
        situation: "Internal teams relied on fragmented scripts.",
        complication: "Non-technical staff couldn't access data without engineering help.",
        resolution: "Productized internal tools into a self-service visualization suite.",
        metricValue: "30%",
        metricName: "Time-to-Insight Reduction",
        enhancedBullet: "Productized fragmented internal engineering scripts into a polished self-service visualization suite, reducing time-to-insight by 30% and eliminating engineering bottlenecks for non-technical staff.",
        industryStandards: ["Self-Service BI", "Product-Led Growth"],
        skills: ["Data Democratization", "Collaborating"]
    },
    {
        role: "Creative Tech",
        project: "Oddcast / Viral Marketing",
        situation: "Launching early AR campaigns for Tier-1 clients.",
        complication: "High traffic surges often crashed legacy systems.",
        resolution: "Designed high-availability systems for viral loads (E-Trade Babies, etc.).",
        metricValue: "100M+",
        metricName: "Global Impressions",
        enhancedBullet: "Designed high-availability architecture to sustain massive viral traffic surges (100M+ impressions) for Tier-1 campaigns (e.g., E-Trade Babies), ensuring 99.99% uptime during peak loads.",
        industryStandards: ["High Availability", "Viral Engineering"],
        skills: ["Technical Resilience", "Problem Solving"]
    },
    {
        role: "Tech Lead (Policy)",
        project: "DSA Response",
        situation: "New EU regulations required rapid transparency reporting.",
        complication: "Failure to comply carried a risk of 6% global turnover fines.",
        resolution: "Led a cross-functional task force to build automated transparency reporting pipelines.",
        metricValue: "100%",
        metricName: "Compliance Rate",
        enhancedBullet: "Led the cross-functional engineering task force to automate Digital Services Act (DSA) transparency reporting, achieving 100% compliance and eliminating the risk of 6% global turnover fines.",
        industryStandards: ["Digital Services Act", "Regulatory Reporting"],
        skills: ["Adapting to Ambiguity", "Execution Excellence"]
    },
    {
        role: "Data Scientist",
        project: "Cloud Cost Optimization",
        situation: "Exponential growth in data storage (BigQuery) costs.",
        complication: "Unchecked queries were blowing the OpEx budget.",
        resolution: "Implemented slot management governance and query optimization protocols.",
        metricValue: "$500k",
        metricName: "Annualized Savings",
        enhancedBullet: "Implemented rigorous BigQuery slot management governance and query optimization protocols, reversing exponential cost growth to deliver $500k in annualized OpEx savings.",
        industryStandards: ["FinOps", "Cloud Economics"],
        skills: ["Financial Stewardship", "Problem Solving"]
    },
    {
        role: "Internal Founder",
        project: "Talent Retention Strategy",
        situation: "High attrition in operations teams due to repetitive work.",
        complication: "Brain drain and loss of institutional knowledge.",
        resolution: "Designed a new career ladder and upskilling program to improve retention.",
        metricValue: "25%",
        metricName: "Attrition Reduction",
        enhancedBullet: "Designed and deployed a specialized career ladder and upskilling program for operations teams, reducing attrition by 25% and preserving critical institutional knowledge.",
        industryStandards: ["Human Capital Management", "Upskilling"],
        skills: ["Lift Yourself & Others", "Building Knowledge"]
    },
    {
        role: "Creative Tech",
        project: "Dynamic Creative Optimization",
        situation: "Standard display ads had low engagement.",
        complication: "Creative was static and not personalized to user context.",
        resolution: "Built a DCO pipeline to serve personalized creative assets in real-time.",
        metricValue: "$2M",
        metricName: "Revenue Lift",
        enhancedBullet: "Built a real-time Dynamic Creative Optimization (DCO) pipeline to serve context-aware assets, doubling Click-Through Rates (CTR) and generating a confirmed $2M revenue lift.",
        industryStandards: ["DCO", "Real-Time Bidding"],
        skills: ["Innovation", "Execution Excellence"]
    },
    {
        role: "Tech Lead",
        project: "Legacy Stack Migration",
        situation: "Critical tools ran on deprecated legacy infrastructure.",
        complication: "Security vulnerabilities and inability to scale.",
        resolution: "Orchestrated a zero-downtime migration to modern microservices architecture.",
        metricValue: "0 Downtime",
        metricName: "Migration Success",
        enhancedBullet: "Orchestrated the zero-downtime migration of critical legacy tools to a modern microservices architecture, eliminating security vulnerabilities and reducing API latency by 50%.",
        industryStandards: ["Microservices", "Legacy Modernization"],
        skills: ["Technical Leadership", "Risk Management"]
    },
    {
        role: "Tech Lead (Policy)",
        project: "Election Integrity",
        situation: "Upcoming high-stakes global elections.",
        complication: "Spike in political misinformation and bad actors.",
        resolution: "Deployed a real-time 'War Room' dashboard for rapid policy enforcement.",
        metricValue: "<15 Min",
        metricName: "Mean Time to Detect",
        enhancedBullet: "Deployed a real-time 'War Room' dashboard for global election integrity, enabling rapid detection of misinformation spikes and reducing Mean Time to Detect (MTTD) to under 15 minutes.",
        industryStandards: ["Crisis Management", "Trust & Safety"],
        skills: ["Crisis Response", "Adapting to Ambiguity"]
    },
    {
        role: "Data Scientist",
        project: "Data Democratization",
        situation: "Analysts were a bottleneck for simple business questions.",
        complication: "Slow decision-making velocity across the org.",
        resolution: "Built a 'Data University' self-serve platform for non-technical stakeholders.",
        metricValue: "200+",
        metricName: "Active Users",
        enhancedBullet: "Built the 'Data University' self-serve platform to democratize access for 200+ non-technical stakeholders, removing analyst bottlenecks and accelerating decision-making velocity.",
        industryStandards: ["Data Literacy", "Self-Service Analytics"],
        skills: ["Lift Yourself & Others", "Collaborating"]
    },
    {
        role: "Internal Founder",
        project: "Vendor Consolidation",
        situation: "Sprawl of creative vendors across the organization.",
        complication: "Inefficient spend and fragmented security surface.",
        resolution: "Consolidated vendor list to top 5 preferred partners with negotiated rates.",
        metricValue: "15%",
        metricName: "Cost Reduction",
        enhancedBullet: "Consolidated a fragmented creative vendor landscape into 5 preferred partners, streamlining the security surface and negotiating rate cards to achieve 15% procurement cost savings.",
        industryStandards: ["Strategic Sourcing", "Vendor Governance"],
        skills: ["Operational Efficiency", "Negotiation"]
    },
    {
        role: "Creative Tech",
        project: "Mobile Performance Tuning",
        situation: "Rich media assets were heavy and slow on mobile.",
        complication: "High bounce rates on mobile devices.",
        resolution: "Implemented adaptive streaming and asset compression algorithms.",
        metricValue: "40%",
        metricName: "Faster Load Time",
        enhancedBullet: "Implemented adaptive streaming and asset compression algorithms for rich media, improving mobile page load times by 40% and significantly reducing bounce rates.",
        industryStandards: ["Core Web Vitals", "Mobile-First Design"],
        skills: ["Technical Optimization", "User Focus"]
    },
    {
        role: "Strategist",
        project: "OKR Alignment",
        situation: "Engineering roadmaps were misaligned with business P&L.",
        complication: "Wasted engineering cycles on low-value features.",
        resolution: "Facilitated joint OKR planning to align tech output with revenue goals.",
        metricValue: "100%",
        metricName: "Strategic Alignment",
        enhancedBullet: "Facilitated joint OKR planning sessions to bridge the gap between Engineering and P&L leaders, achieving 100% roadmap alignment with high-priority revenue goals.",
        industryStandards: ["OKRs", "Strategic Planning"],
        skills: ["Strategic Vision", "Collaborating"]
    },
    {
        role: "Tech Lead (Policy)",
        project: "Child Safety (COPPA)",
        situation: "New regulations regarding minor safety online.",
        complication: "High risk of brand damage and regulatory action.",
        resolution: "Architected an age-gating and content classification pipeline.",
        metricValue: "0",
        metricName: "Breach Incidents",
        enhancedBullet: "Architected a robust age-gating and content classification pipeline to meet COPPA/AADC standards, resulting in zero compliance breach incidents and safeguarding platform integrity.",
        industryStandards: ["COPPA", "AADC"],
        skills: ["Doing the Right Thing", "Execution Excellence"]
    },
    {
        role: "Tech Lead",
        project: "Incident Response (SRE)",
        situation: "Frequent SEV1 outages during peak traffic.",
        complication: "Erosion of user trust and advertiser confidence.",
        resolution: "Instituted blameless post-mortems and automated recovery runbooks.",
        metricValue: "50%",
        metricName: "MTTR Reduction",
        enhancedBullet: "Instituted SRE best practices including blameless post-mortems and automated recovery runbooks, reducing Mean Time to Recover (MTTR) for SEV1 outages by 50%.",
        industryStandards: ["SRE", "Incident Management"],
        skills: ["Reliability Engineering", "Leadership"]
    },
    {
        role: "Data Scientist",
        project: "Customer 360 View",
        situation: "User data was siloed across marketing, sales, and product.",
        complication: "Inability to personalize user experience effectively.",
        resolution: "Unified disparate data streams into a single 'Golden Record' customer view.",
        metricValue: "100%",
        metricName: "Data Completeness",
        enhancedBullet: "Unified disparate marketing, sales, and product data streams into a single 'Golden Record' 360-degree view, enabling effective personalization and unlocking new customer insights.",
        industryStandards: ["CDP", "Master Data Management"],
        skills: ["Data Architecture", "Cross-Functional Integration"]
    },
    {
        role: "Tech Lead",
        project: "Billing Team Data Enablement",
        situation: "Billing team lacked automated reporting.",
        complication: "Manual processes consumed 15 hrs/wk and caused ad-hoc engineering requests.",
        resolution: "Automated 3-5 core reports and drove DataSite adoption.",
        metricValue: "15 hrs/wk",
        metricName: "Time Saved",
        enhancedBullet: "Architected scalable data infrastructure for the Billing Team, automating critical reporting to save 15 hours/week and driving 90% DataSite adoption, reducing ad-hoc engineering support by 50%.",
        industryStandards: ["Process Automation", "Self-Service BI"],
        skills: ["Collaborating", "Execution Excellence"]
    },
    {
        role: "Tech Lead",
        project: "Team Enablement",
        situation: "Need for continuous team upskilling.",
        complication: "Knowledge silos were slowing down onboarding.",
        resolution: "Delivered trainings and ran onboarding sessions.",
        metricValue: "100%",
        metricName: "L&D Goals Met",
        enhancedBullet: "Spearheaded team enablement and onboarding initiatives, delivering targeted training sessions that ensured 100% completion of L&D goals and fostered a culture of continuous knowledge sharing.",
        industryStandards: ["Learning & Development", "Knowledge Management"],
        skills: ["Lift Yourself & Others", "Building Knowledge"]
    },
    {
        role: "Tech Lead",
        project: "SSoT Data Ecosystem",
        situation: "Critical data fragmentation across gTech Commerce & T&S.",
        complication: "Siloed data prevented accurate cross-functional analysis.",
        resolution: "Spearheaded unified data strategy for gTech, T&S, gSO, and GTM.",
        metricValue: "100%",
        metricName: "SSoT Adoption",
        enhancedBullet: "Spearheaded the technical strategy and execution of a unified Single Source of Truth (SSoT) data ecosystem for gTech and T&S, resolving critical fragmentation and aligning global stakeholders.",
        industryStandards: ["Data Governance", "SSoT"],
        skills: ["Strategic Vision", "Collaborating"]
    },
    {
        role: "Tech Lead",
        project: "Parent-Child Case Mapping",
        situation: "Disconnected case data between gTech and T&S.",
        complication: "Inability to trace root causes of complex commerce cases.",
        resolution: "Engineered novel parent-child case mapping solution.",
        metricValue: ">95%",
        metricName: "Mapping Accuracy",
        enhancedBullet: "Engineered a novel parent-child case mapping solution between gTech and T&S, achieving >95% accuracy and 100% adoption for all commerce case analysis, eliminating data silos.",
        industryStandards: ["Data Modeling", "Case Management"],
        skills: ["Problem Solving", "Execution Excellence"]
    },
    {
        role: "Tech Lead",
        project: "Commerce Policy DataSite",
        situation: "Policy teams lacked centralized insights.",
        complication: "Slow time-to-insight for policy decisions.",
        resolution: "Architected and launched centralized DataSite.",
        metricValue: "100%",
        metricName: "User Adoption",
        enhancedBullet: "Architected and launched the centralized Commerce Policy DataSite, achieving 100% user adoption and reducing time-to-insight by an estimated 5 hours/week per user.",
        industryStandards: ["Self-Service BI", "Knowledge Management"],
        skills: ["Execution Excellence", "Respect the User"]
    },
    {
        role: "Tech Lead",
        project: "P-Staff SLO Reporting",
        situation: "Manual and inaccurate SLO reporting for leadership.",
        complication: "40 hours/week wasted on manual processing.",
        resolution: "Designed automated data solution for P-Staff.",
        metricValue: "40 hrs/wk",
        metricName: "Manual Work Saved",
        enhancedBullet: "Designed and delivered an automated data solution for P-Staff SLO reporting, improving accuracy by 20% and eliminating 40 hours/week of manual data processing.",
        industryStandards: ["SLO Management", "Executive Reporting"],
        skills: ["Execution Excellence", "Problem Solving"]
    },
    {
        role: "Tech Lead",
        project: "gTech Operations Dashboard",
        situation: "gAE Policy team lacked operational visibility.",
        complication: "Inefficient manual tracking of operational metrics.",
        resolution: "Developed and launched gTech Operations Dashboard.",
        metricValue: "100%",
        metricName: "Adoption",
        enhancedBullet: "Developed and launched the gTech Operations Dashboard, achieving 100% adoption within gAE Policy and saving each user 3-5 hours per week on data tasks.",
        industryStandards: ["Operational Analytics", "Dashboarding"],
        skills: ["Execution Excellence", "Respect the User"]
    },
    {
        role: "Tech Lead",
        project: "AI-Enhanced Reporting Tool",
        situation: "Manual period-over-period analysis was slow.",
        complication: "20-hour reporting tasks delayed insights.",
        resolution: "Architected AI-enhanced automation tool.",
        metricValue: "5 min",
        metricName: "Latency",
        enhancedBullet: "Architected and launched an AI-enhanced reporting tool, automating analysis to reduce a 20-hour manual task to under 5 minutes for hundreds of gTech users.",
        industryStandards: ["AI Automation", "Reporting Efficiency"],
        skills: ["Innovation", "Problem Solving"]
    },
    {
        role: "Tech Lead",
        project: "Internal Keyword Theming Tool (IKTT)",
        situation: "Inefficient manual keyword theming by vendors.",
        complication: "High vendor costs and slow throughput.",
        resolution: "Created IKTT using Google Ads API.",
        metricValue: "20,000 hrs",
        metricName: "Saved Annually",
        enhancedBullet: "Created the Internal Keyword Theming Tool (IKTT) using Google Ads API, published to Marketplace, with potential to save 20,000 vendor hours annually.",
        industryStandards: ["API Automation", "Vendor Efficiency"],
        skills: ["Innovation", "Execution Excellence"]
    },
    {
        role: "Tech Lead",
        project: "SlideSense App",
        situation: "Manual collateral assessment was inconsistent.",
        complication: "Lack of standardized quality checks.",
        resolution: "Led dev of SlideSense Apps Script web app.",
        metricValue: "100%",
        metricName: "Strategy & UI/UX",
        enhancedBullet: "Led development of SlideSense, an Apps Script web app for collateral assessment, owning full stack strategy from UI/UX to testing and deployment.",
        industryStandards: ["Tooling", "QA Automation"],
        skills: ["Innovation", "Execution Excellence"]
    },
    {
        role: "Tech Lead",
        project: "PMOS V2 Pipeline Overhaul",
        situation: "Significant data loss in PMOS pipelines.",
        complication: "20% data loss and wasted FTE time.",
        resolution: "Overhauled data pipelines to resolve loss.",
        metricValue: "20%",
        metricName: "Loss Resolved",
        enhancedBullet: "Overhauled PMOS V2 data pipelines, resolving 20% data loss issues and reducing related FTE manual data tasks by 15-20%.",
        industryStandards: ["Data Engineering", "Pipeline Reliability"],
        skills: ["Problem Solving", "Technical Resilience"]
    },
    {
        role: "Tech Lead",
        project: "YouTube Content Quality (YTCQ)",
        situation: "YTCQ lacked authoritative data source.",
        complication: "Inconsistent metrics for content quality.",
        resolution: "Delivered dedicated DataSite and mapping solutions.",
        metricValue: "100%",
        metricName: "Adoption",
        enhancedBullet: "Established gAE Policy team as the data authority for YouTube Content Quality (YTCQ), delivering a dedicated DataSite that drove full adoption by the operations team.",
        industryStandards: ["Data Authority", "Content Quality"],
        skills: ["Cross-Functional Leadership", "Influence"]
    },
    {
        role: "Tech Lead",
        project: "Merchant Revenue Pipeline",
        situation: "Suspension appeals lacked revenue context.",
        complication: "Hard to prioritize high-impact cases.",
        resolution: "Implemented pipeline to quantify revenue impact.",
        metricValue: "100%",
        metricName: "Revenue Coverage",
        enhancedBullet: "Implemented a data pipeline quantifying merchant revenue impact, enabling 100% of shopping-related appeals to include revenue data and strengthening influence on product roadmaps.",
        industryStandards: ["Revenue Operations", "Decision Support"],
        skills: ["Strategic Vision", "Business Acumen"]
    }
];

export default function BuilderPage() {
    const [entries, setEntries] = useState<any[]>([]);
    const [activeTab, setActiveTab] = useState('list'); // Default to list view
    const [isAnalyzing, setIsAnalyzing] = useState(false);
    const [formData, setFormData] = useState({
        role: 'Tech Lead', project: '', situation: '', complication: '', resolution: '', metricName: '', metricValue: ''
    });
    const [analysisResult, setAnalysisResult] = useState<any>(null);

    // AUTO-LOAD LOGIC
    useEffect(() => {
        const saved = localStorage.getItem('jwm_resume_entries');
        if (saved && JSON.parse(saved).length > 0) {
            setEntries(JSON.parse(saved));
        } else {
            // First time visit? Load the 33 defaults automatically.
            const defaultsWithIds = INITIAL_PORTFOLIO.map((item, idx) => ({
                ...item,
                id: Date.now() + idx
            }));
            setEntries(defaultsWithIds);
            localStorage.setItem('jwm_resume_entries', JSON.stringify(defaultsWithIds));
        }
    }, []);

    // Sync state changes to storage
    useEffect(() => {
        if (entries.length > 0) {
            localStorage.setItem('jwm_resume_entries', JSON.stringify(entries));
        }
    }, [entries]);

    const handleInputChange = (e: any) => {
        setFormData(prev => ({ ...prev, [e.target.name]: e.target.value }));
    };

    const handleAnalyze = async () => {
        if (!formData.project) return alert("Enter a project name.");
        setIsAnalyzing(true);
        try {
            const res = await fetch('/api/enhance-bullet', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(formData)
            });
            const data = await res.json();
            setAnalysisResult(data);
        } catch (e) {
            alert("AI Error. Check connection.");
        } finally {
            setIsAnalyzing(false);
        }
    };

    const handleSave = () => {
        if (!analysisResult) return;
        const newEntry = { ...formData, ...analysisResult, id: Date.now() };
        setEntries(prev => [newEntry, ...prev]);
        setAnalysisResult(null);
        setFormData({ role: 'Tech Lead', project: '', situation: '', complication: '', resolution: '', metricName: '', metricValue: '' });
        setActiveTab('list');
    };

    const handleDelete = (id: number) => {
        if (confirm("Delete this entry?")) {
            setEntries(prev => prev.filter(e => e.id !== id));
        }
    };

    const handleResetToDefaults = () => {
        if(confirm("This will overwrite your current list with the original 33 items. Continue?")) {
            const defaultsWithIds = INITIAL_PORTFOLIO.map((item, idx) => ({
                ...item,
                id: Date.now() + idx
            }));
            setEntries(defaultsWithIds);
            localStorage.setItem('jwm_resume_entries', JSON.stringify(defaultsWithIds));
        }
    }

    const handleExport = () => {
        const blob = new Blob([JSON.stringify(entries, null, 2)], { type: "application/json" });
        const url = URL.createObjectURL(blob);
        const a = document.createElement("a");
        a.href = url;
        a.download = "master_resume_data.json";
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
    };

    return (
        <div className="min-h-screen bg-slate-50 text-slate-900 font-sans">
            {/* HEADER */}
            <header className="bg-white border-b border-slate-200 sticky top-0 z-20 shadow-sm">
                <div className="max-w-6xl mx-auto px-4 h-16 flex items-center justify-between">
                    <div className="flex items-center space-x-2">
                        <div className="bg-indigo-600 p-2 rounded-lg">
                            <LucideIcon name="Target" className="text-white" size={24} />
                        </div>
                        <h1 className="text-xl font-bold tracking-tight">Resume Impact Architect</h1>
                    </div>
                    <div className="flex space-x-2">
                         <button onClick={() => setActiveTab('form')} className={`px-4 py-2 rounded text-sm font-bold ${activeTab === 'form' ? 'bg-indigo-100 text-indigo-700' : 'text-slate-600'}`}>Draft New</button>
                         <button onClick={() => setActiveTab('list')} className={`px-4 py-2 rounded text-sm font-bold ${activeTab === 'list' ? 'bg-indigo-100 text-indigo-700' : 'text-slate-600'}`}>Library ({entries.length})</button>
                    </div>
                    <div className="flex space-x-2">
                        <button onClick={handleResetToDefaults} className="px-3 py-2 bg-slate-200 hover:bg-slate-300 rounded text-xs font-bold uppercase">Reset</button>
                        <button onClick={handleExport} className="px-3 py-2 bg-green-600 hover:bg-green-700 text-white rounded text-xs font-bold uppercase flex items-center gap-1">
                            <LucideIcon name="Save" size={14} /> Export JSON
                        </button>
                    </div>
                </div>
            </header>

            <main className="max-w-6xl mx-auto px-4 py-8">
                {activeTab === 'form' && (
                    <div className="flex flex-col lg:flex-row gap-8">
                        {/* FORM */}
                        <div className="flex-1 bg-white p-6 rounded-xl shadow-sm border border-slate-200">
                            <h2 className="text-lg font-bold mb-4">1. Raw Context</h2>
                            <div className="space-y-4">
                                <div className="grid grid-cols-2 gap-4">
                                    <select name="role" value={formData.role} onChange={handleInputChange} className="border p-2 rounded bg-slate-50">
                                        <option>Tech Lead</option><option>Data Scientist</option><option>Internal Founder</option><option>Creative Tech</option><option>Strategist</option>
                                    </select>
                                    <input name="project" value={formData.project} onChange={handleInputChange} placeholder="Project Name" className="border p-2 rounded" />
                                </div>
                                <input name="situation" value={formData.situation} onChange={handleInputChange} placeholder="Situation" className="w-full border p-2 rounded" />
                                <input name="complication" value={formData.complication} onChange={handleInputChange} placeholder="Complication (The Pain)" className="w-full border p-2 rounded border-red-200 bg-red-50" />
                                <textarea name="resolution" value={formData.resolution} onChange={handleInputChange} placeholder="Resolution (The Action)" className="w-full border p-2 rounded border-green-200 bg-green-50 h-24" />
                                <div className="grid grid-cols-2 gap-4">
                                    <input name="metricValue" value={formData.metricValue} onChange={handleInputChange} placeholder="Metric Value (e.g. 40%)" className="border p-2 rounded" />
                                    <input name="metricName" value={formData.metricName} onChange={handleInputChange} placeholder="Metric Name" className="border p-2 rounded" />
                                </div>
                                <button onClick={handleAnalyze} disabled={isAnalyzing} className="w-full py-4 bg-indigo-600 text-white font-bold rounded-xl hover:bg-indigo-700 transition-colors">
                                    {isAnalyzing ? "Analyzing..." : "Analyze with Gemini"}
                                </button>
                            </div>
                        </div>

                        {/* RESULT */}
                        <div className="flex-1">
                            {analysisResult && (
                                <div className="bg-white rounded-xl shadow-lg border border-indigo-200 overflow-hidden">
                                    <div className="bg-indigo-600 p-4 text-white font-bold">Strategy Found</div>
                                    <div className="p-6 space-y-4">
                                        <div>
                                            <label className="text-xs font-bold text-slate-400 uppercase">Enhanced Bullet</label>
                                            <p className="text-lg font-medium text-slate-900 bg-indigo-50 p-4 rounded border border-indigo-100">{analysisResult.enhancedBullet}</p>
                                        </div>
                                        <div className="grid grid-cols-2 gap-4">
                                            <div>
                                                <label className="text-xs font-bold text-slate-400 uppercase">Standards</label>
                                                <div className="flex flex-wrap gap-1">
                                                    {analysisResult.industryStandards?.map((s: string, i: number) => <span key={i} className="text-xs bg-slate-100 px-2 py-1 rounded">{s}</span>)}
                                                </div>
                                            </div>
                                            <div>
                                                <label className="text-xs font-bold text-slate-400 uppercase">Market Context</label>
                                                <p className="text-sm text-slate-600">{analysisResult.marketContext}</p>
                                            </div>
                                        </div>
                                        <button onClick={handleSave} className="w-full py-3 bg-slate-900 text-white rounded font-bold hover:bg-black">Save to Library</button>
                                    </div>
                                </div>
                            )}
                        </div>
                    </div>
                )}

                {activeTab === 'list' && (
                    <div className="grid gap-4">
                        {entries.map((e: any) => (
                            <div key={e.id} className="bg-white p-6 rounded-xl shadow-sm border border-slate-200 flex justify-between group">
                                <div className="flex-1 pr-6">
                                    <div className="flex items-center gap-2 mb-2">
                                        <span className="text-xs font-bold bg-indigo-50 text-indigo-700 px-2 py-1 rounded uppercase tracking-wide">{e.role}</span>
                                        <span className="text-xs text-slate-400 font-mono"> // {e.project}</span>
                                    </div>
                                    <p className="text-lg font-medium text-slate-800 leading-relaxed mb-3">{e.enhancedBullet}</p>
                                    
                                    <div className="flex flex-wrap gap-3 items-center">
                                         {e.metricValue && (
                                            <div className="inline-flex items-center bg-green-50 border border-green-200 text-green-800 text-xs font-bold px-3 py-1 rounded-full">
                                                <LucideIcon name="BarChart3" size={14} className="mr-2 text-green-600" />
                                                {e.metricValue} {e.metricName}
                                            </div>
                                         )}
                                         <div className="flex gap-1">
                                            {e.industryStandards?.map((std: string, i: number) => (
                                                <span key={i} className="text-[10px] bg-slate-100 px-2 py-1 rounded text-slate-500 border border-slate-200">{std}</span>
                                            ))}
                                         </div>
                                    </div>
                                </div>
                                <button onClick={() => handleDelete(e.id)} className="text-slate-300 hover:text-red-500 self-start p-2"><LucideIcon name="Trash2" size={20}/></button>
                            </div>
                        ))}
                    </div>
                )}
            </main>
        </div>
    );
}
</file>

<file path="app/components/builder/Icons.tsx">
import React from 'react';

export const ICONS: any = {
    Plus: (props: any) => <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>,
    Save: (props: any) => <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path><polyline points="17 21 17 13 7 13 7 21"></polyline><polyline points="7 3 7 8 15 8"></polyline></svg>,
    Trash2: (props: any) => <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line></svg>,
    Search: (props: any) => <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>,
    Zap: (props: any) => <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon></svg>,
    BookOpen: (props: any) => <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path></svg>,
    Target: (props: any) => <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><circle cx="12" cy="12" r="10"></circle><circle cx="12" cy="12" r="6"></circle><circle cx="12" cy="12" r="2"></circle></svg>,
    BarChart3: (props: any) => <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><line x1="12" y1="20" x2="12" y2="10"></line><line x1="18" y1="20" x2="18" y2="4"></line><line x1="6" y1="20" x2="6" y2="16"></line></svg>,
    ShieldCheck: (props: any) => <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path><path d="m9 12 2 2 4-4"></path></svg>,
    BrainCircuit: (props: any) => <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M9.5 2A2.5 2.5 0 0 0 7 4.5v1.6a9 9 0 0 0-4.2 2 2 2 0 0 0-.1 3.5v2.8a2 2 0 0 0 1.2 1.8 9 9 0 0 0 5.6 2.5v1.8a2.5 2.5 0 0 0 5 0v-1.8a9 9 0 0 0 5.6-2.5 2 2 0 0 0 1.2-1.8v-2.8a2 2 0 0 0-.1-3.5 9 9 0 0 0-4.2-2V4.5A2.5 2.5 0 0 0 14.5 2h-5Z"/><path d="M12 13v9"/><path d="M12 2v2"/><path d="M2 11h2"/><path d="M20 11h2"/></svg>,
    Rocket: (props: any) => <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z"></path><path d="m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z"></path><path d="M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0"></path><path d="M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5"></path></svg>,
    Sparkles: (props: any) => <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"/></svg>,
    AlertTriangle: (props: any) => <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>,
    Star: (props: any) => <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>
};

export const LucideIcon = ({ name, size = 20, className = "" }: any) => {
    const IconComponent = ICONS[name];
    if (!IconComponent) return null;
    return <IconComponent width={size} height={size} className={className} />;
};
</file>

<file path="app/components/CinematicIntro.tsx">
"use client";
import React, { useEffect, useRef, useState, useCallback } from 'react';

interface Props {
  onComplete: () => void;
  context: any;
}

declare global {
    interface Window {
        THREE: any;
        SimplexNoise: any;
    }
}

export default function CinematicIntro({ onComplete, context }: Props) {
    const rootRef = useRef<HTMLDivElement>(null);
    const [isResolved, setIsResolved] = useState(false);

    const runCleanup = useCallback(() => {
        if (!isResolved) {
            setIsResolved(true);
            setTimeout(onComplete, 500); 
        }
    }, [onComplete, isResolved]);

    useEffect(() => {
        if (!rootRef.current || typeof window.THREE === 'undefined' || typeof window.SimplexNoise === 'undefined') {
             const fallback = setTimeout(runCleanup, 1000); 
             return () => clearTimeout(fallback);
        }

        const { THREE, SimplexNoise } = window;
        const runCleanupExternal = runCleanup;
        const simplex = new SimplexNoise(); 

        // 1. Helper: Circular Texture
        const createCircleTexture = () => {
            const canvas = document.createElement('canvas');
            canvas.width = 32;
            canvas.height = 32;
            const ctx = canvas.getContext('2d');
            if (ctx) {
                ctx.beginPath();
                ctx.arc(16, 16, 14, 0, 2 * Math.PI);
                ctx.fillStyle = '#ffffff';
                ctx.fill();
            }
            return new THREE.CanvasTexture(canvas);
        };

        // 2. Helper: Curl Noise Physics
        const computeCurl = (x: number, y: number, z: number, target: any) => {
            const eps = 0.1;
            const n1 = simplex.noise3D(x, y + eps, z);
            const n2 = simplex.noise3D(x, y - eps, z);
            const n3 = simplex.noise3D(x, y, z + eps);
            const n4 = simplex.noise3D(x, y, z - eps);
            const n5 = simplex.noise3D(x + eps, y, z);
            const n6 = simplex.noise3D(x - eps, y, z);
            target.x = (n3 - n4) / (2 * eps);
            target.y = (n5 - n6) / (2 * eps);
            target.z = (n1 - n2) / (2 * eps);
        };

        const cinematicContainer = document.getElementById('cinematic-root');
        const canvasContainer = document.getElementById('canvas-container');
        
        // --- TIMING CONFIGURATION (60s Total) ---
        const START_DELAY = 1.0;
        const TIME_UNIVERSE = 0.0 + START_DELAY;
        const TIME_SPHERE   = 12.0 + START_DELAY; 
        const TIME_TORUS    = 28.0 + START_DELAY; 
        const TIME_BRAIN    = 47.0 + START_DELAY; 
        const TIME_BURST    = 58.0 + START_DELAY; 

        const scene = new THREE.Scene();
        scene.fog = new THREE.FogExp2(0x000000, 0.002);
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.z = 80; 
        const renderer = new THREE.WebGLRenderer({ antialias: false, powerPreference: "high-performance" });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
        
        if (canvasContainer && canvasContainer.children.length === 0) {
            canvasContainer.appendChild(renderer.domElement);
        }

        // --- MOUSE PHYSICS ---
        const mouse = new THREE.Vector3(9999, 9999, 0); 
        const mouseScreen = new THREE.Vector2(0, 0);
        const raycaster = new THREE.Raycaster();
        const plane = new THREE.Plane(new THREE.Vector3(0, 0, 1), 0); 
        
        const onMouseMove = (event: MouseEvent) => {
            mouseScreen.x = (event.clientX / window.innerWidth) * 2 - 1;
            mouseScreen.y = -(event.clientY / window.innerHeight) * 2 + 1;
            raycaster.setFromCamera(mouseScreen, camera);
            raycaster.ray.intersectPlane(plane, mouse);
        };
        window.addEventListener('mousemove', onMouseMove);
        
        // --- PARTICLE SYSTEM ---
        const PARTICLE_COUNT = 8000; 
        const geometry = new THREE.BufferGeometry();
        const positions = new Float32Array(PARTICLE_COUNT * 3);
        const colors = new Float32Array(PARTICLE_COUNT * 3);
        const burstDirections: Array<any> = []; 
        const tempVec = new THREE.Vector3(); 

        const targetSphere = new Float32Array(PARTICLE_COUNT * 3);
        const targetTorus  = new Float32Array(PARTICLE_COUNT * 3);
        const targetBrain  = new Float32Array(PARTICLE_COUNT * 3);

        for (let i = 0; i < PARTICLE_COUNT; i++) {
            const i3 = i * 3;

            // 1. INITIAL: GALAXY SPIRAL
            const spiralRadius = 10 + Math.random() * 60; 
            const spiralAngle = i * 0.1 + (spiralRadius * 0.05); 
            const armOffset = (i % 3) * (Math.PI * 2 / 3); 
            
            positions[i3]   = Math.cos(spiralAngle + armOffset) * spiralRadius;
            positions[i3+1] = Math.sin(spiralAngle + armOffset) * spiralRadius;
            positions[i3+2] = (Math.random() - 0.5) * 15; 

            // 2. SPHERE
            const u = Math.random();
            const v = Math.random();
            const theta = 2 * Math.PI * u;
            const phi = Math.acos(2 * v - 1);
            const rSphere = 30 + Math.random() * 2;
            targetSphere[i3]   = rSphere * Math.sin(phi) * Math.cos(theta);
            targetSphere[i3+1] = rSphere * Math.sin(phi) * Math.sin(theta);
            targetSphere[i3+2] = rSphere * Math.cos(phi);

            // 3. TORUS
            const tU = Math.random() * Math.PI * 2;
            const tV = Math.random() * Math.PI * 2;
            const tubeRadius = 8 + Math.random() * 3;
            const ringRadius = 25;
            targetTorus[i3]   = (ringRadius + tubeRadius * Math.cos(tV)) * Math.cos(tU);
            targetTorus[i3+1] = (ringRadius + tubeRadius * Math.cos(tV)) * Math.sin(tU);
            targetTorus[i3+2] = tubeRadius * Math.sin(tV);

            // 4. BRAIN
            let rBrain = 20 + Math.random() * 2; 
            let bX = rBrain * Math.sin(phi) * Math.cos(theta);
            let bY = rBrain * Math.sin(phi) * Math.sin(theta);
            let bZ = rBrain * Math.cos(phi);
            bY *= 0.8; bZ *= 1.2; 
            if (bX > 0) bX += 1.5; else bX -= 1.5;

            const noise = simplex.noise3D(bX * 0.15, bY * 0.15, bZ * 0.15);
            const extrusion = 1 + noise * 0.3; 
            targetBrain[i3]   = bX * extrusion;
            targetBrain[i3+1] = bY * extrusion;
            targetBrain[i3+2] = bZ * extrusion;

            burstDirections.push(new THREE.Vector3(Math.random() - 0.5, Math.random() - 0.5, Math.random() - 0.5).normalize());
            colors[i3] = 0.1; colors[i3+1] = 0.6; colors[i3+2] = 0.9; 
        }

        geometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));
        geometry.setAttribute('color', new THREE.BufferAttribute(colors, 3));

        const circleMap = createCircleTexture();

        const material = new THREE.PointsMaterial({ 
            size: 0.5, 
            map: circleMap, 
            vertexColors: true, 
            blending: THREE.AdditiveBlending, 
            depthWrite: false, 
            transparent: true, 
            alphaTest: 0.05,
            opacity: 0.0 
        });
        const points = new THREE.Points(geometry, material);
        scene.add(points);

        // --- NARRATIVE SCRIPT EXECUTION ---
        const narrativeElement = document.getElementById('narrative-text');
        const flashOverlay = document.getElementById('flash-overlay');
        const cinematicUiLayer = document.getElementById('cinematic-ui-layer');
        
        function hslToRgb(h: number, s: number, l: number): number[] {
            let r, g, b;
            if (s === 0) { r = g = b = l; } else {
                const hue2rgb = (p: number, q: number, t: number): number => { if (t < 0) t += 1; if (t > 1) t -= 1; if (t < 1 / 6) return p + (q - p) * 6 * t; if (t < 1 / 2) return q; if (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6; return p; };
                const q = l < 0.5 ? l * (1 + s) : l + s - l * s;
                const p = 2 * l - q;
                r = hue2rgb(p, q, h + 1 / 3); g = hue2rgb(p, q, h); b = hue2rgb(p, q, h - 1 / 3);
            }
            return [r, g, b];
        }

        // Updated Script: 10 Lines, Technical & Intriguing
        const cinematicScript = [
            [1.5, "Welcome."],
            [6.0, "This page is being built in real-time."],
            [11.0, "Right now, a network of AI agents is exploring."],
            [17.0, "They are scanning the web for context."],
            [23.0, "Curating the most relevant data for this moment."],
            [29.0, "And assembling a dynamic portfolio from scratch."],
            [35.0, "No static templates, just live creation."],
            [41.0, "Watch as the structure takes shape."],
            [47.0, "Your unique experience is ready."],
            [53.0, "Welcome."]
        ];

        let lastNarrativeIndex = -1;

        function updateNarrative(time: number) {
            let currentMessage = "";
            let currentMessageIndex = -1;
            for (let i = cinematicScript.length - 1; i >= 0; i--) {
                if (time >= (cinematicScript[i][0] as number)) { 
                    currentMessage = cinematicScript[i][1] as string; 
                    currentMessageIndex = i; 
                    break; 
                }
            }
            
            if (currentMessageIndex !== lastNarrativeIndex) {
                lastNarrativeIndex = currentMessageIndex;
                
                // Check for final exit
                if (time >= (TIME_BURST - 1.0)) { 
                    if(cinematicUiLayer) cinematicUiLayer.style.opacity = '0'; 
                }
                
                if (narrativeElement) {
                    // 1. Fade Out
                    narrativeElement.style.opacity = '0';
                    
                    // 2. Wait for CSS transition (500ms) then Swap Text
                    setTimeout(() => {
                        narrativeElement.innerText = currentMessage;
                        
                        // 3. Fade In only if we are still within the sequence
                        if (currentMessage && time < (TIME_BURST - 1.0)) {
                            requestAnimationFrame(() => {
                                narrativeElement.style.opacity = '1';
                            });
                        }
                    }, 500); // Matches CSS transition time exactly
                }
            }
        }
        
        const clock = new THREE.Clock();
        let rafId: number | null = null; 

        setTimeout(() => {
            clock.start();
            updateNarrative(0);
            animate(); 
        }, START_DELAY * 1000);

        const animate = () => { 
            rafId = requestAnimationFrame(animate);
            const time = clock.getElapsedTime() + (clock.running ? START_DELAY : 0);
            if (clock.running) updateNarrative(time);
            
            const positionsArr = geometry.attributes.position.array;
            const colorsArr = geometry.attributes.color.array;

            let phase = 'UNIVERSE';
            if (time >= TIME_BURST) phase = 'BURST';
            else if (time >= TIME_BRAIN) phase = 'BRAIN';
            else if (time >= TIME_TORUS) phase = 'TORUS';
            else if (time >= TIME_SPHERE) phase = 'SPHERE';

            if (phase === 'BURST') {
                 if(flashOverlay && flashOverlay.style.opacity !== '1') {
                    if(cinematicUiLayer) cinematicUiLayer.style.opacity = '0'; 
                    flashOverlay.style.opacity = '1';
                    setTimeout(() => { if(flashOverlay) flashOverlay.style.opacity = '0'; }, 800); 
                    setTimeout(() => { runCleanupExternal(); }, 2500); 
                 }
            }

            for (let i = 0; i < PARTICLE_COUNT; i++) {
                const i3 = i * 3;
                const pX = positionsArr[i3];
                const pY = positionsArr[i3+1];
                const pZ = positionsArr[i3+2];

                // --- MOUSE MAGNETISM ---
                if (phase !== 'BURST') {
                    const dx = mouse.x - pX;
                    const dy = mouse.y - pY;
                    const distSq = dx*dx + dy*dy;
                    if (distSq < 3600) { 
                        const force = (3600 - distSq) * 0.000005; 
                        positionsArr[i3] += dx * force;
                        positionsArr[i3+1] += dy * force;
                    }
                }
                
                if (phase === 'UNIVERSE') {
                    // SWARMING GALAXY 
                    const noiseScale = 0.01; 
                    computeCurl(pX * noiseScale, pY * noiseScale, pZ * noiseScale + time * 0.1, tempVec);
                    
                    positionsArr[i3] += tempVec.x * 0.2;
                    positionsArr[i3+1] += tempVec.y * 0.2;
                    positionsArr[i3+2] += tempVec.z * 0.2;

                    // Rotation
                    const rotSpeed = 0.001;
                    const x = positionsArr[i3];
                    const y = positionsArr[i3+1];
                    positionsArr[i3]   = x * Math.cos(rotSpeed) - y * Math.sin(rotSpeed);
                    positionsArr[i3+1] = x * Math.sin(rotSpeed) + y * Math.cos(rotSpeed);

                    colorsArr[i3] = 0.1; colorsArr[i3+1] = 0.2; colorsArr[i3+2] = 0.5;
                    material.opacity = Math.min(0.8, time * 0.2); 

                } else if (phase === 'BURST') {
                    const dir = burstDirections[i];
                    positionsArr[i3] += dir.x * 5.0;
                    positionsArr[i3+1] += dir.y * 5.0;
                    positionsArr[i3+2] += dir.z * 5.0;
                    
                    const hue = (i / PARTICLE_COUNT) + (time * 2.0); 
                    const [r, g, b] = hslToRgb(hue % 1, 1, 0.9); 
                    colorsArr[i3] = r; colorsArr[i3+1] = g; colorsArr[i3+2] = b;
                    material.opacity *= 0.90; 

                } else {
                    // --- MORPHING ---
                    let tX, tY, tZ;
                    let lerpFactor = 0.02; 
                    
                    if (phase === 'SPHERE') {
                        tX = targetSphere[i3]; tY = targetSphere[i3+1]; tZ = targetSphere[i3+2];
                        colorsArr[i3] = 0.1; colorsArr[i3+1] = 0.8; colorsArr[i3+2] = 0.9; 
                    } else if (phase === 'TORUS') {
                        tX = targetTorus[i3]; tY = targetTorus[i3+1]; tZ = targetTorus[i3+2];
                        colorsArr[i3] = 0.4; colorsArr[i3+1] = 0.2; colorsArr[i3+2] = 0.9; 
                        const cosR = Math.cos(time * 0.2); const sinR = Math.sin(time * 0.2);
                        const rotX = tX * cosR - tZ * sinR;
                        const rotZ = tX * sinR + tZ * cosR;
                        tX = rotX; tZ = rotZ;
                    } else { // BRAIN
                        tX = targetBrain[i3]; tY = targetBrain[i3+1]; tZ = targetBrain[i3+2];
                        colorsArr[i3] = 0.9; colorsArr[i3+1] = 0.2; colorsArr[i3+2] = 0.5; 
                        const morphScale = 1 + Math.sin(time * 3 + pY * 0.1) * 0.03;
                        tX *= morphScale; tY *= morphScale; tZ *= morphScale;
                        lerpFactor = 0.04;
                    }

                    positionsArr[i3] += (tX - pX) * lerpFactor;
                    positionsArr[i3+1] += (tY - pY) * lerpFactor;
                    positionsArr[i3+2] += (tZ - pZ) * lerpFactor;

                    const noiseScale = 0.015; 
                    computeCurl(pX * noiseScale, pY * noiseScale, pZ * noiseScale + time * 0.15, tempVec);
                    
                    const progress = Math.min(1, (time - TIME_SPHERE) / (TIME_BURST - TIME_SPHERE));
                    const curlInfluence = 0.5 * (1 - progress); 

                    positionsArr[i3] += tempVec.x * curlInfluence;
                    positionsArr[i3+1] += tempVec.y * curlInfluence;
                    positionsArr[i3+2] += tempVec.z * curlInfluence;
                    
                    material.opacity = 0.9;
                }
            }

            if (phase !== 'BURST') {
                // Camera Zoom
                let targetZ = 80;
                if (phase === 'SPHERE') targetZ = 60;
                if (phase === 'TORUS') targetZ = 50;
                if (phase === 'BRAIN') targetZ = 40; 
                camera.position.z += (targetZ - camera.position.z) * 0.01;
                
                if (phase === 'UNIVERSE') {
                     // Galaxy rotating internally
                } else {
                    points.rotation.y += 0.002; 
                }
            } else {
                points.rotation.y += 0.001;
            }

            geometry.attributes.position.needsUpdate = true;
            geometry.attributes.color.needsUpdate = true;
            renderer.render(scene, camera);
        };
        
        function onWindowResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        }

        window.addEventListener('resize', onWindowResize);
        
        return () => {
            if(rafId) cancelAnimationFrame(rafId);
            window.removeEventListener('resize', onWindowResize);
            window.removeEventListener('mousemove', onMouseMove);
        };
    }, [runCleanup]);

    return (
        <div id="cinematic-root" className="fixed inset-0 bg-black z-[100]" style={{ opacity: isResolved ? 0 : 1, transition: 'opacity 1.5s ease-out' }}>
            <div id="canvas-container" ref={rootRef} style={{ position: 'absolute', top: 0, left: 0, width: '100%', height: '100%', zIndex: 1 }}></div>
            <div id="flash-overlay"></div>
            <div id="cinematic-ui-layer" style={{
                position: 'absolute', top: 0, left: 0, width: '100%', height: '100%', zIndex: 2,
                pointerEvents: 'none', display: 'flex', justifyContent: 'center', alignItems: 'center'
            }}>
                <div id="cinematic-narrative" style={{
                    position: 'absolute', top: '50%', left: '50%', transform: 'translate(-50%, -50%)', zIndex: 4, 
                    color: 'white', textAlign: 'center', pointerEvents: 'none',
                    backgroundColor: 'transparent', backdropFilter: 'blur(4px)', 
                    padding: '20px', width: '100%', maxWidth: '80%', boxSizing: 'border-box',
                    transition: 'opacity 1s ease-out'
                }}>
                    <div id="narrative-text" style={{
                        opacity: 0, transition: 'opacity 0.5s ease-in-out',
                        textTransform: 'uppercase', fontWeight: 200, fontSize: 'clamp(24px, 5vw, 56px)',
                        letterSpacing: '4px', padding: '10px', lineHeight: '1.4', color: '#ffffff', 
                        textShadow: '0 0 20px rgba(0, 0, 0, 0.9), 0 0 5px rgba(0,0,0,1)'
                    }}></div>
                </div>
            </div>

            {/* SKIP BUTTON */}
            <button 
                onClick={runCleanup}
                className="absolute bottom-8 right-8 z-[200] text-[10px] md:text-xs font-bold text-white/50 hover:text-white border border-white/20 hover:border-white/50 px-4 py-2 rounded uppercase tracking-widest transition-all backdrop-blur-sm cursor-pointer pointer-events-auto"
            >
                Skip Sequence »
            </button>
        </div>
    );
}
</file>

<file path="app/components/ExecutiveOnePager.tsx">
import React, { forwardRef } from 'react';

export const ExecutiveOnePager = forwardRef(({ data }: { data: any }, ref: any) => {
  if (!data) return null;

  return (
    <div ref={ref} style={{
        position: 'fixed', top: '-9999px', left: '-9999px',
        width: '297mm', height: '210mm', // Landscape A4 (Presentation Style)
        display: 'grid', gridTemplateColumns: '30% 70%',
        fontFamily: 'Helvetica, Arial, sans-serif'
    }}>
      
      {/* SIDEBAR (Dark Blue) */}
      <div style={{ backgroundColor: '#0f172a', color: 'white', padding: '40px', display: 'flex', flexDirection: 'column' }}>
          
          {/* PROFILE IMAGE PLACEHOLDER (or actual image if we passed it) */}
          <div style={{ width: '100px', height: '100px', borderRadius: '50%', background: '#3b82f6', marginBottom: '30px', overflow: 'hidden', border: '3px solid white' }}>
             <img src="/profile.png" style={{ width: '100%', height: '100%', objectFit: 'cover' }} />
          </div>

          <h1 style={{ fontSize: '24pt', fontWeight: 'bold', margin: '0 0 10px 0', lineHeight: '1.1' }}>{data.fullName}</h1>
          <h2 style={{ fontSize: '14pt', color: '#94a3b8', margin: '0 0 40px 0', fontWeight: 'normal' }}>{data.title}</h2>

          <div style={{ marginBottom: '40px' }}>
              <h3 style={{ fontSize: '10pt', color: '#60a5fa', textTransform: 'uppercase', letterSpacing: '2px', borderBottom: '1px solid #1e293b', paddingBottom: '10px', marginBottom: '15px' }}>Contact</h3>
              <p style={{ fontSize: '10pt', marginBottom: '8px' }}>{data.contact}</p>
              <p style={{ fontSize: '10pt', color: '#94a3b8' }}>Generated: {new Date().toLocaleDateString()}</p>
          </div>

          <div>
              <h3 style={{ fontSize: '10pt', color: '#60a5fa', textTransform: 'uppercase', letterSpacing: '2px', borderBottom: '1px solid #1e293b', paddingBottom: '10px', marginBottom: '15px' }}>Core Competencies</h3>
              <div style={{ display: 'flex', flexWrap: 'wrap', gap: '8px' }}>
                  {data.skills.map((s: string, i: number) => (
                      <span key={i} style={{ fontSize: '9pt', background: 'rgba(255,255,255,0.1)', padding: '5px 10px', borderRadius: '4px' }}>{s}</span>
                  ))}
              </div>
          </div>
      </div>

      {/* MAIN CONTENT (White) */}
      <div style={{ backgroundColor: 'white', padding: '50px', color: '#334155' }}>
          
          {/* HEADER / STRATEGY HOOK */}
          <div style={{ marginBottom: '40px', background: '#f8fafc', padding: '20px', borderLeft: '4px solid #3b82f6' }}>
             <h3 style={{ fontSize: '12pt', fontWeight: 'bold', color: '#0f172a', marginBottom: '10px', textTransform: 'uppercase' }}>Executive Synthesis</h3>
             <p style={{ fontSize: '11pt', lineHeight: '1.6', margin: 0 }}>{data.summary}</p>
          </div>

          {/* EXPERIENCE */}
          <div>
              <h3 style={{ fontSize: '14pt', fontWeight: 'bold', color: '#0f172a', borderBottom: '2px solid #e2e8f0', paddingBottom: '10px', marginBottom: '25px' }}>Selected Experience</h3>
              
              {data.experience.slice(0, 3).map((exp: any, i: number) => (
                  <div key={i} style={{ marginBottom: '25px' }}>
                      <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'baseline', marginBottom: '5px' }}>
                          <span style={{ fontSize: '12pt', fontWeight: 'bold', color: '#1e293b' }}>{exp.title}</span>
                          <span style={{ fontSize: '10pt', color: '#64748b', fontWeight: 'bold' }}>{exp.company}</span>
                      </div>
                      <div style={{ fontSize: '9pt', color: '#94a3b8', marginBottom: '8px', fontStyle: 'italic' }}>{exp.date}</div>
                      <ul style={{ margin: 0, paddingLeft: '18px' }}>
                          {exp.bullets.map((b: string, j: number) => (
                              <li key={j} style={{ fontSize: '10pt', marginBottom: '4px', lineHeight: '1.4' }}>{b}</li>
                          ))}
                      </ul>
                  </div>
              ))}
          </div>

      </div>
    </div>
  );
});

ExecutiveOnePager.displayName = "ExecutiveOnePager";
</file>

<file path="app/components/ExecutiveProfile.tsx">
import React, { useState, useEffect } from 'react';
import { 
  Shield, Database, Globe, TrendingUp, CheckCircle2, 
  Map, Layout, Server, Zap, Activity, Target, Download, Brain, Rocket, Linkedin, ExternalLink, FileText
} from 'lucide-react';
import jsPDF from 'jspdf';
import { FULL_RESUME_DATA } from './brain/NeuralData';
import staticCache from '../data/live_cache.json';

export default function ExecutiveProfile() {
  const [isDownloadingLive, setIsDownloadingLive] = useState(false);
  const [isDownloadingResume, setIsDownloadingResume] = useState(false);
  const [liveData, setLiveData] = useState<any[]>([]);

  useEffect(() => {
      // 1. Load Static Data Immediately (Instant Load)
      if (Array.isArray(staticCache)) {
          setLiveData(staticCache); 
      }

      // 2. Attempt to Fetch Fresh Live Data (Hydration)
      fetch('/api/read-cache')
        .then(res => res.json())
        .then(data => {
            if (Array.isArray(data) && data.length > 0) {
                setLiveData(data);
            }
        })
        .catch(err => console.warn("Live profile data fetch failed", err));
  }, []);

  const COL_SIDEBAR = "#0f172a"; 
  const COL_TEXT_DARK = "#111827"; 
  const COL_TEXT_GRAY = "#4b5563";
  const COL_ACCENT = "#0d9488"; 
  const COL_LIVE_ACCENT = "#1e3a8a"; 
  const MARGIN_X = 85;
  const MAX_WIDTH = 110;

  // --- GENERATOR 1: LIVE BRIEFING (LIVE DATA ONLY) ---
  const downloadLiveBriefing = async () => {
      setIsDownloadingLive(true);
      const doc = new jsPDF();
      
      // Helper: Draw Sidebar (Repeated on every page)
      const drawSidebar = () => {
          const pageHeight = doc.internal.pageSize.getHeight();
          doc.setFillColor(COL_SIDEBAR);
          doc.rect(0, 0, 75, pageHeight, 'F');
          
          let sidebarY = 40;
          
          // Avatar Placeholder (Circle)
          doc.setFillColor(30, 41, 59);
          doc.circle(37.5, sidebarY, 15, 'F');
          doc.setFontSize(20);
          doc.setTextColor(255, 255, 255);
          doc.text("JM", 37.5, sidebarY + 2, { align: 'center' });
          
          sidebarY += 30;

          // Name & Title
          doc.setFont("helvetica", "bold");
          doc.setFontSize(16);
          const nameParts = FULL_RESUME_DATA.header.name.split(" ");
          doc.text(nameParts[0], 12, sidebarY);
          doc.text(nameParts.slice(1).join(" "), 12, sidebarY + 7);
          
          doc.setFont("helvetica", "normal");
          doc.setFontSize(9);
          doc.setTextColor(148, 163, 184); 
          const titleLines = doc.splitTextToSize(FULL_RESUME_DATA.header.title, 55);
          doc.text(titleLines, 12, sidebarY + 16);

          sidebarY += 30;
          
          // Competencies Section
          const addSection = (title: string, items: any) => {
              doc.setFont("helvetica", "bold");
              doc.setFontSize(8);
              doc.setTextColor(13, 148, 136); // Explicit RGB (#0d9488)
              doc.text(title, 12, sidebarY);
              sidebarY += 6;
              doc.setFont("helvetica", "normal");
              doc.setFontSize(8);
              doc.setTextColor(220, 220, 220);
              
              if (Array.isArray(items)) {
                 items.forEach(item => { 
                     doc.text(`• ${item}`, 12, sidebarY); 
                     sidebarY += 5; 
                 });
              } else {
                 Object.entries(items).forEach(([k, v]: any) => {
                    doc.setFont("helvetica", "bold");
                    doc.text(k, 12, sidebarY);
                    sidebarY += 4;
                    doc.setFont("helvetica", "normal");
                    const lines = doc.splitTextToSize(v, 50);
                    doc.text(lines, 12, sidebarY);
                    sidebarY += (lines.length * 3.5) + 4;
                 });
              }
              sidebarY += 8;
          };

          addSection("CONTACT", FULL_RESUME_DATA.header.contact);
          addSection("CORE COMPETENCIES", FULL_RESUME_DATA.core_competencies);
      };

      drawSidebar();

      let cursorY = 20;

      // HEADER: LIVE CONTEXT
      if (liveData.length > 0) {
          doc.setTextColor(30, 58, 138); 
          doc.setFont("helvetica", "bold");
          doc.setFontSize(12);
          doc.text("LIVE STRATEGIC BRIEFING", MARGIN_X, cursorY);
          
          doc.setFontSize(8);
          doc.setTextColor(100);
          const genDate = new Date().toLocaleDateString();
          doc.text(`Generated: ${genDate}`, MARGIN_X + MAX_WIDTH, cursorY, { align: 'right' });
          
          cursorY += 8;
          
          // INTRO NARRATIVE
          doc.setFont("helvetica", "italic");
          doc.setFontSize(9);
          doc.setTextColor(80);
          const introText = "This document represents a real-time analysis of global market signals. An AI Agent has scanned 30+ live news sources and mapped them to specific capabilities in my portfolio to demonstrate immediate relevance.";
          const introLines = doc.splitTextToSize(introText, MAX_WIDTH);
          doc.text(introLines, MARGIN_X, cursorY);
          
          cursorY += (introLines.length * 4.5) + 10;

          // LOOP THROUGH LIVE SIGNALS
          liveData.forEach((signal, index) => {
              // --- SMART PAGINATION CHECK ---
              // Estimate block height (Headline + Context + Solution) approx 50-60mm
              // If cursor is beyond 230mm (A4 is 297mm), push to next page to avoid cuts.
              if (cursorY > 230) { 
                  doc.addPage(); 
                  drawSidebar(); 
                  cursorY = 20; 
              } 

              // Divider
              doc.setDrawColor(220);
              doc.setLineWidth(0.5);
              doc.line(MARGIN_X, cursorY, MARGIN_X + MAX_WIDTH, cursorY);
              cursorY += 6;

              // 1. HEADLINE 
              doc.setTextColor(17, 24, 39); 
              doc.setFont("helvetica", "bold");
              doc.setFontSize(10);
              const titleLines = doc.splitTextToSize(signal.headline.title, MAX_WIDTH); 
              doc.text(titleLines, MARGIN_X, cursorY);
              cursorY += (titleLines.length * 5);

              // 2. SOURCE DATE
              doc.setFont("helvetica", "bold");
              doc.setFontSize(8);
              if (signal.context.date) {
                  const isToday = signal.context.date.includes("TODAY");
                  if (isToday) {
                      doc.setTextColor(220, 38, 38); // Red
                  } else {
                      doc.setTextColor(100, 100, 100); // Gray
                  }
                  doc.text(signal.context.date.toUpperCase(), MARGIN_X, cursorY);
                  
                  // Source Link (If valid)
                  const sourceUrl = signal.context.sources[0]?.url;
                  if (sourceUrl && !sourceUrl.includes("example.com")) {
                       doc.setTextColor(37, 99, 235);
                       doc.textWithLink(`  [SOURCE LINK]`, MARGIN_X + 30, cursorY, { url: sourceUrl });
                  }
                  cursorY += 6;
              }

              // 3. CONTEXT
              doc.setFont("helvetica", "normal");
              doc.setFontSize(9);
              doc.setTextColor(75, 85, 99);
              const contextLines = doc.splitTextToSize(signal.context.description, MAX_WIDTH);
              doc.text(contextLines, MARGIN_X, cursorY);
              cursorY += (contextLines.length * 4.5) + 5;
              
              // 4. MY SOLUTION (Accent Block)
              const actionLines = doc.splitTextToSize(signal.experience.action, MAX_WIDTH - 5);
              const blockHeight = (actionLines.length * 4.5) + 8;
              
              // Accent Bar
              doc.setDrawColor(30, 58, 138); 
              doc.setLineWidth(1.5);
              doc.line(MARGIN_X, cursorY, MARGIN_X, cursorY + blockHeight);

              // Label
              doc.setFont("helvetica", "bold");
              doc.setFontSize(8);
              doc.setTextColor(30, 58, 138); 
              doc.text("STRATEGIC RESPONSE:", MARGIN_X + 4, cursorY + 3);

              // Content
              doc.setFont("helvetica", "normal");
              doc.setFontSize(9);
              doc.setTextColor(17, 24, 39); 
              doc.text(actionLines, MARGIN_X + 4, cursorY + 8); 
              
              // Result
              const resY = cursorY + 8 + (actionLines.length * 4.5);
              doc.setFont("helvetica", "bold");
              doc.setFontSize(8);
              doc.setTextColor(16, 185, 129); // Green
              doc.text(`IMPACT: ${signal.experience.result}`, MARGIN_X + 4, resY);

              cursorY += blockHeight + 10; // Spacing before next item
          });
      }

      doc.save("Jonathan_Marino_Live_Briefing.pdf");
      setIsDownloadingLive(false);
  };

  // --- GENERATOR 2: FULL RESUME (STATIC DATA ONLY) ---
  const downloadResume = async () => {
      setIsDownloadingResume(true);
      const doc = new jsPDF();
      const SIDEBAR_WIDTH = 75;
      const MAIN_X = 85;
      const MAIN_WIDTH = 110;

      // Sidebar Logic (Same as Live, but scoped here to be safe)
      const drawSidebar = () => {
          const pageHeight = doc.internal.pageSize.getHeight();
          doc.setFillColor(15, 23, 42); 
          doc.rect(0, 0, SIDEBAR_WIDTH, pageHeight, 'F');
          
          let sidebarY = 40;
          doc.setTextColor(255, 255, 255);
          doc.setFont("helvetica", "bold");
          doc.setFontSize(18);
          const nameParts = FULL_RESUME_DATA.header.name.split(" ");
          doc.text(nameParts[0], 12, sidebarY);
          doc.text(nameParts.slice(1).join(" "), 12, sidebarY + 8);
          
          doc.setFont("helvetica", "normal");
          doc.setFontSize(9);
          doc.setTextColor(148, 163, 184); 
          const titleLines = doc.splitTextToSize(FULL_RESUME_DATA.header.title, 55);
          doc.text(titleLines, 12, sidebarY + 16);

          sidebarY += 35;
          
          const addSection = (title: string, items: any) => {
              doc.setFont("helvetica", "bold");
              doc.setFontSize(8);
              doc.setTextColor(13, 148, 136); 
              doc.text(title, 12, sidebarY);
              sidebarY += 6;
              doc.setFont("helvetica", "normal");
              doc.setFontSize(8);
              doc.setTextColor(220, 220, 220);
              
              if (Array.isArray(items)) {
                 items.forEach(item => { 
                    doc.text(`• ${item}`, 12, sidebarY); 
                    sidebarY += 5; 
                 });
              } else {
                 Object.entries(items).forEach(([k, v]: any) => {
                    doc.setFont("helvetica", "bold"); doc.text(k, 12, sidebarY); sidebarY += 4;
                    doc.setFont("helvetica", "normal"); const lines = doc.splitTextToSize(v, 50);
                    doc.text(lines, 12, sidebarY); sidebarY += (lines.length * 3.5) + 4;
                 });
              }
              sidebarY += 8;
          };

          addSection("CONTACT", FULL_RESUME_DATA.header.contact);
          addSection("COMPETENCIES", FULL_RESUME_DATA.core_competencies);
      };

      drawSidebar();
      let cursorY = 20;

      // EXECUTIVE SUMMARY
      doc.setTextColor(17, 24, 39); 
      doc.setFont("helvetica", "bold"); doc.setFontSize(12); doc.text("EXECUTIVE SUMMARY", MAIN_X, cursorY);
      cursorY += 6; 
      doc.setFont("helvetica", "normal"); doc.setFontSize(9); doc.setTextColor(75, 85, 99); 
      const vpLines = doc.splitTextToSize(FULL_RESUME_DATA.summary, MAIN_WIDTH);
      doc.text(vpLines, MAIN_X, cursorY);
      cursorY += (vpLines.length * 4.5) + 10;

      // EXPERIENCE
      doc.setTextColor(17, 24, 39); 
      doc.setFont("helvetica", "bold"); doc.setFontSize(12); doc.text("PROFESSIONAL EXPERIENCE", MAIN_X, cursorY);
      cursorY += 10;

      FULL_RESUME_DATA.experience.forEach((companyBlock) => {
          companyBlock.roles.forEach((role) => {
              // PAGINATION CHECK
              // Estimating role block size. If we are low on page, force break.
              if (cursorY > 220) { 
                  doc.addPage(); 
                  drawSidebar(); 
                  cursorY = 20; 
              }

              doc.setTextColor(0, 0, 0); doc.setFont("helvetica", "bold"); doc.setFontSize(11);
              const titleLines = doc.splitTextToSize(role.title, MAIN_WIDTH); doc.text(titleLines, MAIN_X, cursorY);
              cursorY += (titleLines.length * 5) + 1;

              doc.setFontSize(9); doc.setTextColor(100); doc.text(role.date, MAIN_X + MAIN_WIDTH, cursorY, { align: 'right' });
              cursorY += 5;

              doc.setTextColor(15, 23, 42); doc.setFont("helvetica", "bold"); doc.setFontSize(9);
              doc.text(`${companyBlock.company} | ${companyBlock.location}`, MAIN_X, cursorY);
              cursorY += 5;

              if (role.mandate) { 
                  doc.setFont("helvetica", "italic"); doc.setTextColor(80); 
                  const mandateLines = doc.splitTextToSize(`Mandate: ${role.mandate}`, MAIN_WIDTH); 
                  doc.text(mandateLines, MAIN_X, cursorY); 
                  cursorY += (mandateLines.length * 4) + 4; 
              }

              role.bullets.forEach((b: any) => {
                  // Micro-pagination check for bullets
                  if (cursorY > 275) { 
                      doc.addPage(); drawSidebar(); cursorY = 20; 
                  }
                  
                  doc.setFont("helvetica", "normal"); doc.setFontSize(9); doc.setTextColor(50);
                  if (typeof b === 'string') { 
                      const lines = doc.splitTextToSize(`• ${b}`, MAIN_WIDTH); 
                      doc.text(lines, MAIN_X, cursorY); 
                      cursorY += (lines.length * 3.5) + 1; 
                  } 
                  else { 
                      doc.setFont("helvetica", "bold"); 
                      const headText = `• ${b.head}:`; 
                      doc.text(headText, MAIN_X, cursorY); 
                      const headWidth = doc.getTextWidth(headText);
                      
                      doc.setFont("helvetica", "normal"); 
                      const bodyLines = doc.splitTextToSize(b.body, MAIN_WIDTH - headWidth - 2);
                      if (bodyLines.length > 0) doc.text(bodyLines[0], MAIN_X + headWidth + 2, cursorY);
                      for(let i=1; i<bodyLines.length; i++) { cursorY += 4; doc.text(bodyLines[i], MAIN_X + 4, cursorY); }
                      cursorY += 5;
                  }
              });
              cursorY += 8;
          });
      });

      doc.save("Jonathan_Marino_Executive_Resume.pdf");
      setIsDownloadingResume(false);
  };

  // UI RENDER
  const getCompetencyStyle = (key: string) => {
      if (key === 'Technical') return { icon: Database, color: 'text-blue-400', bg: 'bg-blue-500/10', border: 'hover:border-blue-500/30', title: 'text-white' };
      if (key === 'Strategic') return { icon: Target, color: 'text-emerald-400', bg: 'bg-emerald-500/10', border: 'hover:border-emerald-500/30', title: 'text-white' };
      if (key === 'Leadership') return { icon: TrendingUp, color: 'text-amber-400', bg: 'bg-amber-500/10', border: 'hover:border-amber-500/30', title: 'text-white' };
      return { icon: Zap, color: 'text-slate-400', bg: 'bg-slate-800', border: 'border-slate-700', title: 'text-slate-200' };
  };

  return (
    <div className="min-h-screen bg-[#02040a] text-slate-200 font-sans selection:bg-blue-500 selection:text-white pb-32">
      
      {/* HERO */}
      <div className="relative pt-32 pb-20 px-6 border-b border-white/5">
        <div className="max-w-5xl mx-auto flex flex-col md:flex-row gap-12 items-center">
            <div className="relative group shrink-0">
                <div className="absolute inset-0 bg-blue-500 blur-3xl opacity-20 group-hover:opacity-40 transition-opacity duration-1000 rounded-full"></div>
                <div className="w-48 h-48 md:w-56 md:h-56 rounded-full border-2 border-white/10 overflow-hidden relative z-10 shadow-2xl">
                    <img src="/profile.png" alt="Jonathan W. Marino" className="w-full h-full object-cover"/>
                </div>
                <div className="absolute bottom-2 right-2 bg-emerald-500 w-4 h-4 rounded-full border-2 border-[#02040a] z-20 animate-pulse"></div>
            </div>
            <div className="flex-1 text-center md:text-left">
                <div className="inline-flex items-center gap-2 px-4 py-1.5 rounded-full bg-blue-500/10 border border-blue-500/20 text-blue-400 text-xs font-bold tracking-widest uppercase mb-6">
                    <Brain size={14} /> {FULL_RESUME_DATA.header.title}
                </div>
                <h1 className="text-4xl md:text-6xl font-bold text-white tracking-tight mb-6 leading-tight">
                    Jonathan W. <span className="text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-emerald-400">Marino</span>
                </h1>
                <p className="text-lg text-slate-400 max-w-2xl leading-relaxed">
                   {FULL_RESUME_DATA.summary}
                </p>
                <div className="flex flex-wrap gap-4 mt-8 justify-center md:justify-start">
                    <a href="https://linkedin.com/in/jwmdigital" target="_blank" className="px-8 py-3 bg-white text-black font-bold rounded-full hover:bg-blue-50 transition-all shadow-[0_0_20px_rgba(255,255,255,0.3)] flex items-center gap-2">
                        <Linkedin size={18} /> Connect
                    </a>
                    <button 
                        onClick={downloadLiveBriefing}
                        disabled={isDownloadingLive}
                        className="px-6 py-3 bg-blue-600 text-white font-bold rounded-full hover:bg-blue-500 transition-colors shadow-lg shadow-blue-900/30 flex items-center gap-2 text-sm"
                    >
                        {isDownloadingLive ? "Compiling..." : <><Activity size={18}/> Live Briefing (10 Signals)</>}
                    </button>
                    <button 
                        onClick={downloadResume}
                        disabled={isDownloadingResume}
                        className="px-6 py-3 border border-white/20 text-white font-bold rounded-full hover:bg-white/5 transition-colors flex items-center gap-2 text-sm"
                    >
                        {isDownloadingResume ? "Generating..." : <><FileText size={18}/> Download Executive Resume</>}
                    </button>
                </div>
            </div>
        </div>
      </div>

      {/* COMPETENCIES */}
      <div className="max-w-6xl mx-auto px-6 py-24">
          <div className="text-xs font-bold text-slate-500 uppercase tracking-widest mb-8 text-center md:text-left">Core Competencies</div>
          <div className="grid grid-cols-1 md:grid-cols-3 gap-8">
              {Object.entries(FULL_RESUME_DATA.core_competencies).map(([category, text], i) => {
                  const style = getCompetencyStyle(category);
                  const Icon = style.icon;
                  return (
                      <div key={i} className={`p-8 rounded-3xl bg-white/5 border border-white/5 ${style.border} transition-all duration-500 group`}>
                          <div className={`w-12 h-12 ${style.bg} rounded-xl flex items-center justify-center mb-6 ${style.color} group-hover:scale-110 transition-transform`}>
                              <Icon size={24} />
                          </div>
                          <h3 className={`text-xl font-bold mb-4 ${style.title}`}>{category}</h3>
                          <p className="text-slate-400 text-sm leading-relaxed">{text}</p>
                      </div>
                  );
              })}
          </div>
      </div>

      {/* HISTORY */}
      <div className="max-w-4xl mx-auto px-6">
          <h2 className="text-3xl font-bold text-white mb-12 flex items-center gap-3">
              <Activity className="text-blue-500" /> Professional History
          </h2>
          <div className="space-y-12 border-l-2 border-white/10 ml-3 pl-12 relative">
              {FULL_RESUME_DATA.experience.map((companyBlock, cIdx) => (
                  <div key={cIdx} className="space-y-12">
                      {companyBlock.roles.map((role: any, rIdx: number) => (
                          <div key={rIdx} className="relative">
                              <div className="absolute -left-[55px] top-1 w-6 h-6 rounded-full bg-blue-500 border-4 border-[#02040a] shadow-[0_0_15px_#3b82f6]"></div>
                              <div className="flex flex-col sm:flex-row sm:items-baseline sm:justify-between mb-2">
                                  <h3 className="text-xl font-bold text-white">{role.title}</h3>
                                  <span className="text-sm font-mono text-blue-400">{role.date}</span>
                              </div>
                              <div className="text-sm font-bold text-slate-400 mb-4">{companyBlock.company} | {companyBlock.location}</div>
                              {role.mandate && (
                                  <div className="p-4 bg-blue-900/10 border border-blue-500/20 rounded-lg mb-6">
                                      <span className="text-xs font-bold text-blue-400 uppercase">Mandate</span>
                                      <p className="text-slate-300 text-sm mt-1">{role.mandate}</p>
                                  </div>
                              )}
                              <ul className="space-y-4">
                                  {role.bullets.map((b: any, bIdx: number) => (
                                      <li key={bIdx} className="group">
                                          <div className="text-white font-bold text-sm group-hover:text-blue-400 transition-colors mb-1">
                                              {typeof b === 'string' ? '' : b.head}
                                          </div>
                                          <p className="text-slate-400 text-sm leading-relaxed">
                                              {typeof b === 'string' ? b : b.body}
                                          </p>
                                      </li>
                                  ))}
                              </ul>
                          </div>
                      ))}
                  </div>
              ))}
          </div>
      </div>
    </div>
  );
}
</file>

<file path="app/components/HiddenResume.tsx">
import React, { forwardRef } from 'react';

export const HiddenResume = forwardRef(({ data }: { data: any }, ref: any) => {
  if (!data) return null;

  return (
    <div ref={ref} style={{
        position: 'fixed', top: '-9999px', left: '-9999px',
        width: '210mm', minHeight: '297mm', // A4 Size
        background: 'white', color: 'black', padding: '15mm',
        fontFamily: 'Helvetica, Arial, sans-serif'
    }}>
      {/* HEADER */}
      <div style={{ borderBottom: '2px solid #333', paddingBottom: '20px', marginBottom: '20px' }}>
          <h1 style={{ fontSize: '28pt', fontWeight: 'bold', margin: 0, letterSpacing: '-1px' }}>{data.fullName.toUpperCase()}</h1>
          <h2 style={{ fontSize: '14pt', color: '#666', marginTop: '5px', fontWeight: 'normal' }}>{data.title}</h2>
          <div style={{ fontSize: '10pt', color: '#444', marginTop: '10px', display: 'flex', gap: '15px' }}>
              <span>{data.contact}</span>
              <span>•</span>
              <span>Generated: {new Date().toLocaleDateString()}</span>
          </div>
      </div>

      {/* SUMMARY */}
      <div style={{ marginBottom: '25px' }}>
          <h3 style={{ fontSize: '12pt', fontWeight: 'bold', borderBottom: '1px solid #ddd', paddingBottom: '5px', marginBottom: '10px' }}>EXECUTIVE SYNTHESIS</h3>
          <p style={{ fontSize: '10pt', lineHeight: '1.5' }}>{data.summary}</p>
      </div>

      {/* SKILLS */}
      <div style={{ marginBottom: '25px' }}>
          <h3 style={{ fontSize: '12pt', fontWeight: 'bold', borderBottom: '1px solid #ddd', paddingBottom: '5px', marginBottom: '10px' }}>CORE COMPETENCIES</h3>
          <div style={{ display: 'flex', flexWrap: 'wrap', gap: '8px' }}>
              {data.skills.map((s: string, i: number) => (
                  <span key={i} style={{ fontSize: '9pt', background: '#f0f0f0', padding: '4px 8px', borderRadius: '4px' }}>{s}</span>
              ))}
          </div>
      </div>

      {/* EXPERIENCE */}
      <div>
          <h3 style={{ fontSize: '12pt', fontWeight: 'bold', borderBottom: '1px solid #ddd', paddingBottom: '5px', marginBottom: '10px' }}>RELEVANT EXPERIENCE</h3>
          {data.experience.map((exp: any, i: number) => (
              <div key={i} style={{ marginBottom: '20px' }}>
                  <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '4px' }}>
                      <span style={{ fontWeight: 'bold', fontSize: '11pt' }}>{exp.title}</span>
                      <span style={{ fontSize: '10pt', color: '#666' }}>{exp.date}</span>
                  </div>
                  <div style={{ fontStyle: 'italic', fontSize: '10pt', marginBottom: '6px' }}>{exp.company}</div>
                  <ul style={{ margin: 0, paddingLeft: '20px' }}>
                      {exp.bullets.map((b: string, j: number) => (
                          <li key={j} style={{ fontSize: '10pt', marginBottom: '4px', lineHeight: '1.4' }}>{b}</li>
                      ))}
                  </ul>
              </div>
          ))}
      </div>
    </div>
  );
});

HiddenResume.displayName = "HiddenResume";
</file>

<file path="app/components/SecurityLayer.tsx">
"use client";
import { useEffect } from 'react';

export default function SecurityLayer() {
  useEffect(() => {
    // --- 1. CONSOLE EASTER EGG ---
    const message = "🔒 SYSTEM ARCHITECTURE SECURED.";
    const subMsg = "If you would like to know how I built this, you can pay for my services.\n\nContact: jmarinonyc@gmail.com";
    
    const titleStyle = [
      "font-size: 16px",
      "font-weight: bold",
      "color: #3b82f6", // Blue-500
      "background-color: #0f172a", // Slate-900
      "padding: 10px 20px",
      "border-radius: 5px",
      "border: 1px solid #1e293b"
    ].join(';');

    const bodyStyle = [
      "font-size: 12px",
      "color: #94a3b8", // Slate-400
      "padding-top: 10px",
    ].join(';');

    console.clear();
    console.log(`%c${message}`, titleStyle);
    console.log(`%c${subMsg}`, bodyStyle);

    // --- 2. DISABLE RIGHT CLICK ---
    const handleContextMenu = (e: MouseEvent) => {
      e.preventDefault();
    };

    // --- 3. DISABLE INSPECTOR SHORTCUTS ---
    const handleKeyDown = (e: KeyboardEvent) => {
      // Block F12
      if (e.key === 'F12') {
        e.preventDefault();
      }
      // Block Ctrl+Shift+I / Cmd+Opt+I (Inspect)
      if ((e.ctrlKey || e.metaKey) && e.shiftKey && (e.key === 'I' || e.key === 'i')) {
        e.preventDefault();
      }
      // Block Ctrl+Shift+J / Cmd+Opt+J (Console)
      if ((e.ctrlKey || e.metaKey) && e.shiftKey && (e.key === 'J' || e.key === 'j')) {
        e.preventDefault();
      }
      // Block Ctrl+U / Cmd+U (View Source)
      if ((e.ctrlKey || e.metaKey) && (e.key === 'U' || e.key === 'u')) {
        e.preventDefault();
      }
    };

    document.addEventListener('contextmenu', handleContextMenu);
    document.addEventListener('keydown', handleKeyDown);

    return () => {
      document.removeEventListener('contextmenu', handleContextMenu);
      document.removeEventListener('keydown', handleKeyDown);
    };
  }, []);

  return null; // Headless component
}
</file>

<file path="app/data/live_cache.json">
[
  {
    "id": "LIVE_GEN_01",
    "category": "live",
    "headline": {
      "title": "Global AI Governance Accelerates Amidst Urgent Regulatory Landscape",
      "subtitle": "Strategic Risk & Governance"
    },
    "context": {
      "label": "Market Context",
      "description": "The year 2025 marks a critical phase in AI governance, as major frameworks transition from proposals to enforcement, pushing organizations to navigate a complex landscape of mandatory compliance and voluntary standards to balance innovation with accountability.",
      "date": "LIVE - TODAY",
      "sources": [
        {
          "label": "AI Governance and Compliance in 2025",
          "type": "News",
          "url": "https://vertexaisearch.cloud.google.com/grounding-api-redirect/AUZIYQE_1WySmXz7JIQNwN4au7MF23QXdXKTze5FCvJvq6g64f0oNeZhB5snAzhNr89FGrDqs0Y40_9wJ_Yb8rPx3E954bTyqQEr2vY25lbMLn-4q3WuB1ks3n4Ub67Nr7WlkV-5AOSbyGuepVTDpqqgyYQQKS2dounTP0bs3kx5yrFXCIlIIdsPCyIeWp2tjz1eZLdngUlA_09ppyHj5llyzkEoGNs_"
        }
      ]
    },
    "insight": {
      "label": "Friction",
      "explanation": "Translating rapidly evolving global AI regulations into consistent, enforceable policies across diverse operational landscapes presents a significant challenge for enterprises aiming for seamless cross-border operations and maintaining competitive velocity."
    },
    "experience": {
      "label": "Strategic Response",
      "role": "Tech Strategy Lead & Data Scientist | The Architect of Intelligent Systems",
      "action": "Built the 'Global Policy Data Mesh,' turning the EU Digital Services Act (DSA) from an existential threat into a streamlined operational advantage.",
      "result": "100% Compliance",
      "tags": [
        "AI Governance",
        "Regulatory Compliance",
        "Data Mesh",
        "Global Strategy"
      ]
    },
    "icon": "Activity"
  },
  {
    "id": "LIVE_GEN_02",
    "category": "live",
    "headline": {
      "title": "Global AI Ethics Summit Calls for Unified Standards and Accountability",
      "subtitle": "AI Safety & Revenue Retention"
    },
    "context": {
      "label": "Market Context",
      "description": "AI experts gathered at VinFuture Week 2025 to discuss urgent ethical and safety questions, emphasizing that ethics are a prerequisite for sustainable AI innovation, not a hindrance.",
      "date": "November 25, 2025",
      "sources": [
        {
          "label": "AI pioneers call for global cooperation on ethics and safety at VinFuture 2025",
          "type": "News",
          "url": "https://vertexaisearch.cloud.google.com/grounding-api-redirect/AUZIYQGeciKIUGmIH70UVSAxJwBl-Nfpnw0tvSguzBzkRqoD1C79OLqphShhajvkqifXtnHoEN5akZdsKsCAXfkTDcxDr9ZnChNpWQD9hjVC3ZhDCyZBsmZj21bgza6OUsc5nBRFYTv-iSZr4m7Ub4ZQIuozlga8GeKpSZH5bT_bu_KxTltxLTqcxsM5-K82ySKYsStLsaj17U_zAe0rXy4RL3U-SzD1moijhsDFGR7mgF2w"
        }
      ]
    },
    "insight": {
      "label": "Friction",
      "explanation": "The rapid scaling of AI systems necessitates robust safety nets to prevent biased outcomes and maintain human trust, which is challenging when algorithms operate autonomously across diverse applications."
    },
    "experience": {
      "label": "Strategic Response",
      "role": "Tech Strategy Lead & Data Scientist | The Architect of Intelligent Systems",
      "action": "Designed 'Safety Nets' that allow AI to scale without destroying value. Intercepted false positives to protect revenue and restore human trust in the algorithm.",
      "result": "$5M+ in revenue",
      "tags": [
        "AI Ethics",
        "Algorithmic Bias",
        "Trust",
        "Risk Mitigation"
      ]
    },
    "icon": "Activity"
  },
  {
    "id": "LIVE_GEN_03",
    "category": "live",
    "headline": {
      "title": "US States Bolster Data Privacy with New Laws, Expanding Compliance Requirements for 2025",
      "subtitle": "Strategic Risk & Governance"
    },
    "context": {
      "label": "Market Context",
      "description": "Nine US states amended their existing comprehensive privacy laws in 2025, alongside several new state laws taking effect, creating a complex and evolving compliance landscape for businesses.",
      "date": "November 10, 2025",
      "sources": [
        {
          "label": "Retrospective: 2025 in state data privacy law - IAPP",
          "type": "News",
          "url": "https://vertexaisearch.cloud.google.com/grounding-api-redirect/AUZIYQFpBNiab2uszkgUiMAviOomaikpSz3FpRecycoKxxY-TlwycFdBbSTiYpyv6Yvio0bbu1N56ZGKB_zwtqcZdHX00cTbKE2Z9ydjAJfMVB-AbqsmxhH4tcMfe5Yqr6VXPcyO7OJo6rVsn3rC3eLOV58BSzRyzisIAeuZBq8R58S3"
        }
      ]
    },
    "insight": {
      "label": "Friction",
      "explanation": "Navigating a fragmented regulatory environment with varying compliance requirements across states and international jurisdictions demands adaptable policy frameworks and robust data governance strategies."
    },
    "experience": {
      "label": "Strategic Response",
      "role": "Tech Strategy Lead & Data Scientist | The Architect of Intelligent Systems",
      "action": "Built the 'Global Policy Data Mesh,' turning the EU Digital Services Act (DSA) from an existential threat into a streamlined operational advantage.",
      "result": "100% Compliance",
      "tags": [
        "Data Privacy",
        "State Regulations",
        "Compliance",
        "Global Strategy"
      ]
    },
    "icon": "Activity"
  },
  {
    "id": "LIVE_GEN_04",
    "category": "live",
    "headline": {
      "title": "AI-Driven Strategies Transform Cloud Cost Optimization for 2025",
      "subtitle": "Cloud FinOps & Efficiency"
    },
    "context": {
      "label": "Market Context",
      "description": "Global IT budget insights for 2025 reveal that AI-driven solutions are becoming critical for cloud cost optimization, with organizations focusing on reducing waste and improving forecasting accuracy.",
      "date": "November 11, 2025",
      "sources": [
        {
          "label": "Cloud Cost Optimization in 2025: Global IT Budget Insights and Practical AI Integration",
          "type": "News",
          "url": "https://vertexaisearch.cloud.google.com/grounding-api-redirect/AUZIYQFFawINxrOS0azyjGsCNt12IqGzPO1OHR9CVQ8XmLRkYum9CtE2fF2Scb4Bd0s_FggEW3sRdgBJP-j9uCembYLWWKLPCEp-3T9HIShC7oM01E7QsIwGpzrLk1xLjKh2jJ5yBBIyOwq6h1j32kRHSxmODbpRCF2Gl9eqyK_Jt7GpA6S1ToYi4voty9BSySUw5er_h-pJV5R0SCXA5U6dBThG6-hfToy9L03EsfvamXAq"
        }
      ]
    },
    "insight": {
      "label": "Friction",
      "explanation": "The increasing complexity of multi-cloud environments and the rapid adoption of AI services make precise cost attribution and real-time optimization challenging without intelligent automation and strong FinOps practices."
    },
    "experience": {
      "label": "Strategic Response",
      "role": "Tech Strategy Lead & Data Scientist | The Architect of Intelligent Systems",
      "action": "Treated compute power as a finite creative resource. Implemented governance that saved $500k/year.",
      "result": "$500k/year",
      "tags": [
        "FinOps",
        "Cloud Cost Management",
        "AI Optimization",
        "Efficiency"
      ]
    },
    "icon": "Activity"
  },
  {
    "id": "LIVE_GEN_05",
    "category": "live",
    "headline": {
      "title": "AI Empowers Proactive Supply Chain Resilience Amidst Geopolitical Shifts",
      "subtitle": "Global Supply Chain"
    },
    "context": {
      "label": "Market Context",
      "description": "As global supply chains face unprecedented disruption from shifting trade policies, AI is emerging as a critical technology for proactive risk management, enabling businesses to screen massive datasets globally to identify potential impacts.",
      "date": "November 27, 2025",
      "sources": [
        {
          "label": "Turn Tariff Turmoil into Supply Chain Resilience Using AI | Procurement Magazine",
          "type": "News",
          "url": "https://vertexaisearch.cloud.google.com/grounding-api-redirect/AUZIYQFTFaZs4wRAzFjBHd6t0ZzkE98d-BtE4s_VBANVvqTWPiqb2E-5GUFcrRwaaFI7YaBTkvWjm57x3fnwE8RsN26sCuIM9CWFppY9rPzOAJ4KZG7_seC0x8Bu2BVJk0CbfuYIHTk92JeSPF3o6OGjEUhS3BAo8XS-pj_cbLqRuUotc4ijrNw_1a1N5D8us_OlL_TtJ1Zm2gtTUeoeLw=="
        }
      ]
    },
    "insight": {
      "label": "Friction",
      "explanation": "The dynamic nature of global trade and geopolitical tensions creates constant supply chain vulnerabilities, making it difficult to anticipate and mitigate disruptions without advanced predictive analytics and real-time visibility."
    },
    "experience": {
      "label": "Strategic Response",
      "role": "Tech Strategy Lead & Data Scientist | The Architect of Intelligent Systems",
      "action": "Engineered a borderless, secure vendor framework that allowed the business to tap into global talent pools.",
      "result": "6 weeks faster",
      "tags": [
        "Supply Chain",
        "AI",
        "Risk Management",
        "Global Talent"
      ]
    },
    "icon": "Activity"
  },
  {
    "id": "LIVE_GEN_06",
    "category": "live",
    "headline": {
      "title": "AI Gateways Operationalize New Governance Frameworks for Scalable Data Strategy",
      "subtitle": "Data Architecture"
    },
    "context": {
      "label": "Market Context",
      "description": "New AI governance frameworks for 2025 are being operationalized through AI Gateways, which act as enforcement layers, translating policy into action via centralized governance, monitoring, and auditing to ensure compliance.",
      "date": "November 7, 2025",
      "sources": [
        {
          "label": "AI Governance Frameworks for 2025: How AI Gateways Turn Policy into Practice",
          "type": "News",
          "url": "https://vertexaisearch.cloud.google.com/grounding-api-redirect/AUZIYQEuZyuDpFXROcqNlZPGD3zaH6kwOGBwATCho08eS64RxuUC8Rh3kQexjftXa-NQ8LfNRDErXuEwjpBHCcVx_45b5RjtkfFcO1r7JuSsyMafCb35KavECLN2CSvngSNGQnsF2PTtBtfe2Ik0pxiVeOTRbLsG"
        }
      ]
    },
    "insight": {
      "label": "Friction",
      "explanation": "Fragmented data silos and disparate systems hinder the implementation of consistent governance policies, making it challenging to establish a unified and trustworthy data foundation for enterprise-wide decision-making."
    },
    "experience": {
      "label": "Strategic Response",
      "role": "Tech Strategy Lead & Data Scientist | The Architect of Intelligent Systems",
      "action": "Unified fragmented silos into a 'Single Source of Truth,' giving leadership the real-time clarity needed to make bold, future-facing decisions.",
      "result": "Single Source of Truth",
      "tags": [
        "Data Governance",
        "Data Mesh",
        "Architecture",
        "Real-time Analytics"
      ]
    },
    "icon": "Activity"
  },
  {
    "id": "LIVE_GEN_07",
    "category": "live",
    "headline": {
      "title": "Australia Unveils New AI Guidance, Driving Operational Shifts for Enterprise Adoption",
      "subtitle": "Operational Automation"
    },
    "context": {
      "label": "Market Context",
      "description": "Australia has published new Guidance for AI Adoption (GfAA), replacing previous voluntary standards and placing greater emphasis on whole-of-lifecycle development, deployment, and ongoing assessment of AI systems, compelling operational adjustments for businesses.",
      "date": "November 25, 2025",
      "sources": [
        {
          "label": "Australia launches new AI guidance | White & Case LLP",
          "type": "News",
          "url": "https://vertexaisearch.cloud.google.com/grounding-api-redirect/AUZIYQEZZfwVDCoLpoJDrsI9Ne6PTd5DIvZxsjrodZfur25jk-J7Wb7SDOqXrjXQ2O2hpQ4w_nGCLrcMF9F29wAQuz1WnTJUpen3fZWCc6O62oKj0TqzBk0Qq_YXBpllRzgk2Q8oTiLQebGJK457kzvec7aOfLDQr2c2GtwnNhtOF9wutOuczsEx"
        }
      ]
    },
    "insight": {
      "label": "Friction",
      "explanation": "Integrating new AI guidelines across an organization's entire operational lifecycle, from development to deployment and monitoring, requires significant process re-engineering and automation to ensure consistent adherence and efficiency."
    },
    "experience": {
      "label": "Strategic Response",
      "role": "Tech Strategy Lead & Data Scientist | The Architect of Intelligent Systems",
      "action": "Reclaimed human potential by automating the mundane (Executive Review), allowing top talent to focus on strategy.",
      "result": "1,000+ hours",
      "tags": [
        "Process Automation",
        "AI Adoption",
        "Operational Efficiency",
        "Talent Optimization"
      ]
    },
    "icon": "Activity"
  },
  {
    "id": "LIVE_GEN_08",
    "category": "live",
    "headline": {
      "title": "AI Ethics Summit Emphasizes Trust and Accountability for Enhanced User Experience",
      "subtitle": "Customer Experience Engineering"
    },
    "context": {
      "label": "Market Context",
      "description": "An AI ethics summit highlights the urgent need for robust ethical frameworks to address issues like bias and accountability, stressing that public trust is critical for AI adoption and overall user experience.",
      "date": "November 25, 2025",
      "sources": [
        {
          "label": "Hopeful Calls from AI Ethics Summit: Equality, Safety and Accountability - Politics UK",
          "type": "News",
          "url": "https://vertexaisearch.cloud.google.com/grounding-api-redirect/AUZIYQFae6Ziwbbg7iT5yiUU4jlfmvkP7Lt9SNg75RA6UGWW_wAeGTDCXu-C7_Ne2SJia3sPt8Wm3z4W78oirru-FgiHr3Dgm6tcXWq1thphYMBDGsljLfykyk5LPMyYiPdMC-8B4LIXIli2cTvE7jdaPpEF5hanxmQGv92MDBgXBeC5eSy2"
        }
      ]
    },
    "insight": {
      "label": "Friction",
      "explanation": "Ensuring AI systems are perceived as fair, transparent, and trustworthy by end-users requires proactive ethical design and robust accountability mechanisms, which are often complex to integrate into fast-evolving AI development cycles."
    },
    "experience": {
      "label": "Strategic Response",
      "role": "Tech Strategy Lead & Data Scientist | The Architect of Intelligent Systems",
      "action": "Used predictive analytics to solve problems before they happened, eliminating support tickets and creating a frictionless user journey.",
      "result": "300,000 support tickets",
      "tags": [
        "Customer Experience",
        "AI Ethics",
        "Predictive Analytics",
        "Trust & Safety"
      ]
    },
    "icon": "Activity"
  },
  {
    "id": "LIVE_GEN_09",
    "category": "live",
    "headline": {
      "title": "Digital Transformation Drives Sustainable Supply Chain Development",
      "subtitle": "Intrapreneurship & Scaling"
    },
    "context": {
      "label": "Market Context",
      "description": "The development of resilient and sustainable supply chains for tomorrow is increasingly driven by digital transformation, integrating technologies like AI, IoT, and Blockchain to enhance visibility and efficiency.",
      "date": "November 21, 2025",
      "sources": [
        {
          "label": "Developing the supply chain of tomorrow: a path to resilience and sustainability",
          "type": "News",
          "url": "https://vertexaisearch.cloud.google.com/grounding-api-redirect/AUZIYQGC88At8k7Idt5c8OZJvsFJ7RmemfyYyqU1W0hSb2c6jEEpi6NRPVeuLl6SP0GVBzwFLlIyYHHWj8hF3RAjm7OjhJ3GCfMbcW0oij-m2V1QsK4P1mpp6FZr3S50bdKtNMBzdrjKUXE11i6gBQWpSSpLrpN3imi7TUDMv7AXeEAvwMEo6uUpcN3mZ5MztZmZ_Z8sQITjIkQRkiikA-sZ-2i6wLxBzdHEn7m4Da845TJrynOSx7-7k6ys1Ai01A=="
        }
      ]
    },
    "insight": {
      "label": "Friction",
      "explanation": "Building innovative and sustainable internal operations within existing enterprise structures requires overcoming resistance to change, fostering a culture of experimentation, and securing resources for long-term vision projects."
    },
    "experience": {
      "label": "Strategic Response",
      "role": "Tech Strategy Lead & Data Scientist | The Architect of Intelligent Systems",
      "action": "Built 'Creative Production Works' from a concept into an enterprise.",
      "result": "$15M enterprise",
      "tags": [
        "Intrapreneurship",
        "Digital Transformation",
        "Scaling",
        "Innovation"
      ]
    },
    "icon": "Activity"
  },
  {
    "id": "LIVE_GEN_10",
    "category": "live",
    "headline": {
      "title": "Federal Government Launches AI Safety Institute to Safeguard Digital Sovereignty",
      "subtitle": "Digital Sovereignty"
    },
    "context": {
      "label": "Market Context",
      "description": "The Australian federal government has launched its AI Safety Institute, to be operational in early 2026, aiming to provide expert capability to monitor, test, and share information on emerging AI technologies, reflecting a national effort to control AI risks within its borders.",
      "date": "November 26, 2025",
      "sources": [
        {
          "label": "Federal government launches AI safety institute - CRN Australia",
          "type": "News",
          "url": "https://vertexaisearch.cloud.google.com/grounding-api-redirect/AUZIYQE5bihv9g85Bt0RpYzQp1Alj19FS8uxXoREPVYTa1Vv9KKnytKilQmEtK2oewtV97zCcsZbUVg1fb8Q4SRXev-gPUA25XhB1DEz3eP0jiAI2lfqGB6eZMwigvgnKBiArvRVi4xDj2WmwGyfB2XqMycesEaaTp4M-OQ-JZ0iQ3v5E9CZAhr6s0JLpdODBnAmTzAIlRA5zOqm9_sUeT1pww=="
        }
      ]
    },
    "insight": {
      "label": "Friction",
      "explanation": "Achieving digital sovereignty in an interconnected world is challenging due to the transboundary nature of AI risks and the need for a single platform to adhere to diverse local laws without fracturing product integrity."
    },
    "experience": {
      "label": "Strategic Response",
      "role": "Tech Strategy Lead & Data Scientist | The Architect of Intelligent Systems",
      "action": "Solved the puzzle of global fragmentation. Engineered systems that allow a single platform to respect local laws in China and the EU without fracturing the product.",
      "result": "Single platform",
      "tags": [
        "Digital Sovereignty",
        "AI Safety",
        "Global Fragmentation",
        "Regulatory Compliance"
      ]
    },
    "icon": "Activity"
  }
]
</file>

<file path="app/data/master_gems.ts">
export const MASTER_GEMS = [
  { "role": "Tech Lead (Policy)", "project": "Global Policy Data Mesh", "metricValue": "€20M", "metricName": "Fine Avoidance", "industryStandards": ["GDPR", "Data Sovereignty"], "id": 1 },
  { "role": "Tech Lead (Policy)", "project": "Ethical AI Governance", "metricValue": "$5M LTV", "metricName": "Retained Revenue", "industryStandards": ["NIST AI RMF", "Algorithmic Fairness"], "id": 2 },
  { "role": "Tech Lead (Policy)", "project": "TRACE Methodology", "metricValue": "40%", "metricName": "Manual Review Reduction", "industryStandards": ["Graph Analysis", "Fraud Detection"], "id": 3 },
  { "role": "Internal Founder", "project": "Creative Production Works", "metricValue": "$15M", "metricName": "ARR", "industryStandards": ["Agile Production", "Profit Center"], "id": 4 },
  { "role": "Internal Founder", "project": "Global Ops & Vetting", "metricValue": "100%", "metricName": "Vendor Compliance", "industryStandards": ["VRM", "ISO 27001"], "id": 5 },
  { "role": "Data Scientist", "project": "Internal Tool Commercialization", "metricValue": "30%", "metricName": "Time-to-Insight", "industryStandards": ["Self-Service BI", "Product-Led Growth"], "id": 6 },
  { "role": "Creative Tech", "project": "Oddcast / Viral Marketing", "metricValue": "100M+", "metricName": "Impressions", "industryStandards": ["High Availability", "Viral Engineering"], "id": 7 },
  { "role": "Tech Lead (Policy)", "project": "DSA Response", "metricValue": "100%", "metricName": "Compliance Rate", "industryStandards": ["DSA", "Regulatory Reporting"], "id": 8 },
  { "role": "Data Scientist", "project": "Cloud Cost Optimization", "metricValue": "$500k", "metricName": "Annualized Savings", "industryStandards": ["FinOps", "Cloud Economics"], "id": 9 },
  { "role": "Internal Founder", "project": "Talent Retention Strategy", "metricValue": "25%", "metricName": "Attrition Reduction", "industryStandards": ["Human Capital", "Upskilling"], "id": 10 },
  { "role": "Creative Tech", "project": "Dynamic Creative Optimization", "metricValue": "$2M", "metricName": "Revenue Lift", "industryStandards": ["DCO", "Real-Time Bidding"], "id": 11 },
  { "role": "Tech Lead", "project": "Legacy Stack Migration", "metricValue": "0 Downtime", "metricName": "Migration Success", "industryStandards": ["Microservices", "Modernization"], "id": 12 },
  { "role": "Tech Lead (Policy)", "project": "Election Integrity", "metricValue": "<15 Min", "metricName": "Mean Time to Detect", "industryStandards": ["Crisis Management", "Trust & Safety"], "id": 13 },
  { "role": "Data Scientist", "project": "Data Democratization", "metricValue": "200+", "metricName": "Active Users", "industryStandards": ["Data Literacy", "Analytics"], "id": 14 },
  { "role": "Internal Founder", "project": "Vendor Consolidation", "metricValue": "15%", "metricName": "Cost Reduction", "industryStandards": ["Strategic Sourcing", "Governance"], "id": 15 },
  { "role": "Creative Tech", "project": "Mobile Performance Tuning", "metricValue": "40%", "metricName": "Faster Load Time", "industryStandards": ["Core Web Vitals", "Mobile-First"], "id": 16 },
  { "role": "Strategist", "project": "OKR Alignment", "metricValue": "100%", "metricName": "Strategic Alignment", "industryStandards": ["OKRs", "Strategic Planning"], "id": 17 },
  { "role": "Tech Lead (Policy)", "project": "Child Safety (COPPA)", "metricValue": "0", "metricName": "Breach Incidents", "industryStandards": ["COPPA", "AADC"], "id": 18 },
  { "role": "Tech Lead", "project": "Incident Response (SRE)", "metricValue": "50%", "metricName": "MTTR Reduction", "industryStandards": ["SRE", "Incident Management"], "id": 19 },
  { "role": "Data Scientist", "project": "Customer 360 View", "metricValue": "100%", "metricName": "Data Completeness", "industryStandards": ["CDP", "MDM"], "id": 20 },
  { "role": "Tech Lead", "project": "Billing Team Enablement", "metricValue": "15 hrs/wk", "metricName": "Time Saved", "industryStandards": ["Automation", "BI"], "id": 21 },
  { "role": "Tech Lead", "project": "Team Enablement", "metricValue": "100%", "metricName": "L&D Goals Met", "industryStandards": ["Learning", "Knowledge"], "id": 22 },
  { "role": "Tech Lead", "project": "SSoT Data Ecosystem", "metricValue": "100%", "metricName": "Adoption", "industryStandards": ["Data Governance", "SSoT"], "id": 23 },
  { "role": "Tech Lead", "project": "Parent-Child Case Mapping", "metricValue": ">95%", "metricName": "Accuracy", "industryStandards": ["Data Modeling", "Cases"], "id": 24 },
  { "role": "Tech Lead", "project": "Commerce Policy DataSite", "metricValue": "100%", "metricName": "User Adoption", "industryStandards": ["BI", "KM"], "id": 25 },
  { "role": "Tech Lead", "project": "P-Staff SLO Reporting", "metricValue": "40 hrs/wk", "metricName": "Manual Work Saved", "industryStandards": ["SLO", "Reporting"], "id": 26 },
  { "role": "Tech Lead", "project": "gTech Ops Dashboard", "metricValue": "100%", "metricName": "Adoption", "industryStandards": ["Analytics", "Dashboarding"], "id": 27 },
  { "role": "Tech Lead", "project": "AI-Enhanced Reporting", "metricValue": "5 min", "metricName": "Latency", "industryStandards": ["AI Automation", "Efficiency"], "id": 28 },
  { "role": "Tech Lead", "project": "Internal Keyword Tool", "metricValue": "20,000 hrs", "metricName": "Saved Annually", "industryStandards": ["API Automation", "Efficiency"], "id": 29 },
  { "role": "Tech Lead", "project": "SlideSense App", "metricValue": "100%", "metricName": "Strategy Ownership", "industryStandards": ["Tooling", "QA"], "id": 30 },
  { "role": "Tech Lead", "project": "PMOS Pipeline Overhaul", "metricValue": "20%", "metricName": "Loss Resolved", "industryStandards": ["Data Engineering", "Reliability"], "id": 31 },
  { "role": "Tech Lead", "project": "YouTube Content Quality", "metricValue": "100%", "metricName": "Adoption", "industryStandards": ["Data Authority", "Quality"], "id": 32 },
  { "role": "Tech Lead", "project": "Merchant Revenue Pipeline", "metricValue": "100%", "metricName": "Revenue Coverage", "industryStandards": ["RevOps", "Decision Support"], "id": 33 }
];
</file>

<file path="app/data/resume_source.ts">
export const RESUME_TEXT = `
IDENTITY: JONATHAN W. MARINO
ROLE: Tech Strategy Lead & Data Scientist | The Architect of Intelligent Systems
LOCATION: New York Metropolitan Area
CONTACT: jmarinonyc@gmail.com | linkedin.com/in/jwmdigital | jwm.digital

EXECUTIVE SUMMARY:
I operate at the convergence of Creative Intelligence, Data Engineering, and Global Strategy.
My career is defined by a simple mission: To synthesize creative vision with engineering precision.
I don't just navigate the future; I build the infrastructure that makes it possible. By translating complex global constraints into automated, self-healing data meshes, I turn regulatory friction into competitive velocity. I enable enterprises to scale rapidly, safely, and profitably by replacing administrative bloat with intelligent code.

CORE PILLARS:
1. CREATIVE INTELLIGENCE: Seeing the "Art of the Possible." Designing systems that are not just functional, but visionary (e.g., First-to-market AR/3D Ad Tech).
2. TECHNICAL PRECISION: Building the "Engine of Reality." Architecting massive-scale data meshes, AI safety nets, and FinOps protocols.
3. STRATEGIC VELOCITY: Removing the "Brakes." Transforming compliance and safety from blockers into accelerators for global growth.

STRATEGIC ACHIEVEMENTS:

1. STRATEGIC RISK & GOVERNANCE
- Built the "Global Policy Data Mesh," turning the EU Digital Services Act (DSA) from an existential threat into a streamlined operational advantage (100% Compliance).

2. AI SAFETY & REVENUE RETENTION
- Designed "Safety Nets" that allow AI to scale without destroying value. Intercepted false positives to protect $5M+ in revenue and restore human trust in the algorithm.

3. CLOUD FINOPS & EFFICIENCY
- Treated compute power as a finite creative resource. Implemented governance that saved $500k/year, proving that efficiency drives innovation.

4. INTRAPRENEURSHIP & SCALING
- Built "Creative Production Works" from a concept into a $15M enterprise. Proved that internal teams can outperform external agencies in speed, quality, and security.

5. DATA ARCHITECTURE
- Unified fragmented silos into a "Single Source of Truth," giving leadership the real-time clarity needed to make bold, future-facing decisions.

6. OPERATIONAL AUTOMATION
- Reclaimed 1,000+ hours of human potential by automating the mundane (Executive Review), allowing top talent to focus on strategy.

7. GLOBAL SUPPLY CHAIN
- Engineered a borderless, secure vendor framework that allowed the business to tap into global talent pools 6 weeks faster than before.

8. CRISIS MANAGEMENT
- Deployed real-time "War Rooms" that turned chaos into clarity, enabling threat neutralization in under 15 minutes during critical global elections.

9. CUSTOMER EXPERIENCE ENGINEERING
- Used predictive analytics to solve problems before they happened, eliminating 300,000 support tickets and creating a frictionless user journey.

10. DIGITAL SOVEREIGNTY
- Solved the puzzle of global fragmentation. Engineered systems that allow a single platform to respect local laws in China and the EU without fracturing the product.
`;
</file>

<file path="app/gems/artisan.ts">
export const GEM_ARTISAN = `
IDENTITY: You are The Artisan. A world-class Executive Portfolio Architect.

MANDATE:
1. **THE HYBRID FORMAT:** Combine chronological clarity with functional "Signature Achievements."
2. **QUANTIFY THE INTANGIBLE:** Every claim needs a metric (Risk, Revenue, Cost).
3. **VISUALIZE STRATEGY:** Think in "System Maps" and "Before/After" states.

NARRATIVE STRUCTURE (SCR METHOD):
For every bullet point or case study, use the **S.C.R.** pattern:
- **S (Situation):** The context (e.g., "50PB of fragmented data").
- **C (Complication):** The risk/blocker (e.g., "GDPR fines imminent, legacy stack too slow").
- **R (Resolution):** The strategic fix (e.g., "Architected federated mesh, 100% compliance").

OUTPUT FORMAT (JSON ONLY):
{
  "fullName": "Jonathan William Marino",
  "title": "Tech Lead for Policy @ Google | Digital Strategy Architect",
  "contact": "jwm.digital | linkedin.com/in/jwmdigital",
  "summary": "A 3-sentence 'Hook' rewriting the bio. Must blend Functional Expertise with Industry Foresight.",
  "skills": ["High-Level Strategy Keywords", "NIST AI RMF", "Data Liquidity", "Crisis Management"],
  "experience": [
    {
      "title": "Role Title",
      "company": "Company Name",
      "date": "Dates",
      "bullets": [
        "**Strategic Header:** The S.C.R. narrative bullet with metrics."
      ]
    }
  ]
}

CRITICAL RULE:
- If the user provides "Live Portfolio Data" (from the Builder), prioritize that over the Static Identity.
- Re-order the experience to place the most relevant "SCR" stories at the top based on the Scout's analysis.
`;
</file>

<file path="app/gems/identity.ts">
export const GEM_IDENTITY = `
NAME: Jonathan William Marino
ROLE: Tech Lead & Data Strategy Architect (Policy) @ Google
TAGLINE: "Architecting Global Integrity Infrastructure."
CORE NARRATIVE: "The Runaway Engineer." Moving from output (code) to outcome (policy/revenue).

---

1. THE STRATEGIC MANDATE
   - **Mission:** Bridging the gap between Boardroom Strategy and Backend Reality.
   - **Superpower:** "Polymathic Synthesis." Combining hard Engineering (SQL/Cloud), soft Strategy (Policy/Risk), and Creative Intelligence (Motion/UX).
   - **Philosophy:** "I don't just enforce policy; I architect the data meshes that make integrity frictionless."

---

2. PILLAR I: GLOBAL POLICY & RISK ARCHITECTURE (The Shield)
   - **Global Policy Data Mesh:** Architected massively parallel mesh for EU/Asia/US markets. Achieved 30% risk reduction (€20M fine avoidance).
   - **TRACE Methodology:** Engineered graph-based account explorer for fraud detection. Reduced manual review by 40% (~10k hours saved).
   - **DSA Response:** Led cross-functional task force for Digital Services Act transparency. 100% compliance rate.
   - **Election Integrity:** Deployed real-time "War Room" dashboards. Reduced Mean-Time-To-Detect (MTTD) to <15 minutes.
   - **Child Safety (COPPA/AADC):** Architected age-gating pipelines. 0 compliance breach incidents.
   - **Incident Response (SRE):** Instituted blameless post-mortems. Reduced MTTR by 50% for SEV1 outages.

3. PILLAR II: AI & OPERATIONAL VELOCITY (The Lever)
   - **Ethical AI Governance:** Operationalized "Human-in-the-Loop" logic (NIST AI RMF). Reduced false positives by 15%, retained $5M LTV.
   - **SlideSense App:** Built GenAI tool for collateral assessment. 100% Strategy & UI/UX ownership.
   - **AI-Enhanced Reporting:** Automating period-over-period analysis. Reduced latency from 20 hours to 5 minutes.
   - **Internal Keyword Theming Tool (IKTT):** Created using Google Ads API. Potential to save 20,000 vendor hours annually.
   - **Billing Team Enablement:** Automated reporting to save 15 hrs/wk. 90% DataSite adoption.

4. PILLAR III: DATA STRATEGY & FINOPS (The Engine)
   - **SSoT Data Ecosystem:** Spearheaded Single Source of Truth strategy for gTech & T&S. 100% adoption.
   - **Cloud Cost Optimization:** Implemented BigQuery slot governance. $500k annualized OpEx savings.
   - **Customer 360 View:** Unified data streams into a "Golden Record." 100% Data Completeness.
   - **Parent-Child Case Mapping:** Engineered novel mapping solution. >95% accuracy, eliminating data silos.
   - **Merchant Revenue Pipeline:** Quantified revenue impact for appeals. 100% coverage for decision support.
   - **Data Democratization:** Built "Data University" for 200+ stakeholders.

5. PILLAR IV: ORGANIZATIONAL LEADERSHIP & SCALE (The Founder)
   - **Creative Production Works:** Founded internal startup. Scaled to $15M revenue run rate, 50 staff.
   - **Global Ops & Vetting:** Unified security framework across India, EU, NA. 100% vendor compliance.
   - **Vendor Consolidation:** Streamlined to top 5 partners. 15% procurement savings.
   - **Talent Retention:** Designed career ladders reducing attrition by 25%.
   - **OKR Alignment:** Facilitated joint planning for 100% strategic alignment.

6. PILLAR V: CREATIVE INTELLIGENCE (The Root)
   - **Oddcast / Viral Marketing:** Designed high-availability architecture for "E-Trade Babies" (100M+ impressions).
   - **Dynamic Creative Optimization:** Built real-time DCO pipeline. 2x CTR lift, $2M revenue lift.
   - **Mobile Performance:** Implemented adaptive streaming. 40% faster load times.

---

7. EXECUTIVE DIALECT (KEYWORDS)
   - **Governance:** "Digital Sovereignty," "Regulatory Risk," "Compliance Architecture."
   - **Financial:** "Capital Efficiency," "OpEx Savings," "Revenue Retention," "LTV."
   - **Technical:** "Data Mesh," "Graph Analysis," "NIST AI RMF," "BigQuery," "Microservices."
   - **Leadership:** "Intrapreneurship," "Cross-Functional Alignment," "Decision Velocity."
`;
</file>

<file path="app/gems/scout.ts">
export const GEM_SCOUT = `
IDENTITY: You are The Scout. A cynical, risk-obsessed Board Advisor (CTO/risk-profile).

GOAL: Scan news/context for "The Boardroom Headache."

ANALYTICAL FRAMEWORKS (USE THESE FILTERS):

1. **THE "SUPERAGENCY" SHIFT (Workforce Risk)**
   - Does this news imply a need to redesign the org chart for AI agents?
   - *Opportunity:* Pitch "Organizational Design" and "Human-in-the-Loop" governance.

2. **REGULATORY SOVEREIGNTY (Compliance Risk)**
   - Is this about GDPR, EU AI Act, or Data Localization (Splinternet)?
   - *Opportunity:* Pitch "Global Policy Data Mesh" and "Fine Avoidance."

3. **THE "OUTPUT TRAP" (Efficiency Risk)**
   - Is the company shipping code but losing money?
   - *Opportunity:* Pitch "Capital Efficiency" and "Cloud Cost Optimization" (FinOps).

4. **REPUTATIONAL FRAGILITY (Brand Risk)**
   - Deepfakes, Cancel Culture, Algorithmic Bias?
   - *Opportunity:* Pitch "Ethical AI Governance" (NIST AI RMF) and "Brand Safety."

OUTPUT TASK:
Ignore tactical news (new iPhone release).
Find the **STRATEGIC THREAT** or **CAPITAL OPPORTUNITY**.
`;
</file>

<file path="app/gems/synthesizer.ts">
export const GEM_SYNTHESIZER = `
IDENTITY: You are the Neural Bridge.
GOAL: Connect a specific "News Event" to a specific "Resume Capability" from Jonathan's library.

INPUT:
1. NEWS HEADLINE: [Live Data]
2. RESUME DATABASE: [List of 22 Strategic Cards]

LOGIC:
- If News is about "AI Regulation" -> Match with "SlideSense" or "Ethical AI Governance".
- If News is about "Cost Cutting" -> Match with "Cloud Cost Optimization".
- If News is about "Global Expansion" -> Match with "Global Ops & Vetting".

OUTPUT (JSON):
{
  "match_score": 95,
  "connection_logic": "The rise in AI regulation directly validates Jonathan's work on Human-in-the-Loop governance.",
  "matched_resume_id": "ID_OF_CARD"
}
`;
</file>

<file path="public/file.svg">
<svg fill="none" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M14.5 13.5V5.41a1 1 0 0 0-.3-.7L9.8.29A1 1 0 0 0 9.08 0H1.5v13.5A2.5 2.5 0 0 0 4 16h8a2.5 2.5 0 0 0 2.5-2.5m-1.5 0v-7H8v-5H3v12a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1M9.5 5V2.12L12.38 5zM5.13 5h-.62v1.25h2.12V5zm-.62 3h7.12v1.25H4.5zm.62 3h-.62v1.25h7.12V11z" clip-rule="evenodd" fill="#666" fill-rule="evenodd"/></svg>
</file>

<file path="public/globe.svg">
<svg fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><g clip-path="url(#a)"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.27 14.1a6.5 6.5 0 0 0 3.67-3.45q-1.24.21-2.7.34-.31 1.83-.97 3.1M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16m.48-1.52a7 7 0 0 1-.96 0H7.5a4 4 0 0 1-.84-1.32q-.38-.89-.63-2.08a40 40 0 0 0 3.92 0q-.25 1.2-.63 2.08a4 4 0 0 1-.84 1.31zm2.94-4.76q1.66-.15 2.95-.43a7 7 0 0 0 0-2.58q-1.3-.27-2.95-.43a18 18 0 0 1 0 3.44m-1.27-3.54a17 17 0 0 1 0 3.64 39 39 0 0 1-4.3 0 17 17 0 0 1 0-3.64 39 39 0 0 1 4.3 0m1.1-1.17q1.45.13 2.69.34a6.5 6.5 0 0 0-3.67-3.44q.65 1.26.98 3.1M8.48 1.5l.01.02q.41.37.84 1.31.38.89.63 2.08a40 40 0 0 0-3.92 0q.25-1.2.63-2.08a4 4 0 0 1 .85-1.32 7 7 0 0 1 .96 0m-2.75.4a6.5 6.5 0 0 0-3.67 3.44 29 29 0 0 1 2.7-.34q.31-1.83.97-3.1M4.58 6.28q-1.66.16-2.95.43a7 7 0 0 0 0 2.58q1.3.27 2.95.43a18 18 0 0 1 0-3.44m.17 4.71q-1.45-.12-2.69-.34a6.5 6.5 0 0 0 3.67 3.44q-.65-1.27-.98-3.1" fill="#666"/></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h16v16H0z"/></clipPath></defs></svg>
</file>

<file path="public/next.svg">
<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 394 80"><path fill="#000" d="M262 0h68.5v12.7h-27.2v66.6h-13.6V12.7H262V0ZM149 0v12.7H94v20.4h44.3v12.6H94v21h55v12.6H80.5V0h68.7zm34.3 0h-17.8l63.8 79.4h17.9l-32-39.7 32-39.6h-17.9l-23 28.6-23-28.6zm18.3 56.7-9-11-27.1 33.7h17.8l18.3-22.7z"/><path fill="#000" d="M81 79.3 17 0H0v79.3h13.6V17l50.2 62.3H81Zm252.6-.4c-1 0-1.8-.4-2.5-1s-1.1-1.6-1.1-2.6.3-1.8 1-2.5 1.6-1 2.6-1 1.8.3 2.5 1a3.4 3.4 0 0 1 .6 4.3 3.7 3.7 0 0 1-3 1.8zm23.2-33.5h6v23.3c0 2.1-.4 4-1.3 5.5a9.1 9.1 0 0 1-3.8 3.5c-1.6.8-3.5 1.3-5.7 1.3-2 0-3.7-.4-5.3-1s-2.8-1.8-3.7-3.2c-.9-1.3-1.4-3-1.4-5h6c.1.8.3 1.6.7 2.2s1 1.2 1.6 1.5c.7.4 1.5.5 2.4.5 1 0 1.8-.2 2.4-.6a4 4 0 0 0 1.6-1.8c.3-.8.5-1.8.5-3V45.5zm30.9 9.1a4.4 4.4 0 0 0-2-3.3 7.5 7.5 0 0 0-4.3-1.1c-1.3 0-2.4.2-3.3.5-.9.4-1.6 1-2 1.6a3.5 3.5 0 0 0-.3 4c.3.5.7.9 1.3 1.2l1.8 1 2 .5 3.2.8c1.3.3 2.5.7 3.7 1.2a13 13 0 0 1 3.2 1.8 8.1 8.1 0 0 1 3 6.5c0 2-.5 3.7-1.5 5.1a10 10 0 0 1-4.4 3.5c-1.8.8-4.1 1.2-6.8 1.2-2.6 0-4.9-.4-6.8-1.2-2-.8-3.4-2-4.5-3.5a10 10 0 0 1-1.7-5.6h6a5 5 0 0 0 3.5 4.6c1 .4 2.2.6 3.4.6 1.3 0 2.5-.2 3.5-.6 1-.4 1.8-1 2.4-1.7a4 4 0 0 0 .8-2.4c0-.9-.2-1.6-.7-2.2a11 11 0 0 0-2.1-1.4l-3.2-1-3.8-1c-2.8-.7-5-1.7-6.6-3.2a7.2 7.2 0 0 1-2.4-5.7 8 8 0 0 1 1.7-5 10 10 0 0 1 4.3-3.5c2-.8 4-1.2 6.4-1.2 2.3 0 4.4.4 6.2 1.2 1.8.8 3.2 2 4.3 3.4 1 1.4 1.5 3 1.5 5h-5.8z"/></svg>
</file>

<file path="public/vercel.svg">
<svg fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1155 1000"><path d="m577.3 0 577.4 1000H0z" fill="#fff"/></svg>
</file>

<file path="public/window.svg">
<svg fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M1.5 2.5h13v10a1 1 0 0 1-1 1h-11a1 1 0 0 1-1-1zM0 1h16v11.5a2.5 2.5 0 0 1-2.5 2.5h-11A2.5 2.5 0 0 1 0 12.5zm3.75 4.5a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5M7 4.75a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0m1.75.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5" fill="#666"/></svg>
</file>

<file path=".gitignore">
# See https://help.github.com/articles/ignoring-files/ for more about ignoring files.

# dependencies
/node_modules
/.pnp
.pnp.*
.yarn/*
!.yarn/patches
!.yarn/plugins
!.yarn/releases
!.yarn/versions

# testing
/coverage

# next.js
/.next/
/out/

# production
/build

# misc
.DS_Store
*.pem

# debug
npm-debug.log*
yarn-debug.log*
yarn-error.log*
.pnpm-debug.log*

# env files (can opt-in for committing if needed)
.env*

# vercel
.vercel

# typescript
*.tsbuildinfo
next-env.d.ts
.env
.env.local
.DS_Store
</file>

<file path="deploy.sh">
#!/bin/bash

# Increment the patch version in package.json (e.g., 0.1.0 -> 0.1.1)
# This uses npm's built-in version tool (no git tag created to keep it simple)
npm version patch --no-git-tag-version

# Extract the new version to show the user
NEW_VERSION=$(node -p "require('./package.json').version")
echo "🚀 Deploying Version $NEW_VERSION to Vercel Production..."

# Run the Vercel deployment
npx vercel --prod
</file>

<file path="eslint.config.mjs">
import { defineConfig, globalIgnores } from "eslint/config";
import nextVitals from "eslint-config-next/core-web-vitals";
import nextTs from "eslint-config-next/typescript";

const eslintConfig = defineConfig([
  ...nextVitals,
  ...nextTs,
  // Override default ignores of eslint-config-next.
  globalIgnores([
    // Default ignores of eslint-config-next:
    ".next/**",
    "out/**",
    "build/**",
    "next-env.d.ts",
  ]),
]);

export default eslintConfig;
</file>

<file path="next.config.ts">
import type { NextConfig } from "next";

const nextConfig: NextConfig = {
  /* config options here */
};

export default nextConfig;
</file>

<file path="postcss.config.mjs">
const config = {
  plugins: {
    "@tailwindcss/postcss": {},
  },
};

export default config;
</file>

<file path="README.md">
This is a [Next.js](https://nextjs.org) project bootstrapped with [`create-next-app`](https://nextjs.org/docs/app/api-reference/cli/create-next-app).

## Getting Started

First, run the development server:

```bash
npm run dev
# or
yarn dev
# or
pnpm dev
# or
bun dev
```

Open [http://localhost:3000](http://localhost:3000) with your browser to see the result.

You can start editing the page by modifying `app/page.tsx`. The page auto-updates as you edit the file.

This project uses [`next/font`](https://nextjs.org/docs/app/building-your-application/optimizing/fonts) to automatically optimize and load [Geist](https://vercel.com/font), a new font family for Vercel.

## Learn More

To learn more about Next.js, take a look at the following resources:

- [Next.js Documentation](https://nextjs.org/docs) - learn about Next.js features and API.
- [Learn Next.js](https://nextjs.org/learn) - an interactive Next.js tutorial.

You can check out [the Next.js GitHub repository](https://github.com/vercel/next.js) - your feedback and contributions are welcome!

## Deploy on Vercel

The easiest way to deploy your Next.js app is to use the [Vercel Platform](https://vercel.com/new?utm_medium=default-template&filter=next.js&utm_source=create-next-app&utm_campaign=create-next-app-readme) from the creators of Next.js.

Check out our [Next.js deployment documentation](https://nextjs.org/docs/app/building-your-application/deploying) for more details.
</file>

<file path="tsconfig.json">
{
  "compilerOptions": {
    "target": "ES2017",
    "lib": ["dom", "dom.iterable", "esnext"],
    "allowJs": true,
    "skipLibCheck": true,
    "strict": true,
    "noEmit": true,
    "esModuleInterop": true,
    "module": "esnext",
    "moduleResolution": "bundler",
    "resolveJsonModule": true,
    "isolatedModules": true,
    "jsx": "react-jsx",
    "incremental": true,
    "plugins": [
      {
        "name": "next"
      }
    ],
    "paths": {
      "@/*": ["./*"]
    }
  },
  "include": [
    "next-env.d.ts",
    "**/*.ts",
    "**/*.tsx",
    ".next/types/**/*.ts",
    ".next/dev/types/**/*.ts",
    "**/*.mts"
  ],
  "exclude": ["node_modules"]
}
</file>

<file path="app/api/generate-resume/route.ts">
import { GoogleGenerativeAI } from "@google/generative-ai";
import { NextResponse } from "next/server";
import { GEM_IDENTITY } from "../../gems/identity";
import { GEM_ARTISAN } from "../../gems/artisan";
import { GEM_SCOUT } from "../../gems/scout";

export const runtime = 'edge';

const genAI = new GoogleGenerativeAI(process.env.GEMINI_API_KEY || "");
// UPGRADE: Using 2.5 Flash
const model = genAI.getGenerativeModel({ model: "gemini-2.5-flash" });

export async function POST(req: Request) {
    try {
        const { fullContext, userPortfolio } = await req.json();
        
        let dynamicIdentity = GEM_IDENTITY;
        if (userPortfolio && userPortfolio.length > 0) {
            const builderData = userPortfolio.map((entry: any) => `
            - PROJECT: ${entry.project} (${entry.role})
              - IMPACT: ${entry.enhancedBullet}
              - METRICS: ${entry.metricValue} ${entry.metricName}
            `).join("\n");
            dynamicIdentity += `\n\n--- LIVE BUILDER DATA ---\n${builderData}`;
        }

        const newsContext = fullContext?.items?.slice(0, 3).map((i: any) => i.articleTitle).join("\n") || "General Tech Context";

        const strategyPrompt = `
        ${GEM_SCOUT}
        LIVE NEWS: ${newsContext}
        PROFILE: ${dynamicIdentity}
        TASK: Identify the strategic angle.
        `;
        const strategyResp = await model.generateContent(strategyPrompt);

        const buildPrompt = `
        ${GEM_ARTISAN}
        STRATEGY: ${strategyResp.response.text()}
        SOURCE: ${dynamicIdentity}
        TASK: Generate JSON Portfolio.
        `;
        const buildResp = await model.generateContent({
            contents: [{ role: "user", parts: [{ text: buildPrompt }] }],
            generationConfig: { responseMimeType: "application/json" }
        });

        return NextResponse.json(JSON.parse(buildResp.response.text()));

    } catch (error) {
        return NextResponse.json({ error: "Generation Failed" }, { status: 500 });
    }
}
</file>

<file path="app/api/live-agent/route.ts">
import { GoogleGenerativeAI } from "@google/generative-ai";
import { NextResponse } from "next/server";
import { MASTER_GEMS } from "../../data/master_gems";

export const runtime = 'edge';

const genAI = new GoogleGenerativeAI(process.env.GEMINI_API_KEY || "");
// UPGRADE: Using 2.5 Flash
const model = genAI.getGenerativeModel({ model: "gemini-2.5-flash" });

async function getMarketSignals() {
  try {
    const topIdsRes = await fetch('https://hacker-news.firebaseio.com/v0/topstories.json', { next: { revalidate: 0 } });
    const topIds = await topIdsRes.json();
    const selectedIds = topIds.slice(0, 30);
    const newsPromises = selectedIds.map((id: number) => fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(res => res.json()));
    const rawStories = await Promise.all(newsPromises);
    return rawStories.map((s: any) => s.title).filter(Boolean).join("\n");
  } catch (e) { return "Tech sector facing regulatory headwinds and AI scaling challenges."; }
}

export async function POST(req: Request) {
  try {
    const { userPortfolio } = await req.json();
    const portfolioToUse = (userPortfolio && userPortfolio.length > 0) ? userPortfolio : MASTER_GEMS;
    const marketNoise = await getMarketSignals();

    const prompt = `
    ROLE: Chief Strategy Officer.
    INPUT 1: LIVE NEWS: ${marketNoise}
    INPUT 2: CAPABILITIES: ${JSON.stringify(portfolioToUse.map((p: any) => ({id: p.id, project: p.project, metrics: p.metricValue})))}

    TASK: Identify ONE Macro Trend and match it to ONE Portfolio Project.
    OUTPUT JSON ARRAY: [{ "trend": "...", "root_cause": "...", "matched_project_id": 1, "strategic_rationale": "..." }]
    `;

    const result = await model.generateContent({
        contents: [{ role: "user", parts: [{ text: prompt }] }],
        generationConfig: { responseMimeType: "application/json" }
    });
    
    const analysis = JSON.parse(result.response.text())[0];
    const gem = portfolioToUse.find((p: any) => p.id === analysis.matched_project_id) || portfolioToUse[0];

    return NextResponse.json({ 
        items: [{
            id: `TREND_${Date.now()}`,
            isLive: true,
            title: analysis.trend,
            sourceName: "LIVE_MARKET_SYNTHESIS",
            sourceDate: new Date().toLocaleDateString(),
            problem: analysis.root_cause,
            project: gem.project,
            metrics: `${gem.metricValue} ${gem.metricName}`,
            description: analysis.strategic_rationale,
            stack: gem.industryStandards
        }]
    });
    
  } catch (error) {
    return NextResponse.json({ items: [] });
  }
}
</file>

<file path="app/components/brain/HeroCard.tsx">
import React, { useEffect, useState, useRef, forwardRef } from 'react';
import { 
  Fingerprint, ExternalLink, Lightbulb, User, Pause, Activity, Calendar, MousePointer2, PauseCircle
} from 'lucide-react';
import { NarrativeCard } from './NeuralData';
import { SwarmEngine } from './SwarmEngine';

// CardModule: Ref is now attached DIRECTLY to the visible connector bar
const CardModule = forwardRef(({ title, children, color, isVisible, delay, glow, date, link }: any, ref: any) => {
    return (
        <div 
            style={{ 
                background: `rgba(15, 23, 42, 0.9)`,
                borderLeft: "4px solid " + color,
                borderTop: '1px solid rgba(255,255,255,0.05)',
                borderRight: '1px solid rgba(255,255,255,0.05)',
                borderBottom: '1px solid rgba(255,255,255,0.05)',
                borderRadius: '0 12px 12px 0',
                marginBottom: '16px',
                opacity: isVisible ? 1 : 0,
                transform: isVisible ? 'translateX(0)' : 'translateX(-20px)',
                transition: "all 0.8s cubic-bezier(0.34, 1.56, 0.64, 1) " + delay + "ms",
                boxShadow: isVisible ? "0 4px 30px " + color + (glow ? "40" : "10") : "none",
                position: 'relative'
            }}
            className="w-full p-4 md:p-5"
        >
            <div className="flex justify-between items-start mb-2">
                <div style={{ fontSize: '10px', fontWeight: 700, color: color, textTransform: 'uppercase', letterSpacing: '1px', display: 'flex', alignItems: 'center', gap: '6px' }}>
                    {glow && <div className="w-2 h-2 rounded-full bg-red-500 animate-pulse"></div>}
                    {title}
                </div>
                {date && (
                    <div className={"text-[10px] font-mono flex items-center gap-1 " + (glow ? 'text-red-400' : 'text-slate-500')}>
                        <Calendar size={10} />
                        {date}
                    </div>
                )}
            </div>
            
            <div>{children}</div>
            
            {link && (
                <a 
                    href={link} 
                    target="_blank" 
                    rel="noreferrer"
                    className="absolute top-4 right-4 group"
                >
                    <div className={"p-2 rounded-full transition-all " + (glow ? 'bg-red-500/10 hover:bg-red-500/30 text-red-400' : 'bg-blue-500/10 hover:bg-blue-500/30 text-blue-400')}>
                        <ExternalLink size={16} />
                    </div>
                </a>
            )}
            
            {/* 1. VISUAL CONNECTOR BAR (Now also acts as the Anchor) */}
            {/* We attach the Ref here directly to ensure coordinates match the visible element exactly */}
            <div 
                ref={ref}
                style={{ 
                    position: 'absolute', 
                    top: '50%', 
                    right: '-4px', 
                    width: '4px', 
                    height: '12px', 
                    marginTop: '-6px', 
                    background: color, 
                    borderRadius: '2px',
                    opacity: isVisible ? 1 : 0, 
                    transition: 'opacity 1s'
                }} 
            />
        </div>
    )
});

CardModule.displayName = "CardModule";

interface HeroProps {
    content: NarrativeCard;
    engine: SwarmEngine | null;
}

const HeroContainer: React.FC<HeroProps> = ({ content, engine }) => {
    const [activeContent, setActiveContent] = useState<NarrativeCard | null>(null);
    const [visible, setVisible] = useState([false, false, false, false]);
    const [isHovered, setIsHovered] = useState(false);
    
    // Refs attached to the specific ANCHOR points inside the cards
    const card1Ref = useRef<HTMLDivElement>(null);
    const card2Ref = useRef<HTMLDivElement>(null);
    const card3Ref = useRef<HTMLDivElement>(null);
    const card4Ref = useRef<HTMLDivElement>(null);
    
    const isHoveredRef = useRef(false);
    const timerRef = useRef<NodeJS.Timeout | null>(null);
    const timeoutsRef = useRef<NodeJS.Timeout[]>([]);

    useEffect(() => { isHoveredRef.current = isHovered; }, [isHovered]);
    
    useEffect(() => {
        if (!engine) return;
        
        let rafId: number;
        
        const updateTargets = () => {
            const refs = [card1Ref, card2Ref, card3Ref, card4Ref];
            // Get the bounding rect of the visible anchor bar
            const rects = refs.map(r => r.current?.getBoundingClientRect() || new DOMRect(0,0,0,0));
            
            // We pass the anchor rects directly. SwarmEngine will target their center.
            if (rects[0] && rects[0].top !== 0) {
                engine.setTargets(rects);
            }
            
            rafId = requestAnimationFrame(updateTargets);
        };
        
        rafId = requestAnimationFrame(updateTargets);
        return () => cancelAnimationFrame(rafId);
    }, [engine, content]);

    // --- STRICT CONTENT SWAPPING LOGIC ---
    useEffect(() => {
        if (timerRef.current) clearTimeout(timerRef.current);
        
        timeoutsRef.current.forEach(clearTimeout);
        timeoutsRef.current = [];

        if (content.id !== activeContent?.id) {
            if (!activeContent) {
                setActiveContent(content);
                startEnterSequence();
            } else {
                startExitSequence().then(() => {
                    setActiveContent(content);
                    startEnterSequence();
                });
            }
        }
    }, [content]);

    const startEnterSequence = () => {
        setVisible([false, false, false, false]);
        const t1 = setTimeout(() => setVisible(v => [true, false, false, false]), 100); 
        const t2 = setTimeout(() => setVisible(v => [true, true, false, false]), 600); 
        const t3 = setTimeout(() => setVisible(v => [true, true, true, false]), 1100); 
        const t4 = setTimeout(() => setVisible(v => [true, true, true, true]), 1600);
        
        timeoutsRef.current.push(t1, t2, t3, t4);
        
        const cycleT = setTimeout(checkCycleCondition, 12000);
        timerRef.current = cycleT;
    };

    const startExitSequence = () => {
        return new Promise<void>(resolve => {
            setVisible([false, false, false, false]); 
            const t = setTimeout(resolve, 500); 
            timeoutsRef.current.push(t);
        });
    };

    const checkCycleCondition = () => {
        if (!isHoveredRef.current) {
            if (engine) engine.cycleNextNode();
        } else {
            const t = setTimeout(checkCycleCondition, 1000);
            timerRef.current = t;
        }
    };

    if (!activeContent) return null;

    const Icon = activeContent.icon || User;
    let themeColor = '#10b981'; 
    let isLive = false;

    if (activeContent.category === 'live') {
        themeColor = '#ef4444'; 
        isLive = true;
    } else if (activeContent.category === 'bio') {
        themeColor = '#eab308'; 
    }

    const primaryLink = activeContent.context.sources.length > 0 ? activeContent.context.sources[0].url : null;

    return (
        <div 
            className="absolute top-1/2 -translate-y-1/2 z-20 flex flex-col left-4 right-4 md:left-[60px] md:right-auto md:w-[500px]"
            onMouseEnter={() => setIsHovered(true)}
            onMouseLeave={() => setIsHovered(false)}
        >
            <CardModule ref={card1Ref} title={activeContent.category === 'live' ? "LIVE_INTERCEPT" : "IDENTITY_SIGNAL"} color={themeColor} isVisible={visible[0]} delay={0} glow={isLive} date={activeContent.context.date}>
                <div className="flex items-center gap-3">
                    <div className={"p-2 rounded border " + (isLive ? 'bg-red-950/50 border-red-500/50' : 'bg-slate-800 border-slate-700')}>
                        <Icon className="w-5 h-5 md:w-6 md:h-6 text-white" />
                    </div>
                    <div className="pr-2 md:pr-8">
                        <h2 className="text-lg md:text-xl font-bold text-white leading-tight">{activeContent.headline.title}</h2>
                        <p className="text-[10px] md:text-xs text-slate-400 mt-1 font-mono">{activeContent.headline.subtitle}</p>
                    </div>
                </div>
            </CardModule>

            <CardModule ref={card2Ref} title={activeContent.context.label} color={themeColor} isVisible={visible[1]} delay={0} link={isLive ? primaryLink : null}>
                <p className="text-xs md:text-sm text-slate-300 mb-3 leading-relaxed pr-6">{activeContent.context.description}</p>
                <div className="flex gap-2 flex-wrap">
                    {!isLive && activeContent.context.sources.map((s, i) => (
                        <a key={i} href={s.url} target="_blank" rel="noreferrer" 
                           className="px-2 py-1 bg-blue-900/30 border border-blue-500/30 rounded text-[10px] text-blue-300 hover:bg-blue-900/50 transition-colors flex items-center gap-1">
                            <ExternalLink size={8}/> {s.label}
                        </a>
                    ))}
                    {isLive && (
                        <span className="text-[10px] text-red-400 font-mono flex items-center gap-1">
                            <Activity size={10} /> SOURCE VERIFIED
                        </span>
                    )}
                </div>
            </CardModule>

            <CardModule ref={card3Ref} title={activeContent.insight.label} color={themeColor} isVisible={visible[2]} delay={0}>
                 <div className="flex items-start gap-3">
                     <div className={"mt-1 " + (isLive ? 'text-red-500' : 'text-amber-500')}><Lightbulb size={16} /></div>
                     <p className="text-xs md:text-sm text-slate-200 leading-relaxed">
                         {activeContent.insight.explanation}
                     </p>
                 </div>
            </CardModule>

            <CardModule ref={card4Ref} title={activeContent.experience.label} color={themeColor} isVisible={visible[3]} delay={0}>
                <div className={"rounded p-3 border " + (isLive ? 'bg-red-950/20 border-red-500/20' : 'bg-emerald-950/30 border-emerald-500/20')}>
                     <div className="flex justify-between items-center mb-2">
                         <span className={"text-[10px] md:text-xs font-bold " + (isLive ? 'text-red-400' : 'text-emerald-400')}>{activeContent.experience.role}</span>
                         <span className={"text-[10px] px-2 py-0.5 rounded " + (isLive ? 'bg-red-500/20 text-red-300' : 'bg-emerald-500/20 text-emerald-300')}>
                             {activeContent.experience.result}
                         </span>
                     </div>
                     <p className="text-[10px] md:text-xs text-slate-300 mb-2">{activeContent.experience.action}</p>
                     <div className="flex gap-1 flex-wrap">
                         {activeContent.experience.tags.map(t => (
                             <span key={t} className="text-[9px] text-slate-500 border border-slate-700 px-1.5 rounded">{t}</span>
                         ))}
                     </div>
                </div>
            </CardModule>
            
            <div className="mt-4 flex items-center gap-3 animate-in fade-in duration-700 pl-1">
                <div className={"flex items-center gap-2 px-3 py-1.5 rounded-full border backdrop-blur-md text-[10px] font-mono tracking-widest uppercase transition-all " + (
                    isHovered 
                    ? 'bg-red-500/10 border-red-500/50 text-red-400 shadow-[0_0_15px_rgba(220,38,38,0.4)]' 
                    : 'bg-slate-900/50 border-slate-700/50 text-slate-500'
                )}>
                    {isHovered ? (
                        <><PauseCircle size={12} className="animate-pulse" />System Paused</>
                    ) : (
                        <><MousePointer2 size={12} />Hover to Pause</>
                    )}
                </div>
                
                {!isHovered && (
                    <div className="h-0.5 bg-slate-800 w-16 md:w-24 rounded-full overflow-hidden">
                        <div 
                            key={activeContent.id} 
                            className="h-full bg-slate-500/50 animate-progress origin-left"
                        ></div>
                    </div>
                )}
            </div>
            <style jsx>{`
                @keyframes progress {
                    0% { width: 0% }
                    100% { width: 100% }
                }
                .animate-progress {
                    animation: progress 12s linear forwards;
                }
            `}</style>
        </div>
    );
};

export default HeroContainer;
</file>

<file path="app/components/brain/MathUtils.ts">
export class Vector3D {
  constructor(public x: number, public y: number, public z: number) {}
  set(x: number, y: number, z: number) { this.x = x; this.y = y; this.z = z; return this; }
  clone() { return new Vector3D(this.x, this.y, this.z); }
  move(dest: Vector3D) { dest.x = this.x; dest.y = this.y; dest.z = this.z; return this; }
  add(other: Vector3D) { this.x += other.x; this.y += other.y; this.z += other.z; return this; }
  sub(other: Vector3D) { this.x -= other.x; this.y -= other.y; this.z -= other.z; return this; }
  mul(scalar: number) { this.x *= scalar; this.y *= scalar; this.y *= scalar; return this; }
  div(scalar: number) { this.x /= scalar; this.y /= scalar; this.z /= scalar; return this; }
  dist(other: Vector3D) { const dx = this.x - other.x; const dy = this.y - other.y; return Math.sqrt(dx * dx + dy * dy); }
  dot3d(x: number, y: number, z: number) { return this.x * x + this.y * y + this.z * z; }
}

export class Perlin {
  perm: number[]; grad3: number[][];
  constructor() {
    this.perm = new Array(512);
    this.grad3 = [[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]];
    this.init();
  }
  init() {
    const p = new Array(256).fill(0).map((_, i) => i);
    for (let i = 255; i > 0; i--) {
      const r = Math.floor(Math.random() * (i + 1));
      [p[i], p[r]] = [p[r], p[i]];
    }
    for (let i = 0; i < 512; i++) this.perm[i] = p[i & 255];
  }
  dot(g: number[], x: number, y: number, z: number) { return g[0]*x + g[1]*y + g[2]*z; }
  simplex3d(xin: number, yin: number, zin: number) {
    let n0, n1, n2, n3;
    const F3 = 1.0/3.0; const s = (xin+yin+zin)*F3;
    const i = Math.floor(xin+s); const j = Math.floor(yin+s); const k = Math.floor(zin+s);
    const G3 = 1.0/6.0; const t = (i+j+k)*G3;
    const X0 = i-t; const Y0 = j-t; const Z0 = k-t;
    const x0 = xin-X0; const y0 = yin-Y0; const z0 = zin-Z0;
    let i1, j1, k1, i2, j2, k2;
    if(x0>=y0) { if(y0>=z0) { i1=1; j1=0; k1=0; i2=1; j2=1; k2=0; } else if(x0>=z0) { i1=1; j1=0; k1=0; i2=1; j2=0; k2=1; } else { i1=0; j1=0; k1=1; i2=1; j2=0; k2=1; } }
    else { if(y0<z0) { i1=0; j1=0; k1=1; i2=0; j2=1; k2=1; } else if(x0<z0) { i1=0; j1=1; k1=0; i2=0; j2=1; k2=1; } else { i1=0; j1=1; k1=0; i2=1; j2=1; k2=0; } }
    const x1 = x0 - i1 + G3; const y1 = y0 - j1 + G3; const z1 = z0 - k1 + G3;
    const x2 = x0 - i2 + 2.0*G3; const y2 = y0 - j2 + 2.0*G3; const z2 = z0 - k2 + 2.0*G3;
    const x3 = x0 - 1.0 + 3.0*G3; const y3 = y0 - 1.0 + 3.0*G3; const z3 = z0 - 1.0 + 3.0*G3;
    const ii = i & 255; const jj = j & 255; const kk = k & 255;
    const gi0 = this.perm[ii+this.perm[jj+this.perm[kk]]] % 12;
    const gi1 = this.perm[ii+i1+this.perm[jj+j1+this.perm[kk+k1]]] % 12;
    const gi2 = this.perm[ii+i2+this.perm[jj+j2+this.perm[kk+k2]]] % 12;
    const gi3 = this.perm[ii+1+this.perm[jj+1+this.perm[kk+1]]] % 12;
    let t0 = 0.6 - x0*x0 - y0*y0 - z0*z0;
    if(t0<0) n0 = 0.0; else { t0 *= t0; n0 = t0 * t0 * this.dot(this.grad3[gi0], x0, y0, z0); }
    let t1 = 0.6 - x1*x1 - y1*y1 - z1*z1;
    if(t1<0) n1 = 0.0; else { t1 *= t1; n1 = t1 * t1 * this.dot(this.grad3[gi1], x1, y1, z1); }
    let t2 = 0.6 - x2*x2 - y2*y2 - z2*z2;
    if(t2<0) n2 = 0.0; else { t2 *= t2; n2 = t2 * t2 * this.dot(this.grad3[gi2], x2, y2, z2); }
    let t3 = 0.6 - x3*x3 - y3*y3 - z3*z3;
    if(t3<0) n3 = 0.0; else { t3 *= t3; n3 = t3 * t3 * this.dot(this.grad3[gi3], x3, y3, z3); }
    return 32.0*(n0 + n1 + n2 + n3);
  }
}
</file>

<file path="app/components/brain/NeuralBackground.tsx">
import React, { useEffect, useRef, useState } from 'react';
import { SwarmEngine } from './SwarmEngine';
import HeroContainer from './HeroCard';
import { narrativeData, NarrativeCard } from './NeuralData';
import { Activity, MousePointer2, Move } from 'lucide-react';
// Keep static import as initial state / fallback
import staticCache from '../../data/live_cache.json';

interface Props {
  active: boolean;
}

export const NeuralBackground: React.FC<Props> = ({ active }) => {
  const canvasRef = useRef<HTMLCanvasElement>(null);
  const engineRef = useRef<SwarmEngine | null>(null);
  
  const [cards, setCards] = useState<NarrativeCard[]>([]);
  const [contentIndex, setContentIndex] = useState(0);
  const [started, setStarted] = useState(false);

  // Data fetching logic
  useEffect(() => {
    async function loadData() {
      let rawData = staticCache; // Default to build-time data

      try {
        // Attempt to fetch fresh data from Vercel KV via our API
        const res = await fetch('/api/read-cache');
        if (res.ok) {
            const liveData = await res.json();
            if (Array.isArray(liveData) && liveData.length > 0) {
                rawData = liveData;
            }
        }
      } catch (e) {
        console.warn("Live fetch failed, using static cache.", e);
      }

      // Process the data
      const bioCard = narrativeData.find(n => n.category === 'bio');
      const portfolioCards = narrativeData.filter(n => n.category === 'portfolio').slice(0, 10);

      let liveCards: NarrativeCard[] = [];
      if (Array.isArray(rawData)) {
          const shuffled = [...rawData].sort(() => 0.5 - Math.random());
          liveCards = shuffled.slice(0, 10).map((item: any) => ({
              ...item,
              category: 'live',
              icon: Activity 
          }));
      }

      const merged: NarrativeCard[] = bioCard ? [bioCard] : [];
      const maxLen = Math.max(liveCards.length, portfolioCards.length);
      for(let i=0; i<maxLen; i++) {
          if(liveCards[i]) merged.push(liveCards[i]);
          if(portfolioCards[i]) merged.push(portfolioCards[i]);
      }

      setCards(merged);
    }

    loadData();
  }, []);

  // Engine Initialization
  useEffect(() => {
    if (!active) return;
    if (!canvasRef.current) return;
    if (cards.length === 0) return;

    const engine = new SwarmEngine(canvasRef.current, (id) => {
        setContentIndex(id);
        setStarted(true); 
    }, cards); 
    
    engineRef.current = engine;

    const handleResize = () => engine.resize();
    window.addEventListener('resize', handleResize);
    
    return () => {
        window.removeEventListener('resize', handleResize);
        engine.dispose();
    };
  }, [active, cards]);

  return (
    // FIXED: Changed from 'relative' to 'fixed inset-0' to ignore parent padding
    <div className="fixed inset-0 bg-[#02040a] overflow-hidden z-0">
      
      {/* BOTTOM RIGHT LEGEND */}
      <div 
         className={`fixed bottom-8 right-8 z-50 text-right pointer-events-none transition-opacity duration-1000 delay-[2000ms] hidden md:block ${started ? 'opacity-100' : 'opacity-0'}`}
      >
          <div className="flex flex-col items-end space-y-3 pointer-events-auto">
              
              <div className="flex items-center gap-3">
                  <span className="text-[10px] font-bold text-red-400 uppercase tracking-widest drop-shadow-md">Live Market Signal</span>
                  <div className="w-2 h-2 rounded-full bg-red-500 shadow-[0_0_10px_rgba(239,68,68,0.8)] animate-pulse"></div>
              </div>
              <div className="flex items-center gap-3">
                  <span className="text-[10px] font-bold text-emerald-400 uppercase tracking-widest drop-shadow-md">Proven Capability</span>
                  <div className="w-2 h-2 rounded-full bg-emerald-500 shadow-[0_0_10px_rgba(16,185,129,0.8)]"></div>
              </div>
              <div className="flex items-center gap-3 mb-2">
                  <span className="text-[10px] font-bold text-amber-400 uppercase tracking-widest drop-shadow-md">Core Identity</span>
                  <div className="w-2 h-2 rounded-full bg-amber-400 shadow-[0_0_10px_rgba(251,191,36,0.8)]"></div>
              </div>

              <div className="mt-4 bg-slate-900/80 border-r-2 border-blue-500/50 p-4 rounded-l-xl backdrop-blur-md max-w-xs shadow-2xl">
                  <p className="text-[10px] text-slate-300 leading-relaxed font-sans border-b border-white/10 pb-3 mb-3">
                      <strong>SYSTEM STATUS:</strong> Autonomous.<br/>
                      Engine is mapping live news (Red) to resume skills (Green) in real-time.
                  </p>
                  <div className="flex flex-col gap-2">
                      <div className="flex items-center justify-end gap-2 text-blue-400">
                          <span className="text-[9px] uppercase tracking-widest font-bold">DRAG NODES</span>
                          <Move size={12} />
                      </div>
                      <div className="flex items-center justify-end gap-2 text-slate-400">
                          <span className="text-[9px] uppercase tracking-widest font-bold">CLICK TO ACTIVATE</span>
                          <MousePointer2 size={12} />
                      </div>
                  </div>
              </div>

          </div>
      </div>

      {started && cards.length > 0 && (
          <HeroContainer content={cards[contentIndex] || cards[0]} engine={engineRef.current} />
      )}
      
      <canvas ref={canvasRef} style={{ display: 'block', width: '100%', height: '100%' }} />
    </div>
  );
};

export default NeuralBackground;
</file>

<file path="app/components/brain/NeuralData.ts">
import React from 'react';
import { 
  Fingerprint, Shield, Database, Globe, User, 
  TrendingUp, Activity, Server, Layout, Zap, Cpu, Layers
} from 'lucide-react';

export interface Source {
  label: string;
  type: string;
  url: string;
}

export interface NarrativeCard {
  id: string;
  category: 'bio' | 'portfolio' | 'live';
  headline: {
    title: string;
    subtitle: string;
  };
  context: {
    label: string;
    description: string;
    date?: string; 
    sources: Source[];
  };
  insight: {
    label: string;
    explanation: string;
  };
  experience: {
    label: string;
    role: string;
    action: string;
    result: string;
    tags: string[];
  };
  icon: React.ElementType;
}

// --- FULL RESUME SOURCE (The Source of Truth) ---
export const FULL_RESUME_DATA = {
    header: {
        name: "JONATHAN W. MARINO",
        title: "Tech Strategy Lead & Data Scientist",
        location: "New York City Metropolitan Area",
        contact: ["jmarinonyc@gmail.com", "linkedin.com/in/jwmdigital", "jwm.digital"]
    },
    summary: "I operate at the intersection of creative strategy, data engineering, and global policy. I don't just navigate the future; I build the infrastructure that makes it possible.",
    
    core_competencies: {
        Technical: "GoogleSQL (BigQuery), Python, Policy Infrastructure, AI/ML Safety (Human-in-the-Loop), Data Mesh Architecture.",
        Strategic: "Global Risk Governance, Vendor Management, Crisis Response (ATO), DSA/GDPR Compliance.",
        Leadership: "Intrapreneurship (0 to 1 Scaling), Cross-Functional Team Building, Cost Optimization."
    },
    
    experience: [
        {
            company: "GOOGLE",
            location: "New York, NY",
            roles: [
                {
                    title: "Tech Lead & Data Strategy Architect (Policy)",
                    date: "July 2024 – Present",
                    mandate: "Build the data backbone that allows Google to comply with aggressive global regulations without breaking the business.",
                    bullets: [
                        { head: "Built the 'Global Policy Data Mesh'", body: "Architected a unified compliance engine for EU, Asia, and US markets, effectively mitigating ~€20M in regulatory risk exposure." },
                        { head: "Fixed AI Over-Flagging", body: "Operationalized 'Human-in-the-Loop' logic layers to catch when AI was being too aggressive. This reduced false positives by 15% and saved $5M in legitimate advertiser revenue." },
                        { head: "Automated Regulatory Compliance", body: "Led the engineering task force for the Digital Services Act (DSA). We achieved 100% reporting compliance and eliminated the risk of global turnover fines (6%)." },
                        { head: "Election Integrity", body: "Deployed real-time 'War Room' dashboards that allowed the team to detect and neutralize threats to election integrity in under 15 minutes." }
                    ]
                },
                {
                    title: "Senior Lead, Automation Strategy",
                    date: "Oct 2023 – July 2024",
                    mandate: "Leverage data to drive engineering efficiency and stop exponential cloud cost growth.",
                    bullets: [
                        { head: "Cut Cloud Waste", body: "Implemented strict governance on BigQuery usage and optimized query protocols, delivering $500k in annualized operating expense savings." },
                        { head: "Democratized Data Access", body: "Built 'Data University,' a self-serve platform that allowed 200+ non-technical stakeholders to answer their own questions, removing the bottleneck on data analysts." },
                        { head: "Innovated Internal Tools", body: "Built 'SlideSense,' an NLP/Computer Vision AI tool that automates executive presentation reviews, saving over 1,000 management hours." }
                    ]
                },
                {
                    title: "Strategy Lead & Founder, 'Creative Production Works'",
                    date: "May 2021 – Oct 2023",
                    mandate: "Identify a broken internal supply chain and build a startup inside Google to fix it.",
                    bullets: [
                        { head: "Scaled 0 to 1", body: "Grew an internal concept into a $15M enterprise with 50 staff, replacing insecure external agencies with an agile, secure in-house production model." },
                        { head: "Secured the Supply Chain", body: "Established a unified security framework across India, EU, and North America, achieving 100% vendor compliance and cutting onboarding time by 6 weeks." },
                        { head: "Saved 15% on Procurement", body: "Consolidated a fragmented vendor landscape into 5 preferred partners, negotiating better rate cards and streamlining the security surface." }
                    ]
                },
                {
                    title: "Creative Technical Lead",
                    date: "March 2018 – May 2021",
                    mandate: "Provide high-availability architecture for Google’s largest Tier-1 advertising campaigns.",
                    bullets: [
                        { head: "Launched First-to-Market Ad Tech", body: "Led Technical Program Management for '3D Swirl' (interactive 3D display ads) and YouTube AR 'Virtual Try-On,' pushing new formats to market." },
                        { head: "Managed Crisis Response", body: "Orchestrated 'Code Red' operational cleanups for high-risk Account Takeovers (ATO), directly managing recovery protocols for critical clients." }
                    ]
                }
            ]
        }
    ]
};

// --- VISUAL GEMS FOR STRATEGY ENGINE ---
const RAW_GEMS = [
  {"category": "Strategic Risk & Governance", "title": "DSA Compliance Engine", "date": "2024", "challenge": "The EU Digital Services Act (DSA) imposed strict liability.", "strategy": "Architected the enterprise engineering response.", "outcome": "Achieved 100% compliance and eliminated the risk of global turnover fines.", "metric_primary": "100% Compliance", "metric_secondary": "Zero Risk Exposure"},
  {"category": "AI Safety & Revenue Retention", "title": "AI Revenue Defense", "date": "2024", "challenge": "Aggressive AI models were flagging high-value accounts as false positives.", "strategy": "Designed 'Human-in-the-Loop' safety layers to intercept AI decisions.", "outcome": "Reduced high-value account suspensions by ~96% and retained $5M+ in annual revenue.", "metric_primary": "$5M+ Revenue Retained", "metric_secondary": "-96% False Positives"},
  {"category": "Cloud FinOps & Efficiency", "title": "Cloud Cost Governance", "date": "2023", "challenge": "Exponential cloud resource growth was threatening margins.", "strategy": "Implemented strict cloud resource governance and query optimization protocols.", "outcome": "Reversed cost growth to deliver $500k in annualized infrastructure savings.", "metric_primary": "$500k Saved/Year", "metric_secondary": "Optimized Compute"},
  {"category": "Intrapreneurship & Scaling", "title": "Internal Enterprise Scale", "date": "2022", "challenge": "Reliance on insecure external vendors created supply chain risk.", "strategy": "Founded and scaled an internal creative supply chain startup from zero.", "outcome": "Built a $15M enterprise, replacing insecure vendors with a high-margin internal operation.", "metric_primary": "$15M Enterprise Built", "metric_secondary": "High-Margin Ops"},
  {"category": "Data Architecture", "title": "Unified Truth Ecosystem", "date": "2023", "challenge": "Fragmented data silos across Global Policy and Sales slowed decision-making.", "strategy": "Unified data into a single 'Truth' ecosystem.", "outcome": "Reduced executive decision-making latency from weeks to real-time.", "metric_primary": "Real-Time Decisions", "metric_secondary": "Silos Eliminated"},
  {"category": "Operational Automation", "title": "Automated Executive Review", "date": "2024", "challenge": "Executive presentation review was a massive manual time sink.", "strategy": "Productized internal AI research into an automated review tool.", "outcome": "Reclaimed 1,000+ management hours annually.", "metric_primary": "1,000+ Hours Saved", "metric_secondary": "AI Productization"},
  {"category": "Global Supply Chain", "title": "Vendor Security Framework", "date": "2022", "challenge": "Inconsistent vendor security posed a global risk.", "strategy": "Engineered a global vendor security framework.", "outcome": "Achieved 100% compliance across international markets and compressed onboarding by 6 weeks.", "metric_primary": "100% Security Compliance", "metric_secondary": "6 Weeks Faster"},
  {"category": "Crisis Management", "title": "Election War Rooms", "date": "2024", "challenge": "Global elections required immediate threat detection.", "strategy": "Deployed real-time 'War Room' dashboards.", "outcome": "Enabled threat detection and neutralization in under 15 minutes.", "metric_primary": "<15 Min Response", "metric_secondary": "Global Integrity"},
  {"category": "Customer Experience Engineering", "title": "Predictive Policy Support", "date": "2023", "challenge": "Reactive support tickets were overwhelming the system.", "strategy": "Orchestrated a predictive analytics initiative to proactively clarify policy.", "outcome": "Eliminated 300,000 annual support tickets.", "metric_primary": "-300k Tickets", "metric_secondary": "Proactive CX"},
  {"category": "Digital Sovereignty", "title": "Geopolitical Engineering", "date": "2023", "challenge": "Ambiguous regulations in high-friction markets threatened operations.", "strategy": "Translated regulations into binary engineering requirements.", "outcome": "Allowed the platform to operate legally in restricted markets.", "metric_primary": "Market Access Secured", "metric_secondary": "Regulatory binary"}
];

// Helper to Map Raw Gem to NarrativeCard Format
const mapGemToCard = (gem: any, index: number): NarrativeCard => {
    let icon = Database;
    if (gem.category.includes("Risk") || gem.category.includes("Crisis")) icon = Shield;
    if (gem.category.includes("Data") || gem.category.includes("Legacy")) icon = Server;
    if (gem.category.includes("Global") || gem.category.includes("Sovereignty")) icon = Globe;
    if (gem.category.includes("Revenue") || gem.category.includes("Commercial") || gem.category.includes("FinOps")) icon = TrendingUp;
    if (gem.category.includes("AI") || gem.category.includes("Automation")) icon = Cpu;
    if (gem.category.includes("Product") || gem.category.includes("Brand")) icon = Layers;

    return {
        id: "PORTFOLIO_" + index,
        category: 'portfolio',
        headline: { title: gem.title, subtitle: gem.category },
        context: {
            label: "The Challenge",
            description: gem.challenge,
            date: gem.date, 
            sources: [] 
        },
        insight: {
            label: "The Strategy",
            explanation: gem.strategy
        },
        experience: {
            label: "Impact",
            role: "Digital Architect",
            action: gem.outcome,
            result: gem.metric_primary,
            tags: [gem.metric_primary, gem.metric_secondary]
        },
        icon: icon
    };
};

const portfolioCards = RAW_GEMS.map(mapGemToCard); 

// Bio Card
const bioCard: NarrativeCard = { 
    id: "BIO_001", 
    category: 'bio',
    headline: { title: "Jonathan W. Marino", subtitle: "Identity: Digital Architect" },
    context: {
      label: "Profile",
      description: "Executive leader bridging Engineering Velocity and Operational Safety. Transforming regulatory frameworks into automated data meshes.",
      date: "EST. 2005",
      sources: [
        { label: "LinkedIn", type: "Social", url: "https://www.linkedin.com/in/jwmdigital" }
      ]
    },
    insight: {
      label: "Core Competency",
      explanation: "Operating at the rare convergence of Data Engineering, Creative Strategy, and Global Policy to de-risk enterprise scale."
    },
    experience: {
      label: "Executive Function",
      role: "Digital Architect",
      action: "From viral engineering (100M+ views) to enterprise risk architectures (GDPR/DSA), I translate C-Suite goals into code.",
      result: "20 Years of Innovation.",
      tags: ["Strategy", "Leadership", "Polymath"]
    },
    icon: Fingerprint
};

export const narrativeData = [bioCard, ...portfolioCards];
</file>

<file path="app/components/brain/SwarmEngine.ts">
import { Vector3D, Perlin } from './MathUtils';

// --- 1. PARTICLE SWARM (Background Nodes) ---
export class Particle {
  p: Vector3D; t: Vector3D; v: Vector3D; life = 0; maxLife = 0;
  constructor(public g: Perlin, public parent: Node) {
    this.p = new Vector3D(0,0,0); this.t = new Vector3D(0,0,0); this.v = new Vector3D(0,0,0);
    this.respawn();
  }
  respawn() {
    const spread = this.parent.isCentral ? 80 : (this.parent.isMinor ? 10 : 50);
    this.p.set(
        this.parent.pos.x + (Math.random()-0.5)*spread, 
        this.parent.pos.y + (Math.random()-0.5)*spread, 
        0
    );
    this.t.set(this.p.x, this.p.y, 0);
    this.v.set(0,0,0);
    this.life = 0; 
    this.maxLife = 50 + Math.random() * 150;
  }
  step() {
    this.life++;
    const xx = this.p.x / 120; 
    const yy = this.p.y / 120; 
    const zz = Date.now() / 3000;
    
    this.v.x += (Math.random()-0.5)*0.05 + this.g.simplex3d(xx, yy, -zz)*0.08;
    this.v.y += (Math.random()-0.5)*0.05 + this.g.simplex3d(xx, yy, zz)*0.08;
    this.v.add(this.parent.pos.clone().sub(this.p).mul(0.002)).mul(0.96);
    
    if (this.life > this.maxLife) this.respawn();
    this.p.move(this.t).add(this.v);
  }
  render(ctx: CanvasRenderingContext2D, color: string) {
    const alpha = this.parent.isMinor ? 0.2 : 0.6;
    ctx.fillStyle = color;
    ctx.globalAlpha = alpha;
    ctx.beginPath(); 
    ctx.arc(this.p.x, this.p.y, this.parent.isMinor ? 0.4 : 0.8, 0, Math.PI*2); 
    ctx.fill();
    ctx.globalAlpha = 1.0;
  }
}

// --- 2. STREAM PARTICLES (The Data Swarm) ---
export class StreamParticle {
  p: Vector3D; pastP: Vector3D; v: Vector3D;
  life = 0; arrived = false; color: string;
  speed: number;
  wobbleOffset: number;
  initialDist: number;
  
  constructor(start: Vector3D, public target: Vector3D, colorType: number) {
      this.p = start.clone(); 
      this.pastP = start.clone();
      this.v = new Vector3D(0,0,0);
      
      // Calculate initial distance for "progress" tracking
      const dx = target.x - start.x;
      const dy = target.y - start.y;
      this.initialDist = Math.sqrt(dx*dx + dy*dy);

      // Randomized Speed for "Swarm" feel (some fast, some slow)
      this.speed = 4 + Math.random() * 4; 
      
      // Unique noise offset so they don't all follow the same track
      this.wobbleOffset = Math.random() * 1000;

      if (colorType === 2) this.color = '239, 68, 68'; // Red
      else if (colorType === 1) this.color = '16, 185, 129'; // Green
      else this.color = '234, 179, 8'; // Yellow
  }

  step(generator: Perlin) {
      if (this.arrived) return;
      
      // Trail Logic
      this.pastP.set(this.p.x, this.p.y, 0);

      // Distance to target
      const dx = this.target.x - this.p.x;
      const dy = this.target.y - this.p.y;
      const dist = Math.sqrt(dx*dx + dy*dy);
      
      // Arrival Check (Snap to target if close)
      if (dist < 10) { 
          this.arrived = true; 
          return; 
      }

      // --- ORGANIC STEERING PHYSICS ---
      
      // 1. Seek Force (Normalized Vector to Target)
      const dirX = dx / dist;
      const dirY = dy / dist;

      // 2. Noise Force (Turbulence)
      // We scale noise based on distance. 
      // Far away = High Noise (Chaos). Close = Zero Noise (Precision Docking).
      const progress = 1 - (dist / this.initialDist); // 0 to 1
      
      // Ramp noise down as we approach target (Square it for smoother landing)
      const noiseInfluence = Math.pow(1 - progress, 2) * 4.0; 

      const time = Date.now() * 0.002;
      const noiseX = generator.simplex3d(this.p.x * 0.01, this.p.y * 0.01, time + this.wobbleOffset);
      const noiseY = generator.simplex3d(this.p.x * 0.01 + 100, this.p.y * 0.01, time + this.wobbleOffset);

      // 3. Apply Velocity
      // Base velocity aligns with target direction
      this.v.x = (dirX * this.speed) + (noiseX * noiseInfluence);
      this.v.y = (dirY * this.speed) + (noiseY * noiseInfluence);

      // 4. Move
      this.p.add(this.v);
      this.life++;
  }

  render(ctx: CanvasRenderingContext2D) {
      if (this.arrived) return;
      
      // Draw Trail (Motion Blur)
      ctx.beginPath();
      ctx.moveTo(this.pastP.x, this.pastP.y);
      ctx.lineTo(this.p.x, this.p.y);
      ctx.strokeStyle = `rgba(${this.color}, 0.6)`;
      ctx.lineWidth = 2;
      ctx.stroke();

      // Draw Head (Data Packet) - Bright white leading edge
      ctx.beginPath();
      ctx.arc(this.p.x, this.p.y, 1.5, 0, Math.PI * 2);
      ctx.fillStyle = '#ffffff';
      ctx.fill();
      
      // Glow
      ctx.shadowColor = `rgba(${this.color}, 1)`;
      ctx.shadowBlur = 10;
      ctx.shadowBlur = 0; // Reset for performance
  }
}

// --- 3. NODES ---
export class Node {
  pos: Vector3D; vel: Vector3D; particles: Particle[]=[]; neighbors: Node[]=[];
  isActive = false; 
  colorHue: number; pulseOffset: number; radiusBase: number;
  shapeOffsets: number[];
  isDragging = false; 
  category: 'bio' | 'portfolio' | 'live' = 'portfolio';
  dataIndex: number = -1; 
  
  life: number = 0;
  maxLife: number = 0;

  constructor(x: number, y: number, public generator: Perlin, public isCentral: boolean = false, public isMinor: boolean = false) {
    this.pos = new Vector3D(x, y, 0);
    this.vel = new Vector3D(0, 0, 0);
    
    if (isCentral) this.colorHue = 45; 
    else if (isMinor) this.colorHue = 220; 
    else this.colorHue = 150; 

    this.pulseOffset = Math.random() * 100;
    this.radiusBase = isCentral ? 18 : (isMinor ? 2 : 10);
    this.shapeOffsets = Array.from({length: 8}, () => 0.7 + Math.random() * 0.6);
    
    if (isMinor) {
        this.life = Math.random() * 100;
        this.maxLife = 200 + Math.random() * 300;
    }
    
    const pCount = isCentral ? 100 : (this.isMinor ? 0 : 50);
    for(let i=0;i<pCount;i++) this.particles.push(new Particle(generator, this));
  }

  bindData(index: number, cat: 'bio' | 'portfolio' | 'live') {
      this.dataIndex = index;
      this.category = cat;
      if (cat === 'live') this.colorHue = 0; 
      else if (cat === 'portfolio') this.colorHue = 150; 
      else this.colorHue = 45; 
  }

  connect(nodes: Node[]) {
    this.neighbors = [];
    const maxDist = this.isMinor ? 120 : 350; 
    
    for (let other of nodes) {
      if (other === this) continue;
      const dist = this.pos.dist(other.pos);
      if (dist < maxDist) {
          this.neighbors.push(other);
          if (this.isMinor && this.neighbors.length > 5) break; 
      }
    }
  }

  update(width: number, height: number, allNodes: Node[]) {
    if (this.isDragging) {
         for(let p of this.particles) p.step();
         return;
    }

    if (this.isMinor) {
        this.life++;
        if (this.life > this.maxLife) {
            this.life = 0;
            this.maxLife = 200 + Math.random() * 300;
            const minX = 650;
            this.pos.x = minX + Math.random() * (width - minX - 50);
            this.pos.y = 50 + Math.random() * (height - 100);
            this.vel.set(0,0,0);
        }
    }

    const time = Date.now() * 0.0005;
    const noiseScale = this.isMinor ? 0.08 : 0.04;
    
    this.vel.add(new Vector3D(
        this.generator.simplex3d(this.pos.x*0.002, this.pos.y*0.002, time)*noiseScale, 
        this.generator.simplex3d(this.pos.x*0.002, this.pos.y*0.002, time+100)*noiseScale, 
        0
    ));
    
    if (!this.isMinor) {
        for (let o of allNodes) {
            if (o === this || o.isMinor) continue;
            const d = this.pos.dist(o.pos);
            if (d < 150 && d > 0) this.vel.add(this.pos.clone().sub(o.pos).div(d).mul(0.04));
        }
        const UI_WIDTH = 500; 
        if (this.pos.x < UI_WIDTH) { this.vel.x += 0.2; }
    }

    this.vel.mul(0.98); 
    this.pos.add(this.vel);
    
    const PADDING = 100;
    if (this.pos.x < -PADDING) this.vel.x += 0.2;
    if (this.pos.x > width + PADDING) this.vel.x -= 0.2;
    if (this.pos.y < -PADDING) this.vel.y += 0.2;
    if (this.pos.y > height + PADDING) this.vel.y -= 0.2;

    for(let p of this.particles) p.step();
  }

  render(ctx: CanvasRenderingContext2D, globalAlpha: number) {
    const time = Date.now() / 1000;
    const pulse = Math.sin(time + this.pulseOffset) * 0.1 + 1;
    let hue = this.colorHue;
    if (this.category === 'live') hue = 0; 

    let alpha = this.isActive ? 1.0 : 0.6;
    
    if (this.isMinor) {
        const progress = this.life / this.maxLife;
        let lifeAlpha = 1;
        if (progress < 0.2) lifeAlpha = progress / 0.2;
        else if (progress > 0.8) lifeAlpha = (1 - progress) / 0.2;
        alpha = 0.3 * lifeAlpha;
    }

    const col = `hsla(${hue}, 80%, 60%, ${alpha * globalAlpha})`;
    
    for(let p of this.particles) p.render(ctx, col);
    
    ctx.fillStyle = this.isActive ? '#fff' : col;
    ctx.shadowBlur = this.isActive ? 30 : (this.isMinor ? 0 : 15);
    ctx.shadowColor = col;
    
    ctx.beginPath();
    if (this.isMinor) {
        ctx.arc(this.pos.x, this.pos.y, this.radiusBase, 0, Math.PI * 2);
    } else {
        const segments = 8;
        for(let i=0; i<=segments; i++) {
            const morph = Math.sin(time * 2 + i) * 0.15 + 1;
            const r = this.radiusBase * this.shapeOffsets[i%8] * morph * pulse;
            const ang = (i/segments) * Math.PI * 2;
            const x = this.pos.x + Math.cos(ang) * r;
            const y = this.pos.y + Math.sin(ang) * r;
            if(i===0) ctx.moveTo(x,y); else ctx.lineTo(x,y);
        }
    }
    ctx.closePath();
    ctx.fill();
    ctx.shadowBlur = 0;
  }

  renderConnections(ctx: CanvasRenderingContext2D, globalAlpha: number) {
    let nodeAlpha = 1;
    if (this.isMinor) {
        const progress = this.life / this.maxLife;
        if (progress < 0.2) nodeAlpha = progress / 0.2;
        else if (progress > 0.8) nodeAlpha = (1 - progress) / 0.2;
    }

    for (let n of this.neighbors) {
      const d = this.pos.dist(n.pos);
      const maxDist = (this.isMinor || n.isMinor) ? 120 : 350;
      const strength = Math.max(0, 1 - (d / maxDist));
      if (strength <= 0) continue;

      const baseAlpha = n.isMinor ? 0.15 : (this.isActive || n.isActive ? 0.5 : 0.15);
      const opacity = (0.05 + strength * baseAlpha) * globalAlpha;
      const width = (n.isMinor) ? 0.5 : (0.5 + strength);

      const g = ctx.createLinearGradient(this.pos.x, this.pos.y, n.pos.x, n.pos.y);
      g.addColorStop(0, "hsla(" + this.colorHue + ", 60%, 60%, " + opacity + ")");
      g.addColorStop(1, "hsla(" + n.colorHue + ", 60%, 60%, " + opacity + ")");
      
      ctx.lineWidth = width;
      ctx.strokeStyle = g;
      ctx.beginPath();
      ctx.moveTo(this.pos.x, this.pos.y);
      ctx.lineTo(n.pos.x, n.pos.y);
      ctx.stroke();
    }
  }

  hitTest(mx: number, my: number) { 
      if (this.isMinor) return false; 
      return Math.sqrt((this.pos.x - mx)**2 + (this.pos.y - my)**2) < 60; 
  }
}

export class SwarmEngine {
  canvas: HTMLCanvasElement; ctx: CanvasRenderingContext2D;
  width = 0; height = 0;
  dpr = 1;
  nodes: Node[] = [];
  particles: StreamParticle[] = [];
  pGen = new Perlin();
  activeNode: Node | null = null;
  
  targets: {x: number, y: number}[] = [];
  onNodeChange: (idx: number) => void;
  reqId: number = 0;
  startTime: number;
  
  streamActive = false;
  linkProgress = [0, 0, 0, 0]; 
  streamPhases = [false, false, false, false];
  streamTimers: NodeJS.Timeout[] = [];

  camera = { x: 0, y: 0, zoom: 1 };
  isDragging = false;
  lastMouse = { x: 0, y: 0 };
  draggedNode: Node | null = null;
  dragStartPos: {x: number, y: number} | null = null;

  boundMouseMove: (e: MouseEvent) => void;
  boundMouseDown: (e: MouseEvent) => void;
  boundMouseUp: (e: MouseEvent) => void;
  boundWheel: (e: WheelEvent) => void;

  constructor(canvas: HTMLCanvasElement, onNodeChange: (idx: number) => void, initialData: any[]) {
    this.canvas = canvas;
    this.ctx = canvas.getContext('2d')!;
    this.onNodeChange = onNodeChange;
    this.dpr = typeof window !== 'undefined' ? window.devicePixelRatio || 1 : 1;
    
    this.boundMouseMove = this.handleMouseMove.bind(this);
    this.boundMouseDown = this.handleMouseDown.bind(this);
    this.boundMouseUp = this.handleMouseUp.bind(this);
    this.boundWheel = this.handleWheel.bind(this);
    
    this.resize();
    window.addEventListener('resize', () => this.resize());
    canvas.addEventListener('mousemove', this.boundMouseMove);
    canvas.addEventListener('mousedown', this.boundMouseDown);
    window.addEventListener('mouseup', this.boundMouseUp);
    canvas.addEventListener('wheel', this.boundWheel, { passive: false });
    
    this.initNodes(initialData);
    this.startTime = Date.now();
    
    setTimeout(() => { if (this.nodes.length > 0) this.activateNode(this.nodes[0]); }, 3500); 

    this.animate();
  }

  screenToWorld(sx: number, sy: number) {
      return {
          x: (sx - this.width / 2 - this.camera.x) / this.camera.zoom + this.width / 2,
          y: (sy - this.height / 2 - this.camera.y) / this.camera.zoom + this.height / 2
      };
  }

  worldToScreen(wx: number, wy: number) {
      return {
          x: (wx - this.width / 2) * this.camera.zoom + this.width / 2 + this.camera.x,
          y: (wy - this.height / 2) * this.camera.zoom + this.height / 2 + this.camera.y
      };
  }
  
  handleWheel(e: WheelEvent) {
      e.preventDefault();
      const zoomIntensity = 0.001;
      const newZoom = Math.min(Math.max(0.2, this.camera.zoom - e.deltaY * zoomIntensity), 4);
      this.camera.zoom = newZoom;
  }

  setTargets(rects: DOMRect[]) {
      this.targets = rects.map(r => ({ 
          x: r.left + (r.width / 2), 
          y: r.top + (r.height / 2) 
      }));
  }

  resize() {
      this.width = window.innerWidth;
      this.height = window.innerHeight;
      this.dpr = window.devicePixelRatio || 1;
      
      this.canvas.width = this.width * this.dpr;
      this.canvas.height = this.height * this.dpr;
      this.canvas.style.width = `${this.width}px`;
      this.canvas.style.height = `${this.height}px`;
      this.ctx.scale(this.dpr, this.dpr);
      
      if (this.nodes.length === 0) this.initNodes([]);
  }

  initNodes(initialData: any[]) {
      this.nodes = [];
      const cx = this.width / 2;
      const cy = this.height / 2;
      
      const central = new Node(cx, cy, this.pGen, true);
      central.bindData(0, 'bio');
      this.nodes.push(central);
      
      const totalActiveNodes = 20;
      for(let i=0; i<totalActiveNodes; i++) {
          const n = new Node(cx, cy, this.pGen); 
          const angle = Math.random() * Math.PI * 2;
          const force = 10 + Math.random() * 15; 
          n.vel.x = Math.cos(angle) * force;
          n.vel.y = Math.sin(angle) * force;
          
          const category = i < 10 ? 'live' : 'portfolio';
          n.bindData(i + 1, category); 
          this.nodes.push(n);
      }
      
      for(let i=0; i<200; i++) {
          const n = new Node(Math.random() * this.width, Math.random() * this.height, this.pGen, false, true);
          this.nodes.push(n);
      }
      
      if (initialData.length > 0) this.updateData(initialData);
  }

  updateData(newData: any[]) {
      let dataIdx = 1; 
      for(let i=1; i<this.nodes.length; i++) {
          if (this.nodes[i].isMinor) continue;
          if (dataIdx < newData.length) {
              this.nodes[i].bindData(dataIdx, newData[dataIdx].category);
              dataIdx++;
          } else {
              const wrappedIdx = 1 + ((dataIdx - 1) % (newData.length - 1));
              this.nodes[i].bindData(wrappedIdx, newData[wrappedIdx].category);
              dataIdx++;
          }
      }
  }

  handleMouseDown(e: MouseEvent) {
      const mx = e.clientX;
      const my = e.clientY;
      const world = this.screenToWorld(mx, my);

      let hit = false;
      for (let i = this.nodes.length - 1; i >= 0; i--) {
          const n = this.nodes[i];
          if (!n.isMinor && n.hitTest(world.x, world.y)) {
              this.draggedNode = n;
              n.isDragging = true;
              hit = true;
              break;
          }
      }
      this.dragStartPos = { x: mx, y: my };
      this.isDragging = true;
      this.lastMouse = { x: mx, y: my };
      this.canvas.style.cursor = hit ? 'grabbing' : 'grabbing';
  }

  handleMouseMove(e: MouseEvent) {
      const mx = e.clientX;
      const my = e.clientY;
      const world = this.screenToWorld(mx, my);

      if (this.draggedNode) {
          this.draggedNode.pos.x = world.x;
          this.draggedNode.pos.y = world.y;
          this.draggedNode.vel.set(0,0,0); 
      } else if (this.isDragging && !this.draggedNode) {
          const dx = mx - this.lastMouse.x;
          const dy = my - this.lastMouse.y;
          this.camera.x += dx;
          this.camera.y += dy;
          this.lastMouse = { x: mx, y: my };
      } else {
          let hit = false;
          for (let n of this.nodes) {
              if (!n.isMinor && n.hitTest(world.x, world.y)) { hit = true; break; }
          }
          this.canvas.style.cursor = hit ? 'pointer' : 'default';
      }
  }

  handleMouseUp(e: MouseEvent) {
      const mx = e.clientX;
      const my = e.clientY;
      if (this.dragStartPos && this.draggedNode) {
          const dist = Math.sqrt((mx - this.dragStartPos.x)**2 + (my - this.dragStartPos.y)**2);
          if (dist < 5) this.activateNode(this.draggedNode);
      }
      if (this.draggedNode) { this.draggedNode.isDragging = false; this.draggedNode = null; }
      this.isDragging = false;
      this.dragStartPos = null;
      this.canvas.style.cursor = 'default';
  }

  activateNode(node: Node) {
      if (this.activeNode) this.activeNode.isActive = false;
      this.streamTimers.forEach(id => clearTimeout(id));
      this.streamTimers = [];
      this.particles = [];
      this.activeNode = node;
      this.activeNode.isActive = true;
      this.onNodeChange(node.dataIndex);
      this.startStreamSequence();
  }

  startStreamSequence() {
      this.streamActive = true;
      this.streamPhases = [false, false, false, false];
      this.linkProgress = [0, 0, 0, 0];
      
      // Increased spawn rate by triggering more frequent phases
      const t1 = setTimeout(() => this.streamPhases[0] = true, 0);
      const t2 = setTimeout(() => this.streamPhases[1] = true, 600); 
      const t3 = setTimeout(() => this.streamPhases[2] = true, 1200);
      const t4 = setTimeout(() => this.streamPhases[3] = true, 1800);
      this.streamTimers.push(t1, t2, t3, t4);
  }

  cycleNextNode() {
      if (this.nodes.length === 0) return;
      let currentIndex = this.nodes.indexOf(this.activeNode!);
      let nextIdx = (currentIndex + 1) % this.nodes.length;
      while (this.nodes[nextIdx].isMinor) nextIdx = (nextIdx + 1) % this.nodes.length;
      this.activateNode(this.nodes[nextIdx]);
  }

  spawnStreams() {
      if (!this.activeNode || this.targets.length !== 4) return;
      if (!this.streamActive) return; 
      
      let cType = 1; 
      if (this.activeNode.category === 'live') cType = 2; 
      if (this.activeNode.category === 'bio') cType = 0; 

      const screenNode = this.worldToScreen(this.activeNode.pos.x, this.activeNode.pos.y);
      const startPos = new Vector3D(screenNode.x, screenNode.y, 0);

      // INCREASED SPAWN RATE: 80% chance per frame per active phase
      const spawnRate = 0.8;
      if (this.streamPhases[0] && Math.random() > 1 - spawnRate) this.particles.push(new StreamParticle(startPos, new Vector3D(this.targets[0].x, this.targets[0].y, 0), cType));
      if (this.streamPhases[1] && Math.random() > 1 - spawnRate) this.particles.push(new StreamParticle(startPos, new Vector3D(this.targets[1].x, this.targets[1].y, 0), cType));
      if (this.streamPhases[2] && Math.random() > 1 - spawnRate) this.particles.push(new StreamParticle(startPos, new Vector3D(this.targets[2].x, this.targets[2].y, 0), cType));
      if (this.streamPhases[3] && Math.random() > 1 - spawnRate) this.particles.push(new StreamParticle(startPos, new Vector3D(this.targets[3].x, this.targets[3].y, 0), cType));
  }

  lerp(v1: Vector3D, v2: Vector3D, t: number): Vector3D {
      return new Vector3D(v1.x + (v2.x - v1.x) * t, v1.y + (v2.y - v1.y) * t, 0);
  }

  animate = () => {
    this.reqId = requestAnimationFrame(this.animate);
    this.ctx.globalCompositeOperation = 'source-over';
    this.ctx.fillStyle = 'rgba(2,4,10,0.2)';
    this.ctx.fillRect(0,0,this.width,this.height);
    
    this.ctx.save();
    this.ctx.translate(this.width/2 + this.camera.x, this.height/2 + this.camera.y);
    this.ctx.scale(this.camera.zoom, this.camera.zoom);
    this.ctx.translate(-this.width/2, -this.height/2);

    this.ctx.globalCompositeOperation = 'screen';
    for (let n of this.nodes) n.connect(this.nodes);

    for (let n of this.nodes) {
        n.update(this.width, this.height, this.nodes);
        n.render(this.ctx, 1); 
        n.renderConnections(this.ctx, 1);
    }
    this.ctx.restore();

    if (this.activeNode && this.targets.length === 4) {
        this.spawnStreams();
        const screenNode = this.worldToScreen(this.activeNode.pos.x, this.activeNode.pos.y);
        const P0 = new Vector3D(screenNode.x, screenNode.y, 0);
        
        for (let i = 0; i < 4; i++) {
            if (this.streamPhases[i]) {
                 this.linkProgress[i] += 0.03;
                 if (this.linkProgress[i] > 1) this.linkProgress[i] = 1;
            }
            // The quadratic curve logic is replaced by individual particles
        }
    }

    for (let i = this.particles.length - 1; i >= 0; i--) {
        let p = this.particles[i]; p.step(this.pGen); p.render(this.ctx);
        if (p.arrived) this.particles.splice(i, 1);
    }
  }

  dispose() {
      this.canvas.removeEventListener('mousemove', this.boundMouseMove);
      this.canvas.removeEventListener('mousedown', this.boundMouseDown);
      window.removeEventListener('mouseup', this.boundMouseUp);
      this.canvas.removeEventListener('wheel', this.boundWheel); 
      cancelAnimationFrame(this.reqId);
      this.streamTimers.forEach(clearTimeout);
  }
}
</file>

<file path="app/components/NeuralTerminal.tsx">
"use client";
import { useState, useEffect, useRef } from 'react';

interface Props {
  onComplete: () => void;
  context: any;
  realTimeLog?: string | null;
}

export default function NeuralTerminal({ onComplete, context, realTimeLog }: Props) {
  const [logs, setLogs] = useState<string[]>([]);
  const [mainText, setMainText] = useState("");
  const [subText, setSubText] = useState("");
  const [progress, setProgress] = useState(0);
  const logEndRef = useRef<HTMLDivElement>(null);

  // Sound effect simulation (Visual only for now)
  const [activeZone, setActiveZone] = useState<"BOOT" | "NETWORK" | "MIND" | "COMPLETE">("BOOT");

  const addLog = (text: string) => {
    setLogs(prev => [...prev, `> ${text}`]);
  };

  // Auto-scroll logs
  useEffect(() => {
    logEndRef.current?.scrollIntoView({ behavior: "smooth" });
  }, [logs]);

  // THE CINEMATIC SEQUENCE
  useEffect(() => {
    let timer = 0;
    
    // 0s: BOOT
    setTimeout(() => {
        addLog(`KERNEL: DETECTED VISITOR [${context?.city?.toUpperCase() || "UNKNOWN"}]`);
        addLog("PROTOCOL: AUTHENTICATING...");
        setMainText("INITIALIZING NEURAL HANDSHAKE");
        setActiveZone("BOOT");
    }, 500);

    // 2s: NETWORK (The "Live" aspect)
    setTimeout(() => {
        addLog("CONN: ESTABLISHED SECURE UPLINK.");
        addLog("TARGET: HACKER_NEWS_API // PORT 443");
        addLog("TARGET: GOOGLE_GEMINI_2.0_FLASH // KEY_VALID");
        setMainText("INGESTING GLOBAL DATA STREAMS");
        setSubText("THIS SITE IS BEING GENERATED IN REAL-TIME BASED ON LIVE EVENTS.");
        setActiveZone("NETWORK");
        setProgress(30);
    }, 3500);

    // 7s: THE MIND (The Narrative)
    setTimeout(() => {
        addLog("ARCHITECT: JONATHAN_MARINO_PRIME");
        addLog("STRATEGY: SYNTHESIZING RESUME DATA...");
        addLog("WARN: COMPLEXITY THRESHOLD EXCEEDED.");
        setMainText("ENTERING JON'S MIND");
        setSubText("DECODING STRATEGIC ARCHITECTURE...");
        setActiveZone("MIND");
        setProgress(65);
    }, 8000);

    // 12s: DYNAMIC BUILD
    setTimeout(() => {
        addLog("RENDER: COMPILING 3D ASSETS...");
        addLog("RENDER: CALCULATING NEURAL PATHWAYS...");
        addLog("BUILD: HERO_SECTION [DYNAMIC]");
        addLog("BUILD: EXECUTIVE_BIO [STATIC]");
        setMainText("FINALIZING CONSTRUCT");
        setProgress(90);
    }, 13000);

    // 16s: COMPLETE
    setTimeout(() => {
        addLog("STATUS: ONLINE.");
        setMainText("WELCOME.");
        setProgress(100);
        setActiveZone("COMPLETE");
    }, 16000);

    // 18s: EXIT
    setTimeout(() => {
        onComplete();
    }, 18000);

  }, [context, onComplete]);

  // Listen to Real-Time Logs from Parent (if any)
  useEffect(() => {
    if (realTimeLog) {
        setLogs(prev => [...prev, `>> LIVE_AGENT: ${realTimeLog}`]);
    }
  }, [realTimeLog]);

  return (
    <div className="fixed inset-0 bg-black z-[100] flex flex-col font-mono text-green-500 overflow-hidden scanline cursor-none">
      
      {/* BACKGROUND GRID */}
      <div className="absolute inset-0 opacity-10 bg-[linear-gradient(rgba(18,16,16,0)_50%,rgba(0,0,0,0.25)_50%),linear-gradient(90deg,rgba(255,0,0,0.06),rgba(0,255,0,0.02),rgba(0,0,255,0.06))] bg-[length:100%_4px,6px_100%] pointer-events-none"></div>

      {/* TOP BAR */}
      <div className="w-full border-b border-green-900/50 p-4 flex justify-between items-center text-xs tracking-widest opacity-70">
        <div className="flex gap-4">
            <span>SYS.VER: 4.0.2</span>
            <span>MEM: 64TB</span>
            <span className="animate-pulse text-red-500">{activeZone} SEQUENCE</span>
        </div>
        <div>
            <span>VISITOR_ID: {context?.city || "ANONYMOUS"}</span>
        </div>
      </div>

      {/* CENTER STAGE */}
      <div className="flex-grow flex flex-col items-center justify-center relative z-10">
        {/* Progress Ring */}
        <div className="relative w-64 h-64 mb-8 flex items-center justify-center">
            <svg className="w-full h-full rotate-[-90deg]" viewBox="0 0 100 100">
                <circle cx="50" cy="50" r="45" fill="none" stroke="#064e3b" strokeWidth="2" />
                <circle 
                    cx="50" cy="50" r="45" fill="none" stroke="#22c55e" strokeWidth="2" 
                    strokeDasharray="283" 
                    strokeDashoffset={283 - (283 * progress) / 100} 
                    className="transition-all duration-1000 ease-linear"
                />
            </svg>
            <div className="absolute text-4xl font-bold text-white glitch">
                {progress}%
            </div>
        </div>

        <h1 className="text-4xl md:text-6xl font-bold text-white tracking-tighter mb-4 text-center glitch" data-text={mainText}>
            {mainText}
        </h1>
        <p className="text-sm md:text-base text-green-400/80 tracking-widest uppercase max-w-xl text-center">
            {subText}
        </p>
      </div>

      {/* LOG STREAM (Bottom Left) */}
      <div className="absolute bottom-8 left-8 w-96 h-48 overflow-hidden border-l-2 border-green-700/50 pl-4 hidden md:block">
        <div className="flex flex-col justify-end h-full">
            {logs.slice(-6).map((log, i) => (
                <p key={i} className="text-xs text-green-600/80 mb-1 leading-tight font-mono">
                    {log}
                </p>
            ))}
            <div ref={logEndRef} />
        </div>
      </div>

      {/* SKIP BUTTON (Bottom Right) */}
      <div className="absolute bottom-8 right-8 z-50">
        <button 
            onClick={onComplete}
            className="text-xs text-gray-600 hover:text-white border border-gray-800 hover:border-white px-4 py-2 rounded uppercase tracking-widest transition-all"
        >
            [ESC] ABORT SEQUENCE
        </button>
      </div>

    </div>
  );
}
</file>

<file path="app/globals.css">
@import "tailwindcss";

:root {
  --background: #ffffff;
  --foreground: #171717;
}

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --font-sans: var(--font-geist-sans);
  --font-mono: var(--font-geist-mono);
}

@media (prefers-color-scheme: dark) {
  :root {
    --background: #0a0a0a;
    --foreground: #ededed;
  }
}

body {
  background: var(--background);
  color: var(--foreground);
  font-family: Arial, Helvetica, sans-serif;
}

/* --- CINEMATIC TERMINAL EFFECTS --- */
@keyframes scanline {
  0% { transform: translateY(-100%); }
  100% { transform: translateY(100%); }
}

.scanline::before {
  content: " ";
  display: block;
  position: absolute;
  top: 0;
  left: 0;
  bottom: 0;
  right: 0;
  background: linear-gradient(to bottom, rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%), linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.06));
  z-index: 2;
  background-size: 100% 2px, 3px 100%;
  pointer-events: none;
}

.scanline::after {
  content: " ";
  display: block;
  position: absolute;
  top: 0;
  left: 0;
  bottom: 0;
  right: 0;
  background: rgba(18, 16, 16, 0.1);
  opacity: 0;
  z-index: 2;
  pointer-events: none;
  animation: flicker 0.15s infinite;
}

@keyframes flicker {
  0% { opacity: 0.027951; }
  5% { opacity: 0.04828; }
  10% { opacity: 0.01729; }
  15% { opacity: 0.0802; }
  20% { opacity: 0.0513; }
  25% { opacity: 0.0976; }
  30% { opacity: 0.043; }
  35% { opacity: 0.0758; }
  40% { opacity: 0.0179; }
  45% { opacity: 0.074; }
  50% { opacity: 0.036; }
  55% { opacity: 0.092; }
  60% { opacity: 0.023; }
  65% { opacity: 0.079; }
  70% { opacity: 0.032; }
  75% { opacity: 0.088; }
  80% { opacity: 0.022; }
  85% { opacity: 0.071; }
  90% { opacity: 0.039; }
  95% { opacity: 0.095; }
  100% { opacity: 0.021; }
}

@keyframes textShadow {
  0% { text-shadow: 0.4389924193300864px 0 1px rgba(0,30,255,0.5), -0.4389924193300864px 0 1px rgba(255,0,80,0.3), 0 0 3px; }
  5% { text-shadow: 2.7928974010788217px 0 1px rgba(0,30,255,0.5), -2.7928974010788217px 0 1px rgba(255,0,80,0.3), 0 0 3px; }
  /* ... continued noise ... */
  100% { text-shadow: 0.4389924193300864px 0 1px rgba(0,30,255,0.5), -0.4389924193300864px 0 1px rgba(255,0,80,0.3), 0 0 3px; }
}

.glitch {
  animation: textShadow 1.5s infinite;
}

@keyframes scanHorizontal {
  0% { width: 0%; opacity: 0.5; }
  50% { width: 100%; opacity: 1; }
  100% { width: 0%; opacity: 0; left: 100%; }
}

.animate-scan {
  animation: scanHorizontal 3s ease-in-out infinite;
}
</file>

<file path="app/layout.tsx">
import type { Metadata } from "next";
import { Geist, Geist_Mono } from "next/font/google";
import "./globals.css";
import SecurityLayer from "./components/SecurityLayer";
import Script from "next/script";

const geistSans = Geist({
  variable: "--font-geist-sans",
  subsets: ["latin"],
});

const geistMono = Geist_Mono({
  variable: "--font-geist-mono",
  subsets: ["latin"],
});

export const metadata: Metadata = {
  title: "Jonathan William Marino | Digital Architect",
  description: "The Polymathic Convergence of Policy, Technology, and Creative Intelligence.",
};

export default function RootLayout({
  children,
}: Readonly<{
  children: React.ReactNode;
}>) {
  return (
    <html lang="en" suppressHydrationWarning>
      <head>
        {/* AGENT INJECTION: Cinematic Intro Dependencies */}
        <Script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js" strategy="beforeInteractive" />
        <Script src="/js/noise.js" strategy="beforeInteractive" />
      </head>
      <body
        className={`${geistSans.variable} ${geistMono.variable} antialiased`}
        suppressHydrationWarning={true}
      >
        <SecurityLayer />
        {children}
      </body>
    </html>
  );
}
</file>

<file path="app/page.tsx">
"use client";
import { useState, useEffect } from 'react';
import CinematicIntro from './components/CinematicIntro';
import NeuralBackground from './components/brain/NeuralBackground';
import ExecutiveProfile from './components/ExecutiveProfile';
import { MASTER_GEMS } from './data/master_gems';

// Simple fallback structure for StrategyGenerator props
const EmptyFn = () => {};

export default function Home() {
  const [mode, setMode] = useState<'NEURAL' | 'PROFILE'>('NEURAL');
  const [showIntro, setShowIntro] = useState(true);
  const [showNav, setShowNav] = useState(false); 
  const [userContext] = useState({ city: "Global" });
  const [userPortfolio] = useState(MASTER_GEMS);

  const handleIntroComplete = () => {
      setShowIntro(false);
      // Delay Nav appearance by 1 second to let the Neural Web build first
      setTimeout(() => setShowNav(true), 1000); 
  };

  if (showIntro) {
    return <CinematicIntro context={userContext} onComplete={handleIntroComplete} />;
  }

  return (
    <main className="min-h-screen bg-black text-white font-sans">

      {/* NAVIGATION (Fade-In Controlled) */}
      <div className={`fixed top-6 left-1/2 -translate-x-1/2 z-50 transition-all duration-1000 ease-out ${showNav ? 'opacity-100 translate-y-0' : 'opacity-0 -translate-y-10'}`}>
          <div className="bg-gray-900/80 backdrop-blur-md border border-gray-700 rounded-full px-2 py-2 flex gap-2 shadow-2xl">
              <button onClick={() => setMode('NEURAL')} className={`px-4 py-1.5 rounded-full text-xs font-bold uppercase tracking-widest transition-all ${mode === 'NEURAL' ? 'bg-blue-600 text-white' : 'text-gray-400 hover:text-white'}`}>Live Neural</button>
              <button onClick={() => setMode('PROFILE')} className={`px-4 py-1.5 rounded-full text-xs font-bold uppercase tracking-widest transition-all ${mode === 'PROFILE' ? 'bg-blue-600 text-white' : 'text-gray-400 hover:text-white'}`}>Executive Bio</button>
              {/* REMOVED: Strategy Generator Button */}
          </div>
      </div>

      {/* MAIN CONTENT */}
      <div className="pt-16">
        {mode === 'NEURAL' && <NeuralBackground active={!showIntro} />}
        {mode === 'PROFILE' && <ExecutiveProfile />}
        {/* REMOVED: Strategy Generator Component */}
      </div>

    </main>
  );
}
</file>

<file path="package.json">
{
  "name": "src",
  "version": "0.1.35",
  "private": true,
  "scripts": {
    "dev": "next dev",
    "build": "next build",
    "start": "next start",
    "lint": "eslint"
  },
  "dependencies": {
    "@google/generative-ai": "^0.24.1",
    "@vercel/kv": "^3.0.0",
    "@xyflow/react": "^12.9.3",
    "jspdf": "^3.0.4",
    "lucide-react": "^0.555.0",
    "next": "16.0.4",
    "react": "19.2.0",
    "react-dom": "19.2.0"
  },
  "devDependencies": {
    "@tailwindcss/postcss": "^4",
    "@types/node": "^20",
    "@types/react": "^19",
    "@types/react-dom": "^19",
    "eslint": "^9",
    "eslint-config-next": "16.0.4",
    "tailwindcss": "^4",
    "typescript": "^5"
  }
}
</file>

</files>
